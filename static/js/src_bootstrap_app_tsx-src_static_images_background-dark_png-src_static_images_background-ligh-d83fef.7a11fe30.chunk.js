(globalThis.webpackChunkbalansol=globalThis.webpackChunkbalansol||[]).push([["src_bootstrap_app_tsx-src_static_images_background-dark_png-src_static_images_background-ligh-d83fef"],{45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return o.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var n=l(s(27803)),a=l(s(85468)),r=l(s(83943)),o=l(s(69363)),i=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const c=[n.default,a.default,r.default];t.h0=c},76160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>nr,__esModule:()=>tr.X$,logo:()=>tr.jY,panels:()=>tr.h0,readme:()=>tr.ng});var n=s(55754),a=s(68275),r=s(92950),o=s(45055),i=s(32671),l=s(45263);const c=["swap","pools","launchpad"],d=[{label:"Swap",value:"swap"},{label:"Pools",value:"pools"},{label:"Launchpad",value:"launchpad",disabled:"mainnet"===a.net}],u=()=>{const{to:e}=(0,a.useAppRoute)(),{pathname:t}=(0,o.useLocation)(),s=(0,r.useMemo)((()=>{const e=t.split("/");return e[e.length-1]}),[t]);return(0,r.useMemo)((()=>{for(const e of c)if(s===e)return!0;return!1}),[s])?(0,l.jsx)(i.Row,{gutter:[24,24],style:{paddingTop:32},justify:"center",children:(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Segmented,{className:"navigation",options:d,value:s,onChange:t=>e(`/${t.toString()}`),block:!0})})}):(0,l.jsx)(r.Fragment,{})};var p=s(69716),h=s(52523);let m=function(e){return e.InputRight="input-right",e.InputLeft="input-left",e.InputCenter="input-center",e}({});const x=({max:e,onValue:t=(()=>{}),inputStyle:s=m.InputRight,styles:n,...a})=>{const o=(0,r.useCallback)((s=>{if(null===s||e&&parseFloat(s.toString())>parseFloat(e.toString()))return t("");t(s.toString())}),[e,t]);return(0,l.jsx)(i.InputNumber,{...a,stringMode:!0,onChange:o,className:`${s}`,style:{width:"100%",fontSize:24,...n},onBlur:e=>{e.target.value||o("0")},decimalSeparator:".",formatter:e=>(e=>{if(!e)return"0";const t=`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",").split(".");return t[1]?`${t[0]}.${t[1].replace(/,/g,"")}`:t[0]})(e),parser:e=>{if(!e)return 0;const t=e.split(".");return t[1]?Number.parseFloat(`${t[0].replace(/\D/g,"")}.${t[1].replace(/\D/g,"")}`):Number.parseFloat(`${t[0].replace(/\D/g,"")}`)}})};let j=function(e){return e[e.setupToken=0]="setupToken",e[e.addLiquidity=1]="addLiquidity",e[e.confirmCreatePool=2]="confirmCreatePool",e}({});const g=10**9,y=1e9;let f=function(e){return e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap",e}({}),w=function(e){return e.AllPools="all-pools",e.DepositedPools="deposited-pools",e.YourPools="your-pools",e}({});const b="MMM DD, YYYY HH:mm";let C=function(e){return e.active="active",e.upcoming="upcoming",e.completed="completed",e}({}),A=function(e){return e[e.projectInfo=0]="projectInfo",e[e.projectPhoto=1]="projectPhoto",e[e.configuration=2]="configuration",e}({});const v={defi:[49,100,0],gamefi:[4,100,253],DAO:[114,100,7],multisig:[248,100,176],lending:[147,100,156],portfolio:[72,100,5],liquidity:[242,100,21],AMM:[161,100,253],privacy:[136,100,35],payment:[108,100,145],utility:[156,100,45],NFT:[4,100,253]};var T=s(95418),S=s(36911),k=s(25829),N=s(31892),B=s(20547),R=s(33109);const M={appId:"balansol",url:"https://descartesnetwork.github.io/balansol/index.js"},z={development:{...M},production:{...M}};var I=s(91895);const P={devnet:{connection:new I.Connection(a.rpc),balancerAddress:"6SRa2Kc3G4wTG319G4Se6yrRWeS1A1Hj79BC3o7X9v6T",taxmanAddress:"GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54",bidMintDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askMintDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",launchpadAddress:"54e31kYfV9KSfrXBCdxn2aAuL7hY5WhvDuqGaNhFYAJe"},testnet:{connection:new I.Connection(a.rpc),balancerAddress:"",taxmanAddress:"",bidMintDefault:"",askMintDefault:"",launchpadAddress:""},mainnet:{connection:new I.Connection(a.rpc),balancerAddress:"D3BBjqUdCYuP18fNvvMbPAZ8DpcRi4io2EsYHQawJDag",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",bidMintDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askMintDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",launchpadAddress:"54e31kYfV9KSfrXBCdxn2aAuL7hY5WhvDuqGaNhFYAJe"}},D=e=>({origin:e,version:{base:e+"/public/api/v1",get tvl(){return this.base+"/tvl"},get detailTvl(){return this.base+"/tvl/all/"}}}),L={development:{...D("https://stat.sentre.io")},production:{...D("https://stat.sentre.io")}},Z={manifest:z[a.env],sol:P[a.net],api:L[a.env]},F=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(a.util.explorer(t),"_blank")}),E=e=>(console.log("er",e),window.notify({type:"error",description:e.message})),O=e=>!e||e<f.goodSwap?"#14E041":e>f.acceptableSwap?"#D72311":"#FA8C16",W=(e,t)=>Object.keys(e[t])[0],V=(e,t,s)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=async()=>{n.result&&t(n.result.toString(),s)}},Y=e=>/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e),q=e=>{const t={t:{iconName:"logo-telegram",websiteName:"Telegram"},twitter:{iconName:"logo-twitter",websiteName:"Twitter"},facebook:{iconName:"logo-facebook",websiteName:"Facebook"},discord:{iconName:"logo-discord",websiteName:"Discord"},global:{iconName:"globe",websiteName:"Social media"},medium:{iconName:"logo-medium",websiteName:"Medium"}};if(!Y(e))return t.global;let s="";const n=new URL(e).hostname.replace("www.","");for(const a of n){if("."===a)break;s+=a}return t[s.toLowerCase()]||(s="global"),t[s.toLowerCase()]},{sol:{taxmanAddress:G}}=Z,K=({title:e,percent:t,currentPercent:s,onChangeValue:n=(()=>{}),tooltipContent:a,disabled:r})=>(0,l.jsxs)(i.Row,{gutter:[8,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{size:8,children:[(0,l.jsxs)(i.Typography.Text,{style:{textTransform:"capitalize"},children:[e," (%)"]}),(0,l.jsx)(i.Tooltip,{title:a,children:(0,l.jsx)(p.Z,{name:"information-circle-outline"})})]})}),(0,l.jsxs)(i.Col,{children:[(0,l.jsxs)(i.Typography.Text,{type:"secondary",children:["Current ",e,":"]})," ",(0,l.jsxs)(i.Typography.Text,{children:[s,"%"]})]})]})}),(0,l.jsx)(i.Col,{span:24,className:"fee",children:(0,l.jsx)(x,{bordered:!1,inputStyle:m.InputLeft,placeholder:"0",controls:!1,value:t,styles:{fontSize:14},onValue:n,disabled:r})})]}),U=({poolAddress:e})=>{const t=(0,n.useSelector)((t=>t.pools[e])),s=100*t.fee.toNumber()/y,a=100*t.taxFee.toNumber()/y,[o,c]=(0,r.useState)(s.toString()),[d,u]=(0,r.useState)(a.toString()),[p,m]=(0,r.useState)(!1);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(K,{title:"LP Reward Rate",percent:o,currentPercent:s,onChangeValue:c,tooltipContent:"The portion of trading fee a liquidity provider earns upon depositing into the pool"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(K,{title:"Platform Fee",percent:d,currentPercent:a,onChangeValue:u,tooltipContent:"The portion of fee your pool will pay to Balansol for maintaining the system",disabled:t.authority.toBase58()!==G})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{ghost:!0,block:!0,size:"large",loading:p,onClick:async()=>{m(!0);try{const{updateFee:t}=window.balansol,{txId:s}=await t(e,new h.BN(Number(o)*y/100),new h.BN(Number(d)*y/100));return F("Update Fee",s)}catch(t){E(t)}finally{m(!1)}},children:"Update"})})]})},H=({description:e,statusColor:t="success",statusContent:s})=>(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:12,align:"start",children:[(0,l.jsx)(p.Z,{name:"information-circle-outline"}),(0,l.jsx)(i.Space,{direction:"vertical",size:0,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:e})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:0,children:[(0,l.jsx)(i.Badge,{status:t}),(0,l.jsxs)(i.Typography.Text,{children:["Current status: ",s]})]})})]}),J=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(H,{statusColor:"error",statusContent:"Frozen",description:"Unfreeze a pool will active all actions"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{ghost:!0,onClick:async()=>{s(!0);try{const{thawPool:t}=window.balansol,{txId:s}=await t({poolAddress:e});return F("Unfreeze",s)}catch(t){E(t)}finally{s(!1)}},icon:(0,l.jsx)(p.Z,{name:"sunny-outline"}),block:!0,loading:t,size:"large",children:"Unfreeze Pool"})})]})},$=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(H,{statusColor:"success",statusContent:"Active",description:"Freezing a pool will prevent all actions until the pool has been unfreezed."})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{onClick:async()=>{s(!0);try{const{freezePool:t}=window.balansol,{txId:s}=await t({poolAddress:e});return F("Freeze",s)}catch(t){E(t)}finally{s(!1)}},icon:(0,l.jsx)(p.Z,{name:"snow-outline"}),block:!0,loading:t,ghost:!0,size:"large",children:"Freeze Pool"})})]})};var Q=s(43933),X=s.n(Q),_=s(74939),ee=s(99370);const te=({poolAddress:e})=>{const{mints:t,actions:s}=(0,n.useSelector)((t=>t.pools[e])),[a,o]=(0,r.useState)(s),[c,d]=(0,r.useState)(!1);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:12,align:"start",children:[(0,l.jsx)(p.Z,{name:"alert-circle-outline"}),(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Freezing tokens will prevent all actions until the tokens has been unfreezed."})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[12,12],children:t.map(((e,t)=>{const s=W(a,t);return(0,l.jsx)(i.Col,{span:12,children:(0,l.jsxs)(i.Button,{block:!0,onClick:()=>(e=>{const t=[...a];switch(W(t,e)){case"paused":t[e]=Q.MintActionStates.Active;break;case"active":t[e]=Q.MintActionStates.Paused}o(t)})(t),size:"large",children:[(0,l.jsxs)(i.Space,{size:8,className:"individual-token",children:[(0,l.jsx)(_.Z,{mintAddress:e.toBase58()}),(0,l.jsx)(i.Typography.Text,{ellipsis:!0,style:{fontWeight:400,fontSize:14},children:(0,l.jsx)(ee.Z,{mintAddress:e.toBase58()})})]}),"paused"===s&&(0,l.jsx)(i.Space,{className:"disable-mask",align:"center",children:(0,l.jsx)(p.Z,{name:"snow-outline",style:{color:"#F3F3F5"}})})]})})}))})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{block:!0,ghost:!0,onClick:async()=>{d(!0);try{const{updateActions:t}=window.balansol,{txId:s}=await t({poolAddress:e,actions:a});return F("Freeze",s)}catch(t){E(t)}finally{d(!1)}},size:"large",disabled:JSON.stringify(s)===JSON.stringify(a),loading:c,children:"Confirm"})})]})},se=({poolAddress:e})=>{const t=(0,n.useSelector)((t=>t.pools[e])),s=t.state;return(0,l.jsxs)(i.Tabs,{className:"freeze-thaw",type:"card",children:[(0,l.jsxs)(i.Tabs.TabPane,{tab:"Pool",children:[s.initialized&&(0,l.jsx)($,{poolAddress:e}),s.frozen&&(0,l.jsx)(J,{poolAddress:e})]},"pool"),(0,l.jsx)(i.Tabs.TabPane,{tab:"Individual token",disabled:!!s.frozen,children:(0,l.jsx)(te,{poolAddress:e})},"individual_token")]})},ne=({poolAddress:e})=>{const[t,s]=(0,r.useState)(""),[n,a]=(0,r.useState)(!1);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:12,align:"center",children:[(0,l.jsx)(p.Z,{style:{fontSize:16},name:"information-circle-outline"}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{children:"Transfer to Owner"})}),(0,l.jsx)(i.Col,{span:24,className:"transfer-owner",children:(0,l.jsx)(i.Input,{className:"transfer-owner-input",value:t,onChange:e=>s(e.target.value),placeholder:"E.g. AgTMC..."})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{ghost:!0,size:"large",onClick:async()=>{if(a(!0),T.account.isAddress(t))try{const{transferOwnership:s}=window.balansol,{txId:n}=await s({poolAddress:e,newOwner:t});return F("Update weights",n)}catch(s){E(s)}finally{a(!1)}},loading:n,disabled:!t,block:!0,children:"Transfer"})})]})};var ae=s(40106);const re={decimalize:(e,t)=>{if(!e)return new h.BN(0);if(t<0||t%1!==0)throw new Error("decimals must be an integer greater than zero");const s=e.toString();if(!t)return new h.BN(s);const n=s.split(".");if(n.length>2)throw new Error("Invalid number");return 1===n.length?new h.BN(e).mul(new h.BN(10**t)):n[1].length>=t?new h.BN(n[0]+n[1].substring(0,t)):new h.BN(n[0]+n[1]+"0".repeat(t-n[1].length))},undecimalize:(e,t)=>{if(t<0||t%1!==0)throw new Error("decimals must be an integer greater than zero");if(!e)return"0";const s=e.toString();if(!t)return s;let n=s.length>t?s.substring(0,s.length-t):"0",a="";for(a=s.length>t?s.substring(s.length-t,s.length):s.length===t?s:"0".repeat(t-s.length)+s,a=a.split("");"0"===a[a.length-1];)a.pop();return a=a.join(""),a?n+"."+a:n},toNumber:e=>Number(re.undecimalize(e,0))},oe=(e,t)=>{const s=((e,t)=>e.mints.map((e=>e.toBase58())).indexOf(new h.rV.PublicKey(t).toBase58()))(e,t);if(-1===s)throw new Error("Can not find mint in pool");const n=de(e.weights,e.weights[s]);return{reserve:e.reserves[s],normalizedWeight:n,treasury:e.treasuries[s]}},ie=e=>e<1?1-e:0,le=(e,t,s,n,a,r)=>{const o=re.toNumber(t),i=re.toNumber(s),l=re.toNumber(e),c=re.toNumber(r)/g,d=i/(i+l),u=a/n;return new h.BN(o*(1-d**u)*(1-c))},ce=(e,t,s,n,a,r)=>{const o=re.toNumber(t),i=re.toNumber(s),l=re.toNumber(r)/g,c=o/(o-re.toNumber(e)/(1-l)),d=n/a;return new h.BN(i*(c**d-1))},de=(e,t)=>{const s=e.map((e=>Number(ae.default.undecimalize(BigInt(e.toString()),9))));return Number(ae.default.undecimalize(BigInt(t.toString()),9))/s.reduce(((e,t)=>e+t),0)};function ue(e,t){const{balanceIn:s,decimalIn:n,balanceOut:a,decimalOut:r,weightIn:o,weightOut:i,swapFee:l}=t,c=Number(ae.default.undecimalize(BigInt(s.toString()),n)),d=Number(ae.default.undecimalize(BigInt(a.toString()),r)),u=o,p=i,h=Number(ae.default.undecimalize(BigInt(e.toString()),n)),m=Number(ae.default.undecimalize(BigInt(l.toString()),9));return-c*p/(d*(-1+m)*(c/(h+c-h*m))**((u+p)/p)*u)}const pe=(e,t)=>{const s=ue(new h.BN(0),t),n=ue(e,t);if(n<s)return 0;return 1-s/n},he=(e,t,s,n,a)=>e.map(((e,t)=>Number(ae.default.undecimalize(BigInt(e.toString()),a[t])))).reduce(((e,r,o)=>{const i=de(s,s[o]),l={balanceIn:t[o],balanceOut:n,weightIn:i,decimalIn:a[o],swapFee:new h.BN(0)},c=((e,t)=>{const s=Number(ae.default.undecimalize(BigInt(t.balanceOut.toString()),9)),n=Number(ae.default.undecimalize(BigInt(e.toString()),9)),a=t.weightIn,r=Number(ae.default.undecimalize(BigInt(t.balanceIn.toString()),t.decimalIn)),o=Number(ae.default.undecimalize(BigInt(t.swapFee.toString()),9));return Math.pow((n+s)/s,1/a)*r/((n+s)*(1+o*(-1+a))*a)})(new h.BN(0),l);return e+r/c}),0),me=(e,t,s,n,a,r)=>{if(0===a.length)return{lpOut:0,impactPrice:0};const o=Number(((e,t,s,n,a,r)=>{const o=Number(ae.default.undecimalize(BigInt(r.toString()),9)),i=Number(ae.default.undecimalize(BigInt(n.toString()),9)),l=t.map(((e,t)=>Number(ae.default.undecimalize(BigInt(e.toString()),a[t])))),c=e.map(((e,t)=>Number(ae.default.undecimalize(BigInt(e.toString()),a[t])))),d=new Array(e.length);let u=0;for(let h=0;h<e.length;h++){const e=de(s,s[h]);d[h]=(l[h]+c[h])/l[h],u+=d[h]*e}let p=1;for(let h=0;h<e.length;h++){const e=de(s,s[h]);let t=c[h];if(d[h]>u){let e=l[h]*(u-1);t=e+(c[h]-e)*(1-o)}p*=((l[h]+t)/l[h])**e}return p>1?i*(p-1):0})(e,t,s,n,a,r).toFixed(9));return{lpOut:o,impactPrice:1-o/Number(he(e,t,s,n,a).toFixed(9))||0}},xe=(e,t,s,n,a,r,o)=>{if(0===r.length||e.isZero())return{lpOut:0,impactPrice:0};let i=new h.BN(0);const l=s.map(((l,c)=>{if(t!==c)return new h.BN(0);const d=de(n,n[c]),u=((e,t,s,n,a,r)=>{const o=Number(ae.default.undecimalize(BigInt(e.toString()),a)),i=Number(ae.default.undecimalize(BigInt(s.toString()),9)),l=Number(ae.default.undecimalize(BigInt(n.toString()),9)),c=Number(ae.default.undecimalize(BigInt(r.toString()),9)),d=o*ie(((l-i)/l)**(1/t)),u=d*ie(t);return d-u+u*ie(c)})(s[c],d,e,a,r[c],o);return i=new h.BN(ae.default.decimalize(u,r[c]).toString()),i})),c=Number(he(l,s,n,a,r).toFixed(9)),d=Number(ae.default.undecimalize(BigInt(e.toString()),9));if(d<c)return{tokenAmountOut:i,impactPrice:0};return{tokenAmountOut:i,impactPrice:d/c-1}},je=e=>{let t=1;return e.forEach((e=>{const s=e.priceImpact;t*=1-s})),1-t},ge=({mintAddress:e})=>(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(_.Z,{mintAddress:e}),(0,l.jsx)(ee.Z,{mintAddress:e})]}),ye=({poolAddress:e})=>{const[t,s]=(0,r.useState)(),[o,c]=(0,r.useState)(!1),{mints:d,weights:u}=(0,n.useSelector)((t=>t.pools[e])),m=(0,a.useTheme)(),j=(0,r.useCallback)((()=>{const e={};d.forEach(((t,s)=>{const n=de(u,u[s]),r=t.toBase58();e[r]={addressToken:r,weight:a.util.numeric(100*n).format("0,0.[00]"),isLocked:!1}})),s(e)}),[d,u]),y=(0,r.useCallback)((e=>{if(!t)return!1;const{weight:s}=t[e],n=Number(s);if(n>100||n<0)return!1;let r=0;for(const{addressToken:a,weight:i}of Object.values(t))e!==a&&(r+=Number(i));const o=100-r;return n===Number(a.util.numeric(o).format("0,0.[00]"))}),[t]),f=(0,r.useMemo)((()=>{if(!t)return!0;for(const e of Object.keys(t))if(!y(e))return!0;return!1}),[t,y]);return(0,r.useEffect)((()=>{j()}),[j]),(0,l.jsxs)(i.Row,{gutter:[12,12],children:[d.map(((e,n)=>{const r=e.toBase58();if(!t)return null;const{isLocked:o,weight:c}=t[r];return(0,l.jsx)(i.Col,{span:24,className:"weight",children:(0,l.jsxs)(i.Row,{gutter:12,align:"middle",wrap:!1,children:[(0,l.jsx)(i.Col,{flex:"auto",className:y(r)?"weight-input":"weight-input-error",children:(0,l.jsx)(x,{prefix:(0,l.jsx)(ge,{mintAddress:r}),disabled:o,bordered:!1,controls:!1,styles:{borderRadius:40,background:"light"===m?"#e6eaf5":"#142042"},addonAfter:(0,l.jsx)(i.Typography.Text,{children:"%"}),value:c,name:r,onValue:e=>((e,n)=>{const r={...t};r[n]={...r[n],weight:e};let o=100-Number(e);const i=Object.values(r).filter((e=>!e.isLocked&&e.addressToken!==n)).length;let l=!0;for(const t of d){const{isLocked:e,weight:s,addressToken:c}=r[t.toBase58()];if(n===c)continue;if(e){o-=Number(s);continue}const d=(o/i).toFixed(2);if(l){const e=o-Number(d)*(i-1);r[c]={...r[c],weight:a.util.numeric(e).format("0,0.[00]")},l=!1}else r[c]={...r[c],weight:a.util.numeric(d).format("0,0.[00]")}}return s(r)})(e,r)})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Button,{shape:"circle",type:"text",onClick:()=>(e=>{const n={...t},{isLocked:a}=n[e];n[e]={...n[e],isLocked:!a},s(n)})(r),icon:(0,l.jsx)(p.Z,{name:o?"lock-closed-outline":"lock-open-outline"})})})]})},r+n)})),(0,l.jsx)(i.Col,{span:24})," ",(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{onClick:async()=>{if(c(!0),!t)return;const s=Object.values(t).map((({weight:e})=>{const t=Number(e)*g;return new h.BN(t)}));try{const{updateWeights:t}=window.balansol,{txId:n}=await t({poolAddress:e,weights:s});return F("Update weights",n)}catch(n){E(n)}finally{c(!1)}},loading:o,disabled:f,block:!0,ghost:!0,size:"large",children:"Update"})})]})},fe=({poolAddress:e})=>(0,l.jsx)(i.Card,{children:(0,l.jsxs)(i.Tabs,{children:[(0,l.jsx)(i.Tabs.TabPane,{tab:"Weights",children:(0,l.jsx)(ye,{poolAddress:e})},"weights"),(0,l.jsx)(i.Tabs.TabPane,{tab:"Freeze/Unfreeze",children:(0,l.jsx)(se,{poolAddress:e})},"freeze-thaw"),(0,l.jsx)(i.Tabs.TabPane,{tab:"Fee",children:(0,l.jsx)(U,{poolAddress:e})},"fee"),(0,l.jsx)(i.Tabs.TabPane,{tab:"Ownership",children:(0,l.jsx)(ne,{poolAddress:e})},"ownership")]})});var we=s(40426),be=s(44521),Ce=s(69954),Ae=s(68573),ve=s(45198),Te=s(90404),Se=s(54132),ke=s(8399);be.D([ve.N,Te.N,Ae.N,ke.N,Se.N]);const Ne=(e,t)=>({legend:{bottom:0,icon:"circle",textStyle:{color:t.color}},tooltip:{trigger:"item",borderWidth:"1",formatter:function(e,t,s){return`<div style="min-width: 200px; font-weight: 400"><span style="color: #9CA1AF; font-size: 12px">${e.data.name}</span><br/><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Weight&nbsp;</span> <span style="font-size: 16px; font-weight: 700">${e.data.value}%</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount&nbsp;</span> <span style="font-size: 16px; font-weight: 700">${e.data.tokenAmount}</span></span></div>`},backgroundColor:t.backgroundColor,extraCssText:"border-radius: 24px",textStyle:{color:t.color}},series:[{type:"pie",radius:"70%",avoidLabelOverlap:!1,top:0,label:{show:!0,position:"inside",formatter:"{c}%"},labelLine:{show:!0},bottom:0,data:e.map((e=>({name:e.symbol,value:a.util.numeric(e.weight).format("0,0.[00]"),tokenAmount:e.tokenAmount})))}]}),Be={light:{color:"#081438",backgroundColor:"#F2F4FA"},dark:{color:"#F3F3F5",backgroundColor:"#212C4C"}},Re=({data:e})=>{const t=(0,a.useTheme)();return(0,l.jsx)(we.Z,{echarts:Ce,option:Ne(e,Be[t]),notMerge:!0,lazyUpdate:!0})},Me=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1),[o,c]=(0,r.useState)([]),d=(0,n.useSelector)((t=>t.pools[e])),u=(0,a.useGetMintDecimals)(),p=(0,r.useCallback)((async()=>{try{if(s(!0),!d)return;const e=await Promise.all(d.mints.map((async e=>{const{normalizedWeight:t,reserve:s}=oe(d,e.toBase58()),n=await a.tokenProvider.findByAddress(e.toBase58());if(n)return{symbol:n.symbol,tokenAmount:re.undecimalize(s,n.decimals),weight:100*t};const r=await u({mintAddress:e.toBase58()})||0;return{symbol:e.toBase58().substring(0,4),tokenAmount:re.undecimalize(s,r)||"0",weight:100*t}})));c(e)}catch(e){E(e)}finally{s(!1)}}),[u,d]);return(0,r.useEffect)((()=>{p()}),[p]),(0,l.jsx)(i.Card,{className:"chart-card",children:(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:"Pool Weights"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Spin,{tip:"Loading...",spinning:t,children:(0,l.jsx)(Re,{data:o})})})]})})};var ze=s(57221),Ie=s(72870);be.D([ve.N,Ie.N,Te.N,ze.N,ke.N,Se.N]);const Pe=e=>({xAxis:{type:"category",data:e.map((e=>e.label)),axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{formatter:e=>a.util.numeric(e).format("0,0.[00]a")}},tooltip:{trigger:"item",borderWidth:"1",valueFormatter:e=>"$"+e.toFixed(2)},series:[{data:e.map((e=>e.data)),type:"bar",itemStyle:{color:"#87E0C0"}}],grid:{show:!1,top:10,left:40,right:10,bottom:50}}),De=({data:e})=>(0,l.jsx)(i.Row,{justify:"center",className:"barchart-container",children:(0,l.jsx)(we.Z,{echarts:Ce,option:Pe(e)})});var Le=s(4550),Ze=s.n(Le);const Fe=1e3;let Ee=function(e){return e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss",e}({});class Oe{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new Oe,s=e*Fe;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new Oe,s=Ze()(e,Ee.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=Oe.fromYmd(e);const a=Oe.fromYmd(t);for(;n.ymd()<=a.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return Ze()(t).format(e)}subtractDay(e=1){const t=Ze()(this.milliSeconds).subtract(e,"days").valueOf();return Oe.fromSeconds(t/Fe)}addDay(e=1){const t=Ze()(this.milliSeconds).add(e,"days").valueOf();return Oe.fromSeconds(t/Fe)}seconds(){return(this.milliSeconds-this.milliSeconds%Fe)/Fe}ymd(){return Number(this.format(Ee.YMD))}static today(e=Ee.YMD){return Ze()().format(e)}}class We{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class Ve{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Ye{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const qe=700;class Ge{constructor(){this.conn=a.connection}async fetchSignatures(e,t,s=700){s>qe&&(s=qe);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let a=0;a<=e.length/200;a++){const t=200*a,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const a of n)t=t.concat(a);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:a,lastSignature:r,limit:o}=t;n=Math.floor(n||0),a=Math.floor(a||s);const i=new h.rV.PublicKey(e);let l=[],c=!1;for(;!c;){const e=await this.fetchSignatures(i,r,o);if(null===e||void 0===e||!e.length||c)break;for(const t of e){const e=t.blockTime;if(e&&!(e>a)){if(e<n){c=!0;break}r=t.signature,l.push(t.signature)}}if(o&&l.length>=o)break;if((null===e||void 0===e?void 0:e.length)<qe)break}return await this.fetchConfirmTransaction(l)}}let Ke=function(e){return e.Transfer="transfer",e}({});class Ue{constructor(){this.parseAction=e=>""}async collect(e,t,s){let{lastSignature:n,limit:a}=t;const r=new Ge;let o=[],i=n,l=!1,c=200;for(;!l;){const n=await r.fetchTransactions(e,{...t,lastSignature:i,limit:c});for(const e of n){i=e.transaction.signatures[0];const t=this.parseTransLog(e);if(t){if(s){if(!await s(t))continue}if(o.push(t),a&&o.length>=a){l=!0;break}}}if(a&&(c=c*a/(o.length||1)),!n.length)break;if(l)break}return o}parseTransLog(e){var t,s;const{blockTime:n,meta:a,transaction:r}=e;if(!n||!a)return;const{postTokenBalances:o,preTokenBalances:i,postBalances:l,preBalances:c}=a,{signatures:d,message:u}=r,p=(null===(t=a.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],h=u.instructions[0]||[],m=new We;m.signature=d[0],m.blockTime=n,m.time=Oe.fromSeconds(n).ymd(),m.programId=h.programId.toString();const x=this.parseAccountInfo(u.accountKeys,o||[],i||[],l,c);return this.isParsedInstruction(h)?(m.programTransfer=this.parseListActionTransfer([h],x),m):(m.actionTransfers=this.parseListActionTransfer(p,x),m.programInfo={programId:h.programId.toString(),data:h.data},m.actionType=this.parseAction(m),m)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Ke.Transfer){const n=e.info,a=this.parseActionTransfer(n,t);a&&s.push(a)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:a,lamports:r}=e,o=a||r.toString();if(!o||!t.has(s)||!t.has(n))return;const i=new Ye;return i.source=t.get(s),i.destination=t.get(n),i.amount=o,i}parseAccountInfo(e,t,s,n,a){const r=new Map;for(const o of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=o,a=new Ve;a.address=e[t].pubkey.toString(),a.postBalance=n.amount,a.mint=s,a.decimals=n.decimals,r.set(a.address,a)}for(const o of s){const{accountIndex:t,uiTokenAmount:s}=o,n=e[t].pubkey.toString(),a=r.get(n)||new Ve;a.preBalance=s.amount,r.set(a.address,a)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!T.account.isAssociatedAddress(s)){const e=r.get(s)||new Ve;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(a[t]||0),e.decimals=9,r.set(e.address,e)}})),r}}let He=function(e){return e.Swap="SWAP",e}({});class Je extends Ue{constructor(...e){super(...e),this.parseAction=e=>{try{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data,n=window.balansol.program.coder.instruction.decode(s,"base58");if("route"===(null===n||void 0===n?void 0:n.name))return He.Swap}catch(s){}return""}}}class $e{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class Qe{parserDailyReport(e){let t=new Array;for(const s of e)t=t.concat(this.parseDailyReport(s));return this.mergeDailyReport(t)}parseDailyReport(e){const t=new Array,{programId:s,time:n,actionType:a,actionTransfers:r}=e;for(const o of r){const{source:e,destination:r,amount:i}=o,l=new $e;if(l.programId=s,l.time=n,l.actionType=a,e){const{mint:s,address:n}=e;t.push({...l,mint:s,address:n,amountOut:BigInt(i)})}if(r){const{mint:e,address:s}=r;t.push({...l,mint:e,address:s,amountIn:BigInt(i)})}}return t}mergeDailyReport(e){const t=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(t.has(e)){const s=t.get(e);void 0!==s&&(n.amountIn+=s.amountIn,n.amountOut+=s.amountOut,n.totalTrans+=s.totalTrans)}t.set(e,n)}const s=new Array;return t.forEach((e=>s.push(e))),s}}class Xe{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Je,this.dailyReportService=new Qe,this.tokenProvider=new a.TokenProvider,this.getPoolData=async()=>{if(!this.poolData){const e=window.balansol;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,t)=>{const s=await this.tokenProvider.findByAddress(e);if(!s)return 0;const{decimals:n,extensions:r}=s;try{const e=await a.util.fetchCGK(null===r||void 0===r?void 0:r.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const s=re.undecimalize(new h.BN(t.toString()),n);return Number(s)*e.price}catch(o){return 0}},this.fetchTransLog=async(e,t)=>{const s=new a.PDB(this.poolAddress).createInstance("stat");let n=await s.getItem("translogs")||[];n=n.sort(((e,t)=>t.blockTime-e.blockTime));const r=n[0],o=n[n.length-1];if(r&&o){const[s]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:r.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:t});return await s.setItem("translogs",n),n},this.getDailyInfo=async()=>{let e=new Oe;const t=(new Oe).subtractDay(8),{fee:s,taxFee:n,treasuries:a}=await this.getPoolData(),r=await this.fetchTransLog(t.seconds(),e.seconds()),o=this.dailyReportService.parserDailyReport(r),i={};for(const c of o){const{time:e,address:t}=c;a.map((e=>e.toBase58().includes(t)))&&(i[e]||(i[e]=[]),i[e].push(c))}const l={};for(l[e.ymd()]={tvl:0,fee:0,volume:0};e.ymd()>t.ymd();){const a=i[e.ymd()]||[],r=l[e.ymd()],o=e.subtractDay(1);!l[o.ymd()]&&o.ymd()>=t.ymd()&&(l[o.ymd()]={tvl:r.tvl,fee:0,volume:0});for(const t of a){const a=await this.getUsd(t.mint,t.amountOut),r=await this.getUsd(t.mint,t.amountIn);if(l[o.ymd()]&&(l[o.ymd()].tvl+=a-r,l[o.ymd()].tvl<0&&(l[o.ymd()].tvl=0)),t.actionType===He.Swap){l[e.ymd()].volume+=r+a;const t=Number(re.undecimalize(s.add(n),9))*a;l[e.ymd()].fee+=t}}e=e.subtractDay(1)}return l},this.poolAddress=e}}const _e=()=>{const e=(0,a.useGetMintDecimals)(),t=(0,r.useCallback)((async(t,s)=>{const n=await e({mintAddress:new h.rV.PublicKey(s).toString()})||0;return new h.BN(ae.default.decimalize(t,n).toString())}),[e]),s=(0,r.useCallback)((async(t,s)=>{const n=await e({mintAddress:new h.rV.PublicKey(s).toString()})||0;return ae.default.undecimalize(BigInt(t.toString()),n)}),[e]);return{decimalize:(0,r.useCallback)(((e,t)=>new h.BN(ae.default.decimalize(e,t).toString())),[]),undecimalize:(0,r.useCallback)(((e,t)=>ae.default.undecimalize(BigInt(e.toString()),t)),[]),decimalizeMintAmount:t,undecimalizeMintAmount:s}};var et=s(50794),tt=s(4065);const st=()=>{const e=(0,a.useGetMintDecimals)();return(0,r.useCallback)((async t=>{const s=await(async e=>{try{return await tt.DataLoader.load("getCgkPrice"+e,(async()=>{var t;const s=await a.tokenProvider.findByAddress(e),n=null===s||void 0===s||null===(t=s.extensions)||void 0===t?void 0:t.coingeckoId;return(await a.util.fetchCGK(n)).price}))}catch(t){return 0}})(t.toString());if(Number(s))return s;const n=await e({mintAddress:t.toString()});return(async(e,t)=>{try{const s=`https://quote-api.jup.ag/v4/quote?inputMint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&outputMint=${e}&amount=1000000&slippage=1`,{data:n}=await tt.DataLoader.load("getJupiterPrice"+e,(async()=>(await fetch(s)).json())),a=new et.BN(n[0].outAmount),r=await tt.utilsBN.undecimalize(a,t);return 1/Number(r)}catch(s){return 0}})(t.toString(),n)}),[e])},nt=(e="")=>{const t=(0,n.useSelector)((t=>t.pools[e])),[s,a]=(0,r.useState)(0),o=st(),{undecimalizeMintAmount:i}=_e(),l=(0,r.useCallback)((async e=>{if(!e)return 0;let t=0;for(let s in e.reserves){const n=await o(e.mints[s]);if(!n)continue;const a=await i(e.reserves[s],e.mints[s]);t+=n*Number(a)}return t}),[o,i]),c=(0,r.useCallback)((async()=>{const e=await l(t);return a(e)}),[l,t]);return(0,r.useEffect)((()=>{c()}),[c]),{TVL:s,getTVL:l}},at=e=>{const[t,s]=(0,r.useState)(0),[n,o]=(0,r.useState)({}),[i,l]=(0,r.useState)(!1),{TVL:c}=nt(e),d=(0,r.useCallback)((async()=>{try{if(l(!0),!e||!c)return l(!1),s(0),o({});const t=new Xe(e),n=await a.DataLoader.load("getDailyInfo"+e,(()=>t.getDailyInfo()),{cache:{ttl:3e5}});let r=0,i=0;for(const e in n)r+=n[e].fee,n[e].fee&&n[e].volume&&n[e].tvl&&i++;const d=r/i/c,u=Math.pow(1+d,365)-1;s(Number.isFinite(u)?u:0),o(n)}catch(t){}finally{l(!1)}}),[e,c]);return(0,r.useEffect)((()=>{d()}),[d]),{apy:t,dailyInfo:n,loading:i}},rt=e=>{const[t,s]=(0,r.useState)([]),{dailyInfo:n,loading:a}=at(e),o=(0,r.useCallback)((async()=>{if(!e)return s([]);const t=Object.keys(n).map((e=>({data:n[e].volume,label:Ze()(e,"YYYYMMDD").format("MM/DD")})));return s(t)}),[n,e]);(0,r.useEffect)((()=>{o()}),[o]);const i=(0,r.useMemo)((()=>{var e,s;const n=(null===(e=t[t.length-1])||void 0===e?void 0:e.data)||0,a=(null===(s=t[t.length-2])||void 0===s?void 0:s.data)||0;return n+(new Date).getHours()*a/24}),[t]);return{chartData:t,loading:a,vol24h:i}},ot=({poolAddress:e})=>{const{vol24h:t,loading:s,chartData:n}=rt(e);return(0,l.jsx)(i.Card,{className:"chart-card",children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{justify:"center",align:"middle",className:"chart-title",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Title,{level:4,children:"Volume 24h"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Title,{level:2,children:["$",a.util.numeric(t).format("0,0.[0]a")]})})]})}),(0,l.jsx)(i.Col,{span:24,flex:"auto",children:(0,l.jsx)(i.Spin,{tip:"Loading...",spinning:s,children:(0,l.jsx)(De,{data:n})})})]})})},it=(e,t,s)=>T.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(tt.utilsBN.undecimalize(t,s))}:{amount:new h.BN(0),decimals:0,balance:0},lt=e=>{const t=(0,a.useWalletAddress)(),s=(0,a.useWalletBalance)(),n=(0,a.useAccountSelector)((t=>t[e])),{amount:r,mint:o}=n||{},i=(0,a.useMintDecimals)({mintAddress:o})||0;return T.account.isAddress(t)&&T.account.isAddress(e)?e===t?it(T.DEFAULT_EMPTY_ADDRESS,new h.BN(s),9):it(o,new h.BN((null===r||void 0===r?void 0:r.toString())||0),i):it()},ct=e=>{const[t,s]=(0,r.useState)(""),n=(0,a.useWalletAddress)(),o=lt(t);return(0,r.useEffect)((()=>{(async()=>{if(!T.account.isAddress(n)||!T.account.isAddress(e))return s("");try{const t=await a.splt.deriveAssociatedAddress(n,e);return s(t)}catch(t){return s("")}})()})),o},dt=({title:e,content:t,bg:s})=>(0,l.jsx)(i.Card,{className:"card-detail-header",style:{background:`url(${s})`},children:(0,l.jsxs)(i.Row,{gutter:[0,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Space,{align:"end",children:t})})]})});const ut=s.p+"static/media/tvl.85fd6f5a6c3970dff1166cd0b28e15f8.svg";const pt=s.p+"static/media/apy.e92b9714a458a3d8c34272011f0e8b3e.svg";const ht=s.p+"static/media/my-contribution.4131308b4ed787a3c77c8b39b9cefaea.svg",mt=({poolAddress:e})=>{const{pools:{[e]:t}}=(0,n.useSelector)((e=>e)),{TVL:s}=nt(e),{balance:o}=ct(t.mintLpt.toBase58()),{apy:c,loading:d}=at(e);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{lg:8,md:8,xs:24,children:(0,l.jsx)(dt,{title:"TVL",content:(0,l.jsxs)(i.Typography.Title,{level:3,children:["$ ",a.util.numeric(s).format("0,0.[00]a")]}),bg:ut})}),(0,l.jsx)(i.Col,{lg:8,md:8,xs:24,children:(0,l.jsx)(dt,{title:"APY",content:d?(0,l.jsx)(i.Skeleton,{style:{width:150},active:!0,paragraph:{rows:1},title:!1}):(0,l.jsx)(i.Typography.Title,{level:3,children:a.util.numeric(c).format("0,0.[00]a%")}),bg:pt})}),(0,l.jsx)(i.Col,{lg:8,md:8,xs:24,children:(0,l.jsx)(dt,{title:"My Contribution",content:(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Typography.Title,{level:3,children:a.util.numeric(o).format("0,0.[00]")}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:" LP"})]}),bg:ht})})]})};var xt=s(51518),jt=s.n(xt);const gt=({poolAddress:e,size:t=24,icon:s=(0,l.jsx)(p.Z,{name:"diamond-outline"}),max:a})=>{const r=(0,n.useSelector)((t=>t.pools[e]));return(0,l.jsx)(i.Avatar.Group,{style:{whiteSpace:"nowrap"},maxCount:a,size:t,children:r&&r.mints.map((e=>(0,l.jsx)(_.Z,{mintAddress:e.toBase58(),size:t,icon:s},e.toBase58())))})};var yt=s(58421);const ft=({onChange:e,disabled:t=!1,mints:s})=>{const[n,o]=(0,r.useState)(""),c=(0,r.useCallback)((async()=>{if(!n||n.length<3)return e(s);const t=(await a.tokenProvider.find(n)).filter((({address:e})=>s.includes(e))).map((({address:e})=>e));return s.forEach((e=>{if(!t.includes(e)&&e.toLowerCase().includes(n.toLowerCase()))return t.push(e)})),e(t)}),[n,e,s]);return(0,r.useEffect)((()=>{c()}),[c]),(0,l.jsx)(i.Card,{className:"mint-search",bodyStyle:{padding:0},style:{padding:8},bordered:!1,children:(0,l.jsx)(i.Input,{placeholder:"Search",value:n,size:"small",bordered:!1,suffix:(0,l.jsx)(i.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:n?()=>o(""):()=>{},icon:(0,l.jsx)(p.Z,{name:n?"close-outline":"search-outline"}),disabled:t}),onChange:e=>o(e.target.value),disabled:t})})};var wt=s(63396);const bt=({mintAddress:e,onClick:t,active:s=!1})=>(0,l.jsx)(i.Card,{bodyStyle:{padding:0},className:"card-child-balansol mint-select-item",bordered:s,onClick:t,hoverable:!0,children:(0,l.jsxs)(i.Space,{size:12,style:{display:"flex"},children:[(0,l.jsx)(_.Z,{mintAddress:e,size:32}),(0,l.jsx)(i.Typography.Text,{style:{margin:0},children:(0,l.jsx)(ee.Z,{mintAddress:e})}),(0,l.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:(0,l.jsx)(wt.Z,{mintAddress:e})})]})}),Ct=({selectedMint:e,onChange:t,visible:s,mints:n,onClose:a})=>{const[o,c]=(0,r.useState)(n);return(0,l.jsx)(i.Modal,{open:s,closeIcon:(0,l.jsx)(p.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,onCancel:a,children:(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:"Select token"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ft,{mints:n,onChange:c})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[16,16],style:{height:300},className:"scrollbar",children:(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[16,16],children:o.slice(0,100).map(((s,n)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(yt.ZP,{height:48,overflow:!0,children:(0,l.jsx)(bt,{mintAddress:s,onClick:()=>t(s),active:e===s})})},n)))})})})})]})})},At=({selectedMint:e,mints:t=[],onChange:s=(()=>{}),mintLabel:n,mintAvatar:a})=>{const[o,c]=(0,r.useState)(!1);return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)(i.Space,{className:"mint-select",onClick:()=>c(t.length>0),children:[a||(0,l.jsx)(_.Z,{mintAddress:e}),n||(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(ee.Z,{mintAddress:e})}),t.length?(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(p.Z,{name:"chevron-down-outline"})}):null]})]}),o&&(0,l.jsx)(Ct,{selectedMint:e,visible:o,onChange:e=>(s&&s(e),c(!1)),mints:t,onClose:()=>c(!1)})]})},vt=e=>{const t=(0,a.useWalletBalance)(),s=ct(e),n=ct(k.Gd.toBase58()),o=(0,r.useMemo)((()=>{const e=n.amount.add(new h.BN(t));return{balance:Number(tt.utilsBN.undecimalize(e,9)),amount:e}}),[t,n.amount]);return e===k.Gd.toBase58()?o:s},Tt=[50,100],St=({amount:e,selectedMint:t,portionValue:s,onChangeAmount:n})=>{const o=(0,a.useTheme)(),{balance:c,amount:d}=vt(t),{undecimalizeMintAmount:u}=_e();let p=(0,r.useMemo)((()=>{let t=0;for(const s in Tt){if(!c)break;const n=Tt[s],a=c*n/100;Number(e).toFixed(4)===a.toFixed(4)&&(t=n)}return t}),[e,c]);const m="dark"===o?"#394360":"#ced0d7";return(0,l.jsxs)(i.Space,{size:4,direction:"vertical",children:[(0,l.jsx)(i.Radio.Button,{className:"proportion-btn",disabled:!n,onClick:async()=>{if(!n)return;const e=new h.BN(d.toString()).mul(new h.BN(s)).divRound(new h.BN(100)),a=await u(e,t);n(a)},style:{background:s<=p?"#63e0b3":m}}),(0,l.jsx)(i.Typography.Text,{type:"secondary",className:"caption",children:`${s}%`})]},s)},kt=[50,100];function Nt({amount:e,onChangeAmount:t,selectedMint:s,mints:n=[],onSelect:o=(()=>{}),mintLabel:c,mintAvatar:d,ratioButton:u,unit:p,force:h,mintSelection:m,footer:j,placeholder:g="0"}){const{balance:y}=vt(s),f=(0,r.useCallback)((e=>{if(!t)return;const s=Number(e)>y&&!!t;return t(e,s)}),[y,t]);return(0,l.jsxs)(i.Row,{gutter:[0,10],align:"middle",className:"card-swap-item",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[10,0],wrap:!1,align:"middle",children:[(0,l.jsx)(i.Col,{children:m||(0,l.jsx)(At,{selectedMint:s,onChange:o,mints:n,mintLabel:c,mintAvatar:d})}),(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(x,{bordered:!1,controls:!1,placeholder:String(Number(g)),value:e,max:h?y:void 0,onValue:f,disabled:!t||h&&!y})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",style:{width:"100%"},wrap:!1,children:[(0,l.jsx)(i.Col,{flex:"auto",style:{justifyContent:"left"},children:(0,l.jsxs)(i.Space,{className:"caption",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Available:"}),(0,l.jsx)(i.Typography.Text,{style:{cursor:"pointer"},children:a.util.numeric(y).format("0,0.[00]")}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:p||(0,l.jsx)(ee.Z,{mintAddress:s})})]})}),(0,l.jsx)(i.Col,{className:"proportion-wrap",style:{display:null===u?"none":""},children:u||(0,l.jsx)(i.Space,{children:kt.map(((n,a)=>(0,l.jsx)(St,{amount:e,selectedMint:s,portionValue:n,onChangeAmount:t},a)))})})]})}),j]})}const Bt=e=>{const[t,s]=(0,r.useState)(new h.BN(0)),n=(0,a.useGetMintData)(),o=(0,r.useCallback)((async()=>{if(!e)return s(new h.BN(0));let t=new h.rV.PublicKey(e).toString();try{const e=await n({mintAddress:t}).then((e=>e?e[t].supply.toString():"0"));return s(new h.BN(e))}catch(a){}}),[n,e]);return(0,r.useEffect)((()=>{o()}),[o]),{supply:t}},Rt=()=>{const e=(0,a.useWalletAddress)(),t=(0,a.useWalletBalance)(),s=(0,a.useGetMintDecimals)(),n=(0,a.useAccounts)(),o=(e,t,s)=>a.util.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(tt.utilsBN.undecimalize(t,s))}:{amount:new h.BN(0),decimals:0,balance:0};return{getMintBalance:(0,r.useCallback)((async(r,i=!1)=>{if(!a.util.isAddress(e)||!a.util.isAddress(r))return o();try{const a=h.P6.token.associatedAddress({mint:new h.rV.PublicKey(r),owner:new h.rV.PublicKey(e)}).toBase58(),l=r===T.DEFAULT_WSOL;if(a===e||l){const{amount:e=BigInt(0)}=n[a]||{},s=l?T.DEFAULT_WSOL:T.DEFAULT_EMPTY_ADDRESS,r=l?new h.BN((null===e||void 0===e?void 0:e.toString())||0):new h.BN((null===t||void 0===t?void 0:t.toString())||0);return o(s,i?new h.BN((null===t||void 0===t?void 0:t.toString())||0+(null===e||void 0===e?void 0:e.toString())||0):r,9)}const{amount:c,mint:d}=n[a]||{},u=await s({mintAddress:d});return o(d,new h.BN((null===c||void 0===c?void 0:c.toString())||0),u)}catch(l){return o()}}),[n,s,t,e])}};var Mt=s(82714);const zt=()=>{const{getMintBalance:e}=Rt(),t=(0,a.useWalletAddress)(),s=(0,a.useAccounts)(),n=(0,r.useCallback)((async(n,a)=>{const r=new h.rV.Transaction,{balance:o}=await e(n);if(n!==k.Gd.toBase58()||o>=Number(a))return;const i=T.utils.decimalize(a,9)-T.utils.decimalize(o,9),l=await(0,S.Am)(k.Gd,new h.rV.PublicKey(t));if(!s[l.toBase58()]){const e=await(async e=>{const t=await(0,S.Am)(k.Gd,e);return(0,N.E)(e,t,e,k.Gd)})(new h.rV.PublicKey(t));r.add(e)}const c=await(async(e,t)=>{const s=await(0,S.Am)(k.Gd,t);return h.rV.SystemProgram.transfer({fromPubkey:t,toPubkey:s,lamports:e})})(i,new h.rV.PublicKey(t));return r.add(c,(0,Mt.D2)(l)),r}),[s,e,t]),o=(0,r.useCallback)((async e=>{if(e!==k.Gd.toBase58())return;const s=await(async e=>{const t=await(0,S.Am)(k.Gd,e);return(0,B.Zu)(t,e,e)})(new h.rV.PublicKey(t));return(new h.rV.Transaction).add(s)}),[t]);return{createWrapSolTxIfNeed:n,createUnWrapSolTxIfNeed:o}},It=({poolAddress:e,hideModal:t})=>{const s=(0,n.useSelector)((t=>t.pools[e])),[o,c]=(0,r.useState)(new Array(s.mints.length).fill("0")),[d,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!0),[j,g]=(0,r.useState)(!1),[y,w]=(0,r.useState)(0),[b,C]=(0,r.useState)(0),[A,v]=(0,r.useState)(0),{supply:T}=Bt(s.mintLpt),{decimalizeMintAmount:S,undecimalizeMintAmount:k}=_e(),N=(0,a.useGetMintDecimals)(),{getMintBalance:B}=Rt(),{createWrapSolTxIfNeed:R}=zt(),M=(0,r.useMemo)((()=>{const e=a.util.numeric(b).format("0,0.[0000]");return b>0&&b<1e-4?"LP < 0.0001":e}),[b]),z=(0,r.useCallback)((async()=>{v(0);const{reserves:e,weights:t,fee:n,taxFee:a,mints:r}=s;let i=[],l=[];for(let s in o){const e=await N({mintAddress:r[s].toBase58()})||0,t=await S(o[s],r[s]);i.push(t),l.push(e)}const{lpOut:c,impactPrice:d}=me(i,e,t,T,l,n.add(a));C(c),v(d)}),[o,S,N,s,T]);(0,r.useEffect)((()=>{z()}),[z]);const I=(0,r.useCallback)((async()=>{const{mints:e}=s;for(let t in o){const{balance:s}=await B(e[t].toBase58(),!0);if(Number(o[t])>s)return x(!0)}return b?A>f.acceptableSwap&&!j?x(!0):x(!1):x(!0)}),[o,B,A,j,b,s]);(0,r.useEffect)((()=>{I()}),[I]);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:"Deposit"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[24,8],children:s.mints.map(((e,t)=>{let n=e.toBase58();const p=de(s.weights,s.weights[t]);return(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Nt,{selectedMint:n,amount:o[t],onChangeAmount:e=>(async(e,t)=>{const{reserves:n,mints:a}=s;let r=[...o];r[e]=t,c(r),w(e),c(r);const i=await Promise.all(a.map((async(s,r)=>{if(e===r)return"";const o=await N({mintAddress:a[r].toBase58()})||0,i=await k(n[y],a[y]),l=await k(n[r],a[r]),c=(Number(i)+Number(t))/Number(i);return(Number(l)*(c-1)).toFixed(o)})));u(i)})(t,e),mintLabel:(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(ee.Z,{mintAddress:n||""})}),(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(p).format("0,0.[0000]%")})]}),ratioButton:(h=t,y!==h&&Number(o[y])>0&&Number(d[h])>0&&Number(d[h])!==Number(o[h])&&(0,l.jsx)(i.Tooltip,{title:d[t],children:(0,l.jsx)(i.Button,{type:"text",style:{marginRight:-15},onClick:()=>(async e=>{const t=[...o];t[e]=d[e],c(t)})(t),children:"Apply suggestion"})}))})},e.toBase58());var h}))})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[0,13],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Price impact"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)("span",{style:{color:O(A)},children:a.util.numeric(A).format("0,0.[0000]%")})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"You will receive"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Title,{level:4,children:[M," LP"]})})]})})]})}),A>f.acceptableSwap&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Checkbox,{onChange:e=>g(e.target.checked),checked:j,children:"I agree to execute this trade with the high price impact."})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{size:"large",type:"primary",block:!0,onClick:async()=>{h(!0);try{const n=(0,a.getAnchorProvider)(),r=await Promise.all(s.mints.map((async(e,t)=>await S(o[t],e)))),i=[];for(const e in s.mints){const t=await R(s.mints[e].toBase58(),o[e]);t&&i.push(t)}const{tx:l}=await window.balansol.addLiquidity(e,r,!1);i.push(l);const c=await n.sendAll(i.map((e=>({tx:e,signers:[]}))));F("Deposit",c[c.length-1]),t()}catch(n){E(n)}finally{h(!1)}},loading:p,disabled:m,children:"Deposit"})})]})},Pt=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1);return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Button,{type:"primary",onClick:()=>s(!0),block:!0,children:"Deposit"}),(0,l.jsx)(i.Modal,{open:t,onCancel:()=>s(!1),footer:null,destroyOnClose:!0,centered:!0,closeIcon:(0,l.jsx)(p.Z,{name:"close-outline"}),children:(0,l.jsx)(It,{poolAddress:e,hideModal:()=>s(!1)})})]})};var Dt=s(60914);const Lt=({mintAddress:e,amount:t})=>(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(_.Z,{mintAddress:e}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:(0,l.jsx)(ee.Z,{mintAddress:e})})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(Dt.Z,{mintAddress:e,amount:t})})})]}),Zt=({poolAddress:e,lptAmount:t,onSuccess:s=(()=>{})})=>{const[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),p=(0,n.useSelector)((t=>t.pools[e])),m=(0,a.useGetMintData)(),{decimalize:x}=_e(),{createUnWrapSolTxIfNeed:j}=zt();const g=(0,r.useCallback)((async()=>{var e;let s=p.mintLpt.toBase58(),n=await m({mintAddress:s});if(!n){const e=new Array(p.reserves.length).fill(new h.BN(0));return c(e)}let a=null===(e=n[s])||void 0===e?void 0:e.supply,r=await x(t,9),o=((e,t,s)=>{let n=e.toNumber()/t.toNumber();return s.map((e=>new h.BN(n*Number(e))))})(new h.BN(String(r)),new h.BN(String(a)),p.reserves);return c(o)}),[x,m,t,p.mintLpt,p.reserves]);return(0,r.useEffect)((()=>{g()}),[g]),(0,l.jsxs)(i.Row,{gutter:[0,24],className:"withdraw",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[0,14],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:"12px"},children:"You will receive"})}),p.mints.map(((e,t)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Lt,{mintAddress:e.toBase58(),amount:o[t]},t)},e.toBase58())))]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",block:!0,onClick:async()=>{try{u(!0);let n=x(t,9);const r=(0,a.getAnchorProvider)(),o=await async function(){const e=(0,a.getAnchorProvider)(),t=await(0,tt.initTxCreateMultiTokenAccount)(e,{mints:p.mints});return t}(),{transaction:i}=await window.balansol.createRemoveLiquidityTransaction(e,n);o.push(i);for(const e of p.mints){const t=await j(e.toBase58());t&&o.push(t)}const l=await r.sendAll(o.map((e=>({tx:e,signers:[]}))));F("Withdraw",l[l.length-1]),s()}catch(n){E(n)}finally{u(!1)}},size:"large",loading:d,disabled:!Number(t),children:"Withdraw"})})]})},Ft=({poolAddress:e,lptAmount:t,mintAddress:s,onSuccess:o=(()=>{}),withdrawableMax:c})=>{const[d,u]=(0,r.useState)(new h.BN(0)),[p,m]=(0,r.useState)(0),[x,j]=(0,r.useState)(!1),g=(0,a.useGetMintDecimals)(),y=(0,n.useSelector)((t=>t.pools[e])),{decimalize:f}=_e(),{supply:w}=Bt(y.mintLpt),{createUnWrapSolTxIfNeed:b}=zt(),C=Number(t)>c,A=(0,r.useCallback)((async()=>{let e=f(t,9);m(0);let n=[];for(let t in y.reserves){const e=await g({mintAddress:y.mints[t].toBase58()})||0;n.push(e)}const a=y.mints.map((e=>e.toBase58())).indexOf(s),{tokenAmountOut:r,impactPrice:o}=xe(e,a,y.reserves,y.weights,w,n,y.fee.add(y.taxFee));u(r||new h.BN(0)),m(o)}),[f,g,t,s,y,w]);return(0,r.useEffect)((()=>{A()}),[A]),(0,l.jsxs)(i.Row,{gutter:[12,12],className:"withdraw",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:"14px"},children:"Price impact"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)("span",{style:{color:O(p)},children:a.util.numeric(p).format("0,0.[0000]%")})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[14,14],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:"14px"},children:"You will receive"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Lt,{mintAddress:s,amount:d})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[0,8],children:(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",size:"large",block:!0,onClick:async()=>{if(Number(t)>c)return E({message:"Please input amount less than 30% Liquidity Provider!"});try{j(!0);const n=[],r=(0,a.getAnchorProvider)();let i=f(t,9);const{tx:l}=await window.balansol.removeSidedLiquidity(e,s,i,!1);n.push(l);const c=await b(s);c&&n.push(c);const d=await r.sendAll(n.map((e=>({tx:e,signers:[]}))));F("Withdraw",d[d.length-1]),o()}catch(n){E(n)}finally{j(!1)}},disabled:d.isZero()||C,loading:x,children:"Withdraw"})})})})]})},Et=({poolAddress:e,hideModal:t})=>{const s=(0,n.useSelector)((t=>t.pools[e])),o=(0,r.useMemo)((()=>s?s.mints.map((e=>e.toBase58())):[]),[s]),[c,d]=(0,r.useState)(o),[u,p]=(0,r.useState)(""),[h,m]=(0,r.useState)(!0),{balance:x}=ct(s.mintLpt.toBase58()),{supply:j}=Bt(s.mintLpt),g=(0,r.useMemo)((()=>Number(T.utils.undecimalize(BigInt(j.toString()),9))),[j]),y=(0,r.useMemo)((()=>Number((30*g/100).toFixed(9))),[g]),f=(0,r.useMemo)((()=>!h||y>x?x:y),[h,x,y]),w=c.length===(null===s||void 0===s?void 0:s.mints.length);return(0,l.jsxs)(i.Row,{gutter:[24,24],className:"withdraw",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:"Withdraw"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:"12px"},children:"You want to receive"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Button,{className:"btn-token-name "+(w?"selected":""),onClick:()=>d(o),children:(0,l.jsx)("span",{className:"title",children:"All"})})}),o.map((e=>{let t=c.includes(e)?"selected":"";return(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Button,{className:`btn-token-name ${t}`,onClick:()=>d([e]),children:(0,l.jsx)("span",{className:"title",children:(0,l.jsx)(ee.Z,{mintAddress:e})})})},e)}))]})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Nt,{selectedMint:null===s||void 0===s?void 0:s.mintLpt.toBase58(),amount:u,onChangeAmount:e=>p(e),mintLabel:(0,l.jsx)(i.Typography.Text,{ellipsis:!0,children:"Balansol LP"}),mintAvatar:(0,l.jsx)(gt,{poolAddress:e,max:2}),unit:"LP",force:!0,ratioButton:!w&&(0,l.jsx)(i.Button,{onClick:()=>p(`${f}`),size:"small",children:"Max"}),footer:!w&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Tag,{style:{width:"100%",border:"none",padding:"5px 16px",whiteSpace:"unset"},color:"gold",children:(0,l.jsxs)(i.Space,{align:"center",size:6,children:[(0,l.jsx)(i.Checkbox,{className:"warning-checkbox",checked:h,onChange:()=>m(!h)}),(0,l.jsxs)(i.Typography.Text,{style:{color:"inherit"},children:["Prevent to withdraw more than 30% (Currently"," ",a.util.numeric(Number(u)/g).format("0,0.[00]%"),") of the total LP."]})]})})})})}),(0,l.jsx)(i.Col,{span:24,children:w?(0,l.jsx)(Zt,{poolAddress:e,lptAmount:u,onSuccess:t}):(0,l.jsx)(Ft,{poolAddress:e,mintAddress:c[0],lptAmount:u,onSuccess:t,withdrawableMax:f})})]})},Ot=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1);return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Button,{ghost:!0,onClick:()=>s(!0),block:!0,children:"Withdraw"}),(0,l.jsx)(i.Modal,{open:t,onCancel:()=>s(!1),footer:null,destroyOnClose:!0,centered:!0,closeIcon:(0,l.jsx)(p.Z,{name:"close-outline"}),children:(0,l.jsx)(Et,{poolAddress:e,hideModal:()=>s(!1)})})]})},Wt=({title:e,value:t})=>{const[s,n]=(0,r.useState)(!1);return(0,l.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:e}),(0,l.jsx)(i.Button,{type:"text",size:"small",icon:(0,l.jsx)(p.Z,{name:"open-outline"}),onClick:()=>window.open(a.util.explorer(t),"_blank")})]}),(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{style:{wordBreak:"break-all"},children:t}),(0,l.jsx)(i.Tooltip,{title:"Copied",open:s,arrowPointAtCenter:!0,children:(0,l.jsx)(jt(),{text:t,children:(0,l.jsx)(i.Button,{type:"text",size:"small",icon:(0,l.jsx)(p.Z,{name:"copy-outline"}),onClick:async()=>{n(!0),await a.util.asyncWait(1500),n(!1)}})})})]})]})},Vt=({poolAddress:e})=>{const t=(0,n.useSelector)((t=>t.pools[e])),s=(0,a.useInfix)()<a.Infix.md;return(0,l.jsxs)(i.Row,{gutter:[24,24],justify:"space-between",children:[(0,l.jsx)(i.Col,{md:18,xs:24,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(gt,{poolAddress:e,size:32}),(0,l.jsx)(i.Typography.Title,{level:4,children:"Balansol LP"}),(0,l.jsx)(i.Popover,{placement:"bottom",content:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(Wt,{title:"Pool Address",value:e}),(0,l.jsx)(Wt,{title:"LPT Address",value:t.mintLpt.toBase58()})]}),children:(0,l.jsx)(i.Button,{type:"text",style:{marginLeft:-4},icon:(0,l.jsx)(p.Z,{name:"information-circle-outline"})})})]})}),(0,l.jsx)(i.Col,{span:s?24:void 0,children:(0,l.jsxs)(i.Space,{style:{width:"100%"},children:[(0,l.jsx)(Ot,{poolAddress:e}),(0,l.jsx)(Pt,{poolAddress:e})]})})]})},{manifest:{appId:Yt}}=Z,qt=`/app/${Yt}`,Gt=()=>{const{search:e,pathname:t}=(0,o.useLocation)(),s=(0,o.useHistory)(),n=(0,r.useMemo)((()=>new URLSearchParams(e)),[e]),a=(0,r.useCallback)((e=>n.get(e)),[n]),i=(0,r.useCallback)((()=>{const e={};n.forEach(((t,s)=>{e[s]=t}));return e}),[n]),l=(0,r.useCallback)(((e,t={},n=!0)=>{const a=i();!1===n&&(t=Object.assign(a,t));const r=new URLSearchParams(t);r&&(e+=`?${r.toString()}`),s.push(`${qt}${e}`)}),[i,s]);return{getQuery:a,getAllQuery:i,pushHistory:l,appRoute:qt,pathname:t}},Kt=({label:e,redirect:t})=>{const{pushHistory:s}=Gt();return(0,l.jsxs)(i.Row,{justify:"center",children:[(0,l.jsx)(i.Col,{span:24,style:{textAlign:"center"},children:(0,l.jsx)(i.Empty,{description:`${e} not found`})}),(0,l.jsx)(i.Col,{span:24,style:{textAlign:"center"},children:(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:"arrow-back-outline"}),onClick:()=>s(t),children:"Go Back Home"})})]})},Ut=()=>{const{getQuery:e,pushHistory:t}=Gt(),s=e("pool")||"",r=(0,n.useSelector)((e=>e.pools[s])),o=(0,a.useWalletAddress)(),c=(0,a.useInfix)();if(!r||!s)return(0,l.jsx)(Kt,{label:"pool",redirect:"/pools"});const d=o===r.authority.toBase58(),u=c<a.Infix.md;return(0,l.jsx)(i.Row,{justify:"center",style:{paddingBottom:12},children:(0,l.jsx)(i.Col,{lg:20,md:24,style:{maxWidth:u?"":930},children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:"arrow-back-outline"}),onClick:()=>t("/pools"),style:{margin:-12},children:"Back"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Vt,{poolAddress:s})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(mt,{poolAddress:s})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[24,24],style:{display:"flex"},children:[(0,l.jsx)(i.Col,{lg:12,md:12,xs:24,children:(0,l.jsx)(ot,{poolAddress:s})}),(0,l.jsx)(i.Col,{lg:12,md:12,xs:24,children:(0,l.jsx)(Me,{poolAddress:s})}),d&&(0,l.jsx)(i.Col,{lg:12,md:12,xs:24,children:(0,l.jsx)(fe,{poolAddress:s})})]})})]})})})};var Ht=s(70457),Jt=s(19289);const $t="swap",Qt=(0,Jt.createAsyncThunk)(`${$t}/setSwapState`,(async e=>e)),Xt=(0,Jt.createSlice)({name:$t,initialState:{bidMint:"",bidAmount:"",askMint:"",askAmount:"",isReverse:!1,slippageTolerance:.5,loading:!1},reducers:{},extraReducers:e=>{e.addCase(Qt.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,_t=()=>{const{askMint:e,askAmount:t,loading:s,isReverse:o,bidAmount:c}=(0,n.useSelector)((e=>e.swap)),d=(0,a.useTheme)(),u=(0,n.useDispatch)(),{getAllQuery:p}=Gt(),{ask_mint:h}=p();(0,r.useEffect)((()=>{if(!e){const e=h||Z.sol.askMintDefault;u(Qt({askMint:e}))}}),[e,h,u]);return(0,l.jsx)(i.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,l.jsx)(i.Spin,{spinning:s&&!o&&!!Number(c),children:(0,l.jsx)(Nt,{amount:t,selectedMint:e,onChangeAmount:async e=>{u(Qt({askAmount:e,isReverse:!0,bidAmount:"",loading:!0})).unwrap()},ratioButton:null,mintSelection:(0,l.jsx)(Ht.Z,{value:e,onChange:t=>{u(Qt({askMint:t,loading:e!==t})).unwrap()},style:{background:"dark"===d?"#394360":"#F2F4FA"}})})})})},es=(0,r.createContext)({activePools:{}}),ts=({children:e})=>{const t=(()=>{const e=(0,n.useSelector)((e=>e.pools)),[t,s]=(0,r.useState)({}),{getTVL:a}=nt(),o=(0,r.useCallback)((async()=>{const t={};for(const s in e){const n=e[s];h.rV.PublicKey.isOnCurve(n.authority)&&(n.state.initialized&&(n.reserves.map((e=>e.toString())).includes("0")||await a(n)<100||(t[s]=n)))}s(t)}),[a,e]);return(0,r.useEffect)((()=>{o()}),[o]),t})(),s=(0,r.useMemo)((()=>({activePools:t})),[t]);return(0,l.jsx)(es.Provider,{value:s,children:e})},ss=()=>(0,r.useContext)(es),ns=()=>{const{bidAmount:e,bidMint:t,askMint:s}=(0,n.useSelector)((e=>e.swap)),o=(0,n.useDispatch)(),i=(0,a.useTheme)(),c=(()=>{const{activePools:e}=ss(),t=(0,r.useMemo)((()=>{let t=[];for(const{mints:s}of Object.values(e))for(const e of s)t.includes(e.toBase58())||t.push(e.toBase58());return t}),[e]);return t})(),{getAllQuery:d}=Gt(),{bid_mint:u}=d();(0,r.useEffect)((()=>{if(!t){const e=u||Z.sol.bidMintDefault;o(Qt({bidMint:e}))}}),[t,u,o]);const p=(0,r.useMemo)((()=>c.filter((e=>e!==s))),[s,c]);return(0,l.jsx)(Nt,{amount:e,selectedMint:t,onChangeAmount:e=>{o(Qt({bidAmount:e,isReverse:!1,askAmount:"",loading:!0}))},mints:p,mintSelection:(0,l.jsx)(Ht.Z,{value:t,onChange:e=>{o(Qt({bidMint:e,loading:t!==e}))},style:{background:"dark"===i?"#394360":"#F2F4FA"}})})};const as=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",rs=({title:e="Powered by",spacing:t=4,iconSize:s=20})=>(0,l.jsxs)(i.Space,{size:t,style:{cursor:"pointer"},children:[(0,l.jsx)(i.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:e}),(0,l.jsx)(i.Tooltip,{title:"Jupiter Aggregator",children:(0,l.jsx)(i.Avatar,{src:as,size:s})})]});var os=s(93253);const is=()=>{const{askMint:e,bidMint:t}=(0,n.useSelector)((e=>e.swap)),s=(()=>{const{activePools:e}=ss(),t=(0,r.useCallback)(((t,s,n,a)=>{let r=e[a],o=r.mints.map((e=>e.toBase58())),i=o.indexOf(s),l=o.indexOf(n),c=r.actions;return c[i].active&&c[l].active?(s===n||(t[s]||(t[s]={}),t[s][n]||(t[s][n]=[]),t[s][n].push(a)),t):t}),[e]);return(0,r.useMemo)((()=>{let s={};for(const n in e){const a=e[n].mints.map((e=>e.toBase58()));for(const e of a)for(const r of a)s=t(s,e,r,n)}return s}),[e,t])})(),[a,o]=(0,r.useState)([]),i=e=>{const t=e.map((e=>e.pool));for(const s in t)if(t[s]===t[Number(s)+1])return!1;for(const s of e)for(const t of e)if(s.bidMint===t.askMint&&s.askMint===t.bidMint)return!1;return!0},l=(0,r.useCallback)(((e,t,n=1)=>{if(n>3)return[];const a=s[e];if(!a)return[];const r=(a[t]||[]).map((s=>[{pool:s,bidMint:e,askMint:t}]));for(const s in a){const o=a[s];if(!o)continue;const c=l(s,t,n+1);for(const t of c)for(const n of o){const a=[{pool:n,bidMint:e,askMint:s},...t];i(a)&&r.push(a)}}return r}),[s]),c=(0,r.useCallback)((()=>{const s=l(t,e);o(s)}),[e,t,l]);return(0,os.Z)((async()=>c()),300,[c]),a},ls=()=>{const[e,t]=(0,r.useState)({route:[],bidAmount:0,askAmount:0,priceImpact:0}),[s,o]=(0,r.useState)(!1),{bidMint:i,askAmount:l,askMint:c,isReverse:d}=(0,n.useSelector)((e=>e.swap)),{activePools:u}=ss(),{undecimalizeMintAmount:p}=_e(),h=(e=>{const{askAmount:t,isReverse:s}=(0,n.useSelector)((e=>e.swap)),{activePools:o}=ss(),{decimalizeMintAmount:i}=_e(),[l,c]=(0,r.useState)([]),d=(0,a.useGetMintDecimals)(),u=(0,r.useCallback)((async()=>{const n=[];if(!s)return c([]);for(const s of e){const e=s[s.length-1].askMint;let a=[],r=!0,l=await i(t,e);for(const t of[...s].reverse()){const{bidMint:e,askMint:s,pool:n}=t,i=o[n],c=oe(i,e),u=oe(i,s),p=await d({mintAddress:e})||0,h=await d({mintAddress:s})||0;if(l.gt(u.reserve)){r=!1;break}const m=ce(l,u.reserve,c.reserve,u.normalizedWeight,c.normalizedWeight,i.fee.add(i.taxFee));if(m.lten(0)){r=!1;break}const x={balanceIn:c.reserve,balanceOut:u.reserve,weightIn:c.normalizedWeight,weightOut:u.normalizedWeight,decimalIn:p,decimalOut:h,swapFee:i.fee.add(i.taxFee)},j=pe(m,x);a=[{pool:t.pool,bidMint:e,askMint:s,bidAmount:m,askAmount:l,priceImpact:j}].concat(a),l=m}r&&n.push(a)}return c(n)}),[o,t,i,d,s,e]);return(0,os.Z)((async()=>u()),300,[u]),l})(is()),m=(0,r.useCallback)((async()=>{var e;const s=h.sort(((e,t)=>{let s=e[0].bidAmount,n=t[0].bidAmount;return s.gt(n)?1:-1}))[0];if(null===s||void 0===s||!s.length||!i||!c)return t({route:[],bidAmount:Number(0),askAmount:0,priceImpact:0});let n=await p(null===(e=s[0])||void 0===e?void 0:e.bidAmount,i);const a=s.map(((e,t)=>{const n=u[e.pool];return{...s[t],poolData:n}})),r=je(a);return t({route:s,bidAmount:Number(n),askAmount:Number(l),priceImpact:r})}),[l,c,i,u,h,p]);return(0,os.Z)((()=>{try{if(!d)return;m()}catch(e){console.log("route error:",e)}finally{o(!1)}}),500,[m]),(0,r.useEffect)((()=>{o(!0)}),[m]),{loading:s,bestRoute:e}},cs=()=>{const[e,t]=(0,r.useState)({route:[],bidAmount:0,askAmount:0,priceImpact:0}),[s,o]=(0,r.useState)(!1),{bidAmount:i,askMint:l,bidMint:c,isReverse:d}=(0,n.useSelector)((e=>e.swap)),{activePools:u}=ss(),{undecimalizeMintAmount:p}=_e(),h=(e=>{const{bidAmount:t,isReverse:s}=(0,n.useSelector)((e=>e.swap)),{activePools:o}=ss(),{decimalizeMintAmount:i}=_e(),[l,c]=(0,r.useState)([]),d=(0,a.useGetMintDecimals)(),u=(0,r.useCallback)((async()=>{const n=[];if(s||!Number(t))return c([]);for(const s of e){const e=s[0].bidMint,a=[];let r=await i(t,e);for(const t of s){const{bidMint:e,askMint:s,pool:n}=t,i=o[n],l=oe(i,e),c=oe(i,s),u=await d({mintAddress:e})||0,p=await d({mintAddress:s})||0,h=le(r,c.reserve,l.reserve,c.normalizedWeight,l.normalizedWeight,i.fee.add(i.taxFee)),m={balanceIn:l.reserve,balanceOut:c.reserve,weightIn:l.normalizedWeight,weightOut:c.normalizedWeight,decimalIn:u,decimalOut:p,swapFee:i.fee.add(i.taxFee)};let x=pe(r,m);x<0&&(x=0),a.push({pool:t.pool,bidMint:e,askMint:s,bidAmount:r,askAmount:h,priceImpact:x}),r=h}n.push(a)}return c(n)}),[t,i,d,s,e,o]);return(0,os.Z)((async()=>u()),300,[u]),l})(is()),m=(0,r.useCallback)((async()=>{var e;const s=h.sort(((e,t)=>{let s=e[e.length-1].askAmount;return t[t.length-1].askAmount.gt(s)?1:-1}))[0];if(null===s||void 0===s||!s.length||!c||!l)return t({route:[],bidAmount:Number(i),askAmount:0,priceImpact:0});let n=await p(null===(e=s[s.length-1])||void 0===e?void 0:e.askAmount,l);const a=s.map(((e,t)=>{const n=u[e.pool];return{...s[t],poolData:n}})),r=je(a);return t({route:s,bidAmount:Number(i),askAmount:Number(n),priceImpact:r})}),[l,i,c,u,h,p]);return(0,os.Z)((()=>{try{if(d)return;m()}catch(e){console.log("route error:",e)}finally{o(!1)}}),500,[m]),(0,r.useEffect)((()=>{o(!0)}),[m]),{loading:s,bestRoute:e}};var ds=s(97429).Buffer;const us={route:[],bidAmount:0,askAmount:0,priceImpact:0};let ps=function(e){return e[e.Balansol=0]="Balansol",e[e.Jupiter=1]="Jupiter",e}({});const hs={route:[],bidAmount:0,askAmount:0,priceImpact:0,swap:async()=>({txId:""}),loading:!1,platform:ps.Balansol},ms=(0,r.createContext)({...hs}),xs=({children:e})=>{const t=(0,n.useSelector)((e=>e.swap.isReverse)),s=(0,n.useDispatch)(),[o,i]=(0,r.useState)({...hs}),c=(()=>{const{bidAmount:e,bidMint:t,askMint:s,slippageTolerance:o,isReverse:i}=(0,n.useSelector)((e=>e.swap)),{decimalizeMintAmount:l}=_e(),c=cs(),d=ls(),{createWrapSolTxIfNeed:u,createUnWrapSolTxIfNeed:p}=zt(),{loading:h,bestRoute:m}=i?d:c,x=(0,r.useCallback)((async()=>{const e=(0,a.getAnchorProvider)();return await(0,tt.initTxCreateMultiTokenAccount)(e,{mints:m.route.map((e=>e.askMint))})}),[m.route]),j=(0,r.useCallback)((async()=>{const n=(0,a.getAnchorProvider)(),r=await l(e,t),i=Number(m.askAmount)*(1-o/100),c=await l(i,s),d=await x(),h=await u(t,e);h&&d.push(h);const{transaction:j}=await window.balansol.createRouteTransaction(r,m.route,c);d.push(j);const g=await p(s);g&&d.push(g);const y=await n.sendAll(d.map((e=>({tx:e,signers:[]}))));return{txId:y[y.length-1]}}),[s,m.askAmount,m.route,e,t,p,u,l,x,o]);return(0,r.useMemo)((()=>({...m,swap:j,loading:h,platform:ps.Balansol})),[m,j,h])})(),d=(()=>{const[e,t]=(0,r.useState)(us),[s,o]=(0,r.useState)(),[i,l]=(0,r.useState)(!1),{bidMint:c,askMint:d,bidAmount:u,askAmount:p,slippageTolerance:m,isReverse:x}=(0,n.useSelector)((e=>e.swap)),j=(0,a.useWalletAddress)(),{decimalizeMintAmount:g,undecimalizeMintAmount:y}=_e(),f=(0,r.useCallback)((async()=>{try{if(l(!0),!c||!d||!Number(p)&&!Number(u))throw new Error("Invalid route input");let e="0";e=x?(await g(p,d)).toString():(await g(u,c)).toString();const{data:{data:t}}=await R.Z.get(`https://quote-api.jup.ag/v4/quote?inputMint=${c}&outputMint=${d}&amount=${e}&slippageBps=${100*m}&asLegacyTransaction=true&swapMode=${x?"ExactOut":"ExactIn"}`),s=null===t||void 0===t?void 0:t[0];o(s)}catch(e){o(void 0)}finally{l(!1)}}),[p,d,u,c,g,x,m]);(0,os.Z)((()=>f()),100,[f]);const w=(0,r.useCallback)((async()=>{try{if(l(!0),!s)return t(us);const e=await y(new h.BN(s.inAmount.toString()),c),n=await y(new h.BN(s.outAmount.toString()),d);return t({route:s.marketInfos.map((e=>({bidAmount:new h.BN(e.inAmount),bidMint:e.inputMint,askAmount:new h.BN(e.outAmount),askMint:e.outputMint,pool:e.id,priceImpact:e.priceImpactPct}))),bidAmount:Number(e),askAmount:Number(n),priceImpact:s.priceImpactPct})}catch(e){t(us)}finally{l(!1)}}),[d,c,s,y]);(0,r.useEffect)((()=>{w()}),[w]);const b=(0,r.useCallback)((async()=>{var e;if(!s)throw new Error("Invalid route input");const{data:{swapTransaction:t}}=await R.Z.post("https://quote-api.jup.ag/v4/swap",{route:s,userPublicKey:j,wrapUnwrapSOL:!0,asLegacyTransaction:!0}),n=ds.from(t,"base64"),r=h.rV.Transaction.from(n),o=(0,a.getAnchorWallet)(),i=new h.Y7(a.connection,o,{maxRetries:2});return{txId:await i.sendAndConfirm(r),dstAddress:null===(e=s.marketInfos.at(-1))||void 0===e?void 0:e.outputMint}}),[s,j]);return(0,r.useMemo)((()=>({...e,swap:b,platform:ps.Jupiter,loading:!!Number(u)&&i})),[e,u,i,b])})(),u=(0,r.useCallback)((()=>{if(t)return;if(c.loading||d.loading&&"mainnet"===a.net)return s(Qt({askAmount:"0",loading:!0}));let e=c.askAmount.toString(),n=d.askAmount.toString(),r=c;Number(n)>1.05*Number(e)&&"mainnet"===a.net&&(r=d);let o=r.askAmount.toString();return s(Qt({askAmount:o,loading:!1})),i(r)}),[c,s,t,d]);(0,os.Z)((()=>u()),500,[u]);const p=(0,r.useCallback)((()=>{if(!t)return;if(c.loading||d.loading&&"mainnet"===a.net)return s(Qt({bidAmount:"0",loading:!0}));let e=c.bidAmount.toString(),n=d.bidAmount.toString(),r=c;Number(n)>1.05*Number(e)&&"mainnet"===a.net&&(r=d);let o=r.bidAmount.toString();return s(Qt({bidAmount:o,loading:!1})),i(r)}),[c,s,t,d]);(0,os.Z)((()=>p()),500,[p]);const m=(0,r.useMemo)((()=>o),[o]);return(0,l.jsx)(ms.Provider,{value:m,children:e})},js=()=>(0,r.useContext)(ms),gs=()=>{const{route:e,platform:t}=js(),s=[];return e.forEach(((e,t)=>{0===t&&s.push(e.bidMint),s.push(e.askMint)})),(0,l.jsxs)(i.Space,{children:[s.map(((e,t)=>(0,l.jsxs)(r.Fragment,{children:[t>0&&(0,l.jsx)(p.Z,{name:"chevron-forward-outline"}),(0,l.jsx)(_.Z,{mintAddress:e})]},t))),!!e.length&&t===ps.Jupiter&&(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(rs,{})]}),!e.length&&(0,l.jsx)(r.Fragment,{children:"--"})]})},ys=({reversed:e=!1})=>{const{askMint:t,bidMint:s}=(0,n.useSelector)((e=>e.swap)),{bidAmount:r,askAmount:o}=js();let c=e?o/r:r/o;r&&o||(c=0);const d=e?s:t,u=e?t:s;return(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(ee.Z,{mintAddress:d}),(0,l.jsx)(i.Typography.Text,{children:"="}),(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(c).format("0.[0000]")}),(0,l.jsx)(ee.Z,{mintAddress:u})]})},fs=()=>{const[e,t]=(0,r.useState)(!1);return(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Button,{type:"text",onClick:()=>{t(!e)},shape:"circle",icon:(0,l.jsx)(p.Z,{name:"swap-horizontal-outline"}),style:{background:"transparent"}}),(0,l.jsx)(i.Typography.Text,{children:"1"}),(0,l.jsx)(ys,{reversed:e})]})},ws=({label:e="",content:t="",loading:s=!1})=>(0,l.jsxs)(i.Row,{align:"middle",style:{width:"100%"},children:[(0,l.jsx)(i.Col,{flex:"auto",style:{justifyContent:"left"},children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:e})}),(0,l.jsx)(i.Col,{children:s?(0,l.jsx)(i.Skeleton.Input,{style:{width:150},active:!0,size:"small"}):(0,l.jsx)("span",{children:t})})]}),bs=({extraStyle:e})=>{const{slippageTolerance:t,loading:s,bidAmount:r,askAmount:o}=(0,n.useSelector)((e=>e.swap)),{priceImpact:c}=js(),d=a.util.numeric(c).format("0.[0000]"),u=s&&(!!Number(r)||!!Number(o));return(0,l.jsxs)(i.Row,{gutter:[12,12],style:{...e},children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ws,{label:"Price impact",content:(0,l.jsx)(i.Typography.Text,{style:{color:O(c)},children:Number(d)>0?a.util.numeric(d).format("0.[0000]%"):"~ 0%"}),loading:u})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ws,{label:"Price",content:(0,l.jsx)(fs,{}),loading:u})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ws,{label:"Slippage Tolerance",content:`${t}%`,loading:u})}),(0,l.jsx)(i.Col,{span:24,style:{minHeight:24},children:(0,l.jsx)(ws,{label:"Route",content:(0,l.jsx)(gs,{}),loading:u})})]})},Cs=({visible:e=!1,onCancel:t=(()=>{})})=>{const[s,a]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),h=(0,n.useDispatch)(),{bidAmount:m,bidMint:x,askMint:j}=(0,n.useSelector)((e=>e.swap)),{askAmount:g,priceImpact:y,swap:w}=js();(0,r.useEffect)((()=>{if(y>f.goodSwap)return c(!0);c(!1)}),[y]);const b=(0,r.useCallback)((()=>{t(),a(!1)}),[t]);return(0,l.jsx)(i.Modal,{onCancel:b,closeIcon:(0,l.jsx)(p.Z,{name:"close"}),footer:null,open:e,forceRender:!0,children:(0,l.jsxs)(i.Row,{gutter:[16,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:" Review"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{children:"From"}),(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(_.Z,{mintAddress:x}),(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(ee.Z,{mintAddress:x})})]}),(0,l.jsx)(i.Typography.Title,{level:4,children:m})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(p.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{direction:"vertical",align:"end",children:[(0,l.jsx)(i.Typography.Text,{children:"To"}),(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(_.Z,{mintAddress:j}),(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(ee.Z,{mintAddress:j})})]}),(0,l.jsx)(i.Typography.Title,{level:4,children:g})]})})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Card,{bordered:!1,className:"confirm-info",children:(0,l.jsx)(bs,{})})}),o&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Checkbox,{checked:s,onChange:()=>a(!s),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",onClick:async()=>{u(!0);try{const{txId:e}=await w();t(),h(Qt({bidAmount:"",askAmount:""})),F("Swap",e)}catch(e){E(e)}finally{u(!1)}},disabled:o&&!s,loading:d,block:!0,size:"large",children:"Swap"})})]})})},As=()=>{const e=(0,n.useSelector)((e=>e.swap.bidAmount)),t=(0,n.useSelector)((e=>e.swap.askAmount)),s=(0,n.useSelector)((e=>e.swap.bidMint)),a=(0,n.useSelector)((e=>e.swap.loading)),[o,c]=(0,r.useState)(!1),{route:d}=js(),{balance:u}=vt(s),p=(0,r.useMemo)((()=>Number(e)?u<Number(e)?"Balance not enough":Number(t)&&d.length?"":"Route not found":"Enter an amount"),[t,u,e,d.length]);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",onClick:()=>c(!0),disabled:!!p,loading:a&&Number(e)+Number(t)!==0,block:!0,size:"large",children:p||"Review"})}),(0,l.jsx)(Cs,{visible:o,onCancel:()=>c(!1)})]})},vs=(0,r.memo)(As);const Ts=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Ss=({title:e="Powered by",spacing:t=4,iconSize:s=20})=>(0,l.jsxs)(i.Space,{size:t,style:{cursor:"pointer"},children:[(0,l.jsx)(i.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:e}),(0,l.jsx)(i.Tooltip,{title:"Sentre Protocol",children:(0,l.jsx)(i.Avatar,{src:Ts,size:s})})]}),ks=[.5,1,2,100],Ns=()=>{const e=(0,n.useSelector)((e=>e.swap.slippageTolerance)),t=(0,n.useDispatch)();return(0,l.jsx)(i.Card,{bodyStyle:{padding:16},style:{boxShadow:"none"},children:(0,l.jsxs)(i.Space,{size:24,direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"Slippage tolerance"}),(0,l.jsx)(i.Space,{size:12,children:ks.map((s=>{const n=s===e?"selected":"";return(0,l.jsx)(i.Button,{className:`btn-slippage ${n}`,onClick:()=>{(e=>{t(Qt({slippageTolerance:e}))})(s)},children:100===s?"Freely":`${s}%`},s)}))})]})})},Bs=()=>(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(Ss,{}),(0,l.jsx)(i.Divider,{type:"vertical"}),(0,l.jsx)(i.Popover,{placement:"bottomRight",content:(0,l.jsx)(Ns,{}),trigger:"click",overlayClassName:"slippage",overlayInnerStyle:{borderRadius:24},children:(0,l.jsx)(i.Button,{style:{marginRight:-7},type:"text",icon:(0,l.jsx)(p.Z,{name:"cog-outline"})})})]}),Rs=()=>{const e=(0,n.useDispatch)(),{askMint:t,bidMint:s,askAmount:a}=(0,n.useSelector)((e=>e.swap)),{pushHistory:o,getAllQuery:c}=Gt();(0,r.useEffect)((()=>{if(!t||!s)return;const{bid_mint:e,ask_mint:n}=c();s===e&&t===n||o("/swap",{bid_mint:s,ask_mint:t},!1)}),[t,s,c,o]);return(0,l.jsxs)(i.Row,{gutter:[12,12],justify:"center",children:[(0,l.jsx)(i.Col,{xs:24,md:14,lg:12,xl:8,children:(0,l.jsx)(i.Card,{style:{boxShadow:"unset"},children:(0,l.jsxs)(i.Row,{gutter:[0,16],justify:"end",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(Bs,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[0,4],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ns,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{className:"btn-switch-type",size:"small",icon:(0,l.jsx)(p.Z,{name:"git-compare-outline"}),onClick:()=>{e(Qt({askMint:s,bidMint:t,bidAmount:a,askAmount:"",isReverse:!1,loading:!0}))}})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(_t,{})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(bs,{})}),(0,l.jsx)(i.Col,{span:24}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(vs,{})})]})})}),(0,l.jsx)(i.Col,{span:24})]})};var Ms=s(17604);const zs=({poolAddress:e})=>{const t=(0,n.useSelector)((t=>t.pools[e])),[s,o]=(0,r.useState)([]),c=(0,a.useTheme)();return(0,r.useEffect)((()=>{(async()=>{let e=await Promise.all(t.mints.map((async(e,s)=>{const n=de(t.weights,t.weights[s]),r=await a.tokenProvider.findByAddress(e.toBase58());return`${a.util.numeric(n).format("0,0.[00]%")} ${(null===r||void 0===r?void 0:r.symbol)||e.toBase58().substring(0,4)}`})));o(e)})()}),[t.mints,t.weights]),(0,l.jsxs)(i.Space,{size:[16,8],align:"center",wrap:!0,children:[(0,l.jsx)(i.Typography.Text,{style:{whiteSpace:"nowrap"},children:"Balansol LP"}),s.map(((e,t)=>(0,l.jsx)(i.Card,{bodyStyle:{padding:"2px 8px"},style:{background:"dark"===c?"#394360":"#ffffff",marginRight:"-8px",boxShadow:"none"},children:(0,l.jsx)(i.Typography.Text,{children:e})},e+t)))]})},Is=({poolAddress:e})=>{const[t,s]=(0,r.useState)(!1),o=(0,n.useSelector)((t=>t.pools[e])),c=(0,a.useWalletAddress)(),d=o.state;return(0,l.jsxs)(i.Space,{size:10,children:[d.frozen&&(0,l.jsx)(i.Tooltip,{title:"Frozen Pool",children:(0,l.jsx)(p.Z,{name:"snow-outline"})}),o.authority.toBase58()===c&&(0,l.jsx)(i.Tooltip,{title:"Your pool",children:(0,l.jsx)(p.Z,{name:"person-outline"})}),(0,l.jsx)(i.Tooltip,{title:`Pool Address: ${e}`,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",style:{cursor:"pointer"},onClick:t=>{window.open(a.util.explorer(e),"_blank"),null===t||void 0===t||t.stopPropagation()},children:a.util.shortenAddress(e,3,"...")})}),(0,l.jsx)(i.Tooltip,{title:"Copied",open:t,children:(0,l.jsx)(jt(),{text:e,children:(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:"copy-outline"}),onClick:async e=>{s(!0),setTimeout((()=>s(!1)),1500),e.stopPropagation()},style:{width:"unset",height:"unset"}})})})]})},Ps=({poolAddress:e})=>{const t=(0,n.useSelector)((t=>t.pools[e])),s=(0,a.useWalletAddress)(),{vol24h:r}=rt(e),{pushHistory:o}=Gt(),c=t.state,{TVL:d}=nt(e),{balance:u}=ct(t.mintLpt.toBase58()),p=c.initialized||t.authority.toBase58()===s;return(0,l.jsxs)(i.Card,{className:""+(p?"pool-card-detail":"disabled-pool"),style:{boxShadow:"unset"},onClick:()=>o("/details",{pool:e}),children:[(0,l.jsxs)(i.Row,{style:{marginBottom:"16px"},children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(gt,{size:32,poolAddress:e,max:3})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(Is,{poolAddress:e})})]}),(0,l.jsxs)(i.Row,{gutter:[0,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(zs,{poolAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{align:"bottom",wrap:!1,children:(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Row,{gutter:[32,0],children:[(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{size:4,direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"TVL:"}),(0,l.jsxs)(i.Typography.Title,{level:5,children:[" ",a.util.numeric(d).formatCurrency("($0.00a)")]})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{size:4,direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Vol 24h:"}),(0,l.jsxs)(i.Typography.Title,{level:5,children:[" ",a.util.numeric(r).formatCurrency("($0.00a)")]})]})}),(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{size:4,direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"My Contribution:"}),(0,l.jsxs)(i.Typography.Title,{level:5,children:[" ",a.util.numeric(u).format("0,0.[00]")," LP"]})]})})]})})})})]})]})},Ds=["CT2QmamF6kBBDVbkg8WkvF5gnq6q8mDranPi21tdGeeL","4JFd9kHUC4FoKaTL38YMGoXP68MNBT9sC1FZCmfMn1FC","AzPdQteHNWLvgRtFQX2N9K2U14M7rwub4VjEeKhaSbuh","2gtDG2iYam6z4eCjx9yfBD7ayRXQGTDymjqQLiHqr7Z6","FhownP7d2EP7PCeoXVFk11WennsSaCoj4sZaQCEpvC89","13Jn5xugRGjVorHWakzjvdZBMFwPLQniKHRoE6j4BMCC","kPbhNnVmuhqWApxhr156XQV8hhKsysrvwVFmDhCWFY5"],Ls=()=>{const[e,t]=(0,r.useState)(!0),[s,o]=(0,r.useState)({}),{poolsFilter:c}=(()=>{const[e,t]=(0,r.useState)({}),s=(0,n.useSelector)((e=>e.pools)),o=(0,n.useSelector)((e=>e.searchPools.filterPool)),i=(0,a.useWalletAddress)(),l=(0,a.useAccounts)(),c=(0,r.useCallback)((e=>s[e].authority.toBase58()===i),[s,i]),d=(0,r.useCallback)((async e=>{var t;const n=await h.P6.token.associatedAddress({mint:s[e].mintLpt,owner:new h.rV.PublicKey(i)});return!!(null===(t=l[n.toBase58()])||void 0===t?void 0:t.amount)}),[l,s,i]),u=(0,r.useCallback)((async e=>{let s={};for(const t in e){let n=!1;switch(o){case w.YourPools:n=c(t);break;case w.DepositedPools:n=await d(t);break;default:n=!0}for(const s of e[t].reserves)s.isZero()&&(n=!1);n&&h.rV.PublicKey.isOnCurve(e[t].authority)&&(s[t]=e[t])}t(s)}),[d,c,o]);return(0,r.useEffect)((()=>{u(s)}),[u,s]),{poolsFilter:e,filterListPools:u,checkIsYourPool:c}})(),d=(e=>{const[t,s]=(0,r.useState)({}),o=(0,n.useSelector)((e=>e.searchPools.searchInput)),i=(0,r.useCallback)((async()=>{const t={},n=(await a.tokenProvider.find(o)).map((e=>e.address)),r=Object.keys(e).filter((t=>{if(!o||!e||o.length<3)return!0;const s=e[t],{mintLpt:a,mints:r}=s;if(t.includes(o))return!0;if(a.toBase58().includes(o))return!0;for(const e in r){if(n.includes(r[e].toBase58()))return!0;if(o.includes(r[e].toBase58()))return!0}return!1}));r.sort().map((s=>t[s]=e[s])),s(t)}),[e,o]);return(0,r.useEffect)((()=>{i().then((()=>{setTimeout((()=>{(0,yt.be)()}),500)}))}),[i]),t})(c),u=(0,r.useMemo)((()=>{const e=Object.keys(d).sort(((e,t)=>(s[t]||0)-(s[e]||0))),t=new Set(Ds.filter((e=>d[e])));for(const s of e)t.add(s);return Array.from(t)}),[d,s]),p=(0,r.useCallback)((async()=>{try{t(!0);const e=await(async()=>{const{data:e}=await R.Z.get(Z.api.version.detailTvl);return e.balansol})(),s={};for(const{address:t,tvl:n}of e)s[t]=n;o(s)}catch(e){(0,Ms.cB)(e)}finally{t(!1)}}),[]);return(0,r.useEffect)((()=>{p()}),[p]),e?(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Spin,{})})}):(0,l.jsx)(i.Row,{gutter:[24,24],children:u.map((e=>{const t=d[e];if(!t)return(0,l.jsx)(r.Fragment,{});let s=t.state;return s.uninitialized||s.deleted||t.reserves.map((e=>e.toString())).includes("0")?null:(0,l.jsx)(i.Col,{xs:24,md:24,children:(0,l.jsx)(yt.ZP,{height:198,children:(0,l.jsx)(Ps,{poolAddress:e})})},e)}))})};function Zs({tokenList:e}){const t=100-e.reduce(((e,t)=>e+Number(t.weight)),0);return(0,l.jsxs)("div",{style:{display:"flex",marginTop:8},children:[e.map(((e,t)=>0===Number(e.weight)?null:(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",width:1!==t?`calc(${e.weight}% + 8px)`:`${e.weight}%`,background:`${a.util.randomColor(e.addressToken||"_",1)}`,height:"8px",borderRadius:"20px",zIndex:`${t}`,marginRight:"-8px",alignItems:"center"},children:(0,l.jsx)(_.Z,{mintAddress:e.addressToken})},`${e.addressToken}${t}`))),(0,l.jsx)("div",{style:{width:`${t}%`,background:"#142042",borderRadius:"20px"}})]})}const Fs=({tokenInfo:e,onChangeWeight:t,onChangeLock:s,onRemoveToken:n})=>{const{weight:a,isLocked:r}=e;return(0,l.jsxs)(i.Space,{size:4,children:[(0,l.jsx)(x,{value:a,controls:!1,size:"large",bordered:!1,onValue:t,addonAfter:(0,l.jsx)("div",{style:{marginLeft:-4},children:"%"}),maxLength:5,placeholder:"0"}),(0,l.jsx)(i.Button,{onClick:()=>{s(!r)},shape:"circle",icon:(0,l.jsx)(p.Z,{name:r?"lock-closed-outline":"lock-open-outline"}),style:{background:"unset"},type:"text"}),(0,l.jsx)(i.Button,{onClick:n,shape:"circle",icon:(0,l.jsx)(p.Z,{name:"trash-outline"}),type:"text"})]})},Es=({tokenList:e,mintSetup:t,onChangeTokenInfo:s,onRemoveToken:n,id:r})=>{const o=(0,a.useTheme)();return(0,l.jsxs)(i.Row,{wrap:!1,children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(Ht.Z,{value:t.addressToken,onChange:e=>{s({...t,addressToken:e},r)},style:{background:"dark"===o?"#394360":"#F2F4FA"}})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(Fs,{tokenInfo:t,onChangeWeight:e=>{s({...t,weight:e},r)},onChangeLock:e=>{s({...t,isLocked:e},r)},onRemoveToken:()=>n(r)})})]})},Os=new h.BN(25e5),Ws=new h.BN(5e5),Vs={addressToken:"",weight:"",isLocked:!1},Ys=({setCurrentStep:e})=>{const[t,s]=(0,r.useState)([]),[n,a]=(0,r.useState)(-1),[o,c]=(0,r.useState)(!1),d=(0,r.useCallback)((()=>{let e=100,a=0,r=-1;t.forEach(((t,s)=>{if(!(t.isLocked||s===n))return r=s;e-=Number(t.weight),a++})),e<0&&(e=0);const o=t.length-a;let i=e/o;const l=JSON.parse(JSON.stringify(t));l.forEach(((t,s)=>{if(!(t.isLocked||s===n))return s===r?t.weight=e.toFixed(2):(t.weight=i.toFixed(2),e-=Number(t.weight))})),JSON.stringify(t)!==JSON.stringify(l)&&s(l)}),[n,t]);(0,r.useEffect)((()=>{d()}),[d]);const u=(e,n)=>{if(o)return;const r=[...t];r[n]={...e},s(r),e.weight!==t[n].weight&&a(n)},m=e=>{o||s(t.filter(((t,s)=>s!==e)))};(0,r.useEffect)((()=>{s([{...Vs},{...Vs}])}),[]);const x=(0,r.useMemo)((()=>{if(t.length<2)return!0;let e=0;for(const s of t){if(!s.addressToken||!Number(s.weight))return!0;e+=Number(s.weight)}return 100!==e}),[t]);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[0,12],children:[(0,l.jsx)(i.Col,{flex:"auto",children:"Token"}),(0,l.jsx)(i.Col,{children:"Weight"}),t.map(((e,s)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Es,{tokenList:t,mintSetup:e,onChangeTokenInfo:u,onRemoveToken:m,id:s})},e.addressToken+s))),t.length<8&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{icon:(0,l.jsx)(p.Z,{name:"add-outline"}),onClick:()=>{o||t.length>=8||s([...t,{...Vs}])},ghost:!0,disabled:o,children:"Add a token"})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Zs,{tokenList:t})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[16,16],children:(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",onClick:async()=>{try{c(!0);const s=t.map((({addressToken:e,weight:t})=>{const s=Number(t)*g;return{publicKey:new h.rV.PublicKey(e),action:Q.MintActionStates.Active,amountIn:new h.BN(0),weight:new h.BN(s)}})),{txId:n}=await window.balansol.initializePool({fee:Os,taxFee:Ws,mintsConfigs:s,taxMan:Z.sol.taxmanAddress,sendAndConfirm:!0});F("Create pool",n),e(j.addLiquidity)}catch(s){E(s)}finally{c(!1)}},disabled:x,loading:o,block:!0,children:"Supply"})})})})]})};var qs=s(78349);const Gs="pools",Ks=(0,Jt.createAsyncThunk)(`${Gs}/getPools`,(async()=>{const e=await window.balansol.getAllPoolData();let t={};for(const s of e){const e=s.account;e.state.deleted||(t[s.publicKey.toBase58()]=e)}return t})),Us=(0,Jt.createAsyncThunk)(`${Gs}/getPool`,(async({address:e},{getState:t})=>{if(!T.account.isAddress(e))throw new Error("Invalid pool address");const{pools:{[e]:s}}=t();if(s)return{[e]:s};return{[e]:await window.balansol.getPoolData(e)}})),Hs=(0,Jt.createAsyncThunk)(`${Gs}/upsetPool`,(async({address:e,data:t})=>{if(!T.account.isAddress(e))throw new Error("Invalid pool address");if(!t)throw new Error("Data is empty");return{[e]:t}})),Js=(0,Jt.createAsyncThunk)(`${Gs}/removePool`,(async({address:e},{getState:t})=>{const{pools:s}=t();if(!T.account.isAddress(e))throw new Error("Invalid pool address");if(!s[e])throw new Error("Pool address does not exist!");const n={...s};return delete n[e],n})),$s=(0,Jt.createSlice)({name:Gs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ks.fulfilled,((e,{payload:t})=>t)).addCase(Us.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(Hs.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(Js.fulfilled,((e,{payload:t})=>t))}}).reducer,Qs=({poolAddress:e,setCurrentStep:t,amounts:s,onClose:o=(()=>{})})=>{const c=(0,n.useSelector)((t=>t.pools[e])),d=(0,n.useDispatch)(),[u,p]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!0),{decimalizeMintAmount:w}=_e(),{getMintBalance:b}=Rt(),C=st(),{createWrapSolTxIfNeed:A}=zt(),v=(0,r.useCallback)((async()=>{const e=await Promise.all(c.mints.map((async e=>await C(e)||0)));p(e)}),[C,c.mints]);(0,r.useEffect)((()=>{v()}),[v]);const T=(0,r.useMemo)((()=>{let e=0;return s.forEach(((t,s)=>{c.reserves[s].isZero()&&(e+=Number(t)*(u[s]||0))})),e}),[s,c.reserves,u]),S=(0,r.useCallback)((async()=>{const{mints:e}=c;for(let t in s){const{balance:n}=await b(e[t].toBase58(),!0);if(Number(s[t])>n||Number(s[t])<=0)return f(!0)}return f(!1)}),[s,b,c]);return(0,r.useEffect)((()=>{S()}),[S]),(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[12,12],children:c.mints.map(((e,t)=>{const n=Number(s[t])*(u[t]||0);return(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{flex:1,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:(0,l.jsx)(ee.Z,{mintAddress:e.toBase58()})}),(0,l.jsxs)(i.Typography.Text,{type:"secondary",children:["(",(0,l.jsx)(qs.Z,{mintAddress:e}),")"]})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(n).format("$0,0.[0000]")})})]},t)},e.toBase58())}))})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:1,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Total value"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Title,{level:3,children:["$",a.util.numeric(T).format("0,0.[0000]")]})})]})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{type:"ghost",disabled:h,loading:x,onClick:async()=>{try{g(!0);const{txId:t}=await window.balansol.closePool(e);F("Close pool",t),o(),d(Js({address:e}))}catch(t){E(t)}finally{g(!1)}},block:!0,children:"Delete pool"})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{type:"primary",onClick:async()=>{try{m(!0);const n=[];for(const t in c.mints){const a=c.mints[t];if(!c.reserves[t].isZero())continue;const r=await w(s[t],a),o=await A(a.toBase58(),s[t]);o&&n.push(o);const{transaction:i}=await window.balansol.initializeJoin({poolAddress:e,mint:a,amountIn:r,sendAndConfirm:!1});n.push(i)}const r=(0,a.getAnchorProvider)(),o=await r.sendAll(n.map((e=>({tx:e,signers:[]}))));F("Fund pool",o[o.length]),t(j.confirmCreatePool)}catch(n){E(n)}finally{m(!1)}},disabled:y||x,loading:h,block:!0,children:"Supply"})})]})},Xs=({setCurrentStep:e,poolAddress:t,onClose:s=(()=>{})})=>{const[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(0),m=(0,n.useSelector)((e=>e.pools[t])),{undecimalizeMintAmount:x}=_e(),j=st(),g=(0,a.useGetMintDecimals)(),y=e=>p!==e&&Number(o[p])>0&&Number(d[e])>0&&Number(d[e])!==Number(o[e]),f=(0,r.useCallback)((async()=>{if(!m||0!==o.length)return;const e=await Promise.all(m.mints.map(((e,t)=>Number(o[t])?o[t]:x(m.reserves[t],e))));c(e)}),[o,m,x]);(0,r.useEffect)((()=>{f()}),[f]);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{justify:"center",gutter:[8,8],children:m.mints.map(((e,t)=>{const s=de(m.weights,m.weights[t]);return(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Nt,{amount:o[t],selectedMint:e.toBase58(),onChangeAmount:m.reserves[t].toNumber()?void 0:e=>(async(e,t)=>{const s=[...o];s[t]=e,h(t),c(s);const{mints:n,weights:a}=m,r=await j(n[t]);if(!r)return null;const i=de(a,a[t]),l=await Promise.all(n.map((async(s,n)=>{if(t===n)return"";const o=await j(s);if(!o)return"";const l=de(a,a[n]),c=await g({mintAddress:s.toBase58()});return(r*Number(e)/i*(l/o)).toFixed(c)})));u(l)})(e,t),mintLabel:(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Typography.Text,{children:(0,l.jsx)(ee.Z,{mintAddress:e.toBase58()||""})}),(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(s).format("0,0.[0000]%")})]}),placeholder:d[t],force:!0,ratioButton:y(t)&&(0,l.jsx)(i.Tooltip,{title:d[t],children:(0,l.jsx)(i.Button,{type:"text",onClick:()=>(async e=>{const t=[...o];t[e]=d[e],c(t)})(t),style:{marginRight:-15},children:"Apply suggestion"})})})},`${e.toBase58()+t}`)}))})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Qs,{onClose:s,amounts:o,poolAddress:t,setCurrentStep:e})})]})},_s=[{title:"TOKEN",dataIndex:"token",render:e=>(0,l.jsx)(i.Typography.Text,{children:(0,l.jsxs)(i.Space,{size:8,children:[(0,l.jsx)(_.Z,{mintAddress:e.addressToken}),(0,l.jsx)(ee.Z,{mintAddress:e.addressToken})]})})},{title:"WEIGHT",dataIndex:"token",render:e=>(0,l.jsx)(i.Typography.Text,{style:{fontWeight:700},children:Number(e.weight)})},{title:"AMOUNT",dataIndex:"amount",render:(e,t)=>(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(e).format(`0,0.[${"0".repeat(t.token.decimal||9)}]a`)})},{title:"VALUE",dataIndex:"value",render:(e,t)=>(0,l.jsx)(i.Typography.Text,{children:a.util.numeric(e).format("$0,0.[0000]")})}],en=({onConfirm:e,poolAddress:t})=>{const s=(0,n.useSelector)((e=>e.pools[t])),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(0),{undecimalizeMintAmount:p}=_e(),h=st(),m=(0,r.useCallback)((async()=>{if(!s)return c([]),u(0);const{mints:e,reserves:t}=s;let n=0;const r=await Promise.all(e.map((async(e,r)=>{const o=e.toBase58(),i=oe(s,e),l=await a.tokenProvider.findByAddress(o);let c=await p(t[r],o);const d=await h(o);let u=Number(c)*(d||0);return n+=u,{token:{addressToken:o,weight:a.util.numeric(i.normalizedWeight).format("0,0.[00]"),isLocked:!0,decimal:null===l||void 0===l?void 0:l.decimals},amount:Number(c),value:u}})));u(n),c(r)}),[h,s,p]);return(0,r.useEffect)((()=>{m()}),[m]),(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Table,{columns:_s,dataSource:o,rowClassName:(e,t)=>t%2?"odd-row":"even-row",pagination:!1,rowKey:e=>e.token.addressToken,scroll:{x:!0}})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Card,{style:{borderRadius:"8px"},bodyStyle:{padding:16},bordered:!1,className:"card-total-value",children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:1,children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Total value"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Title,{level:3,children:["$",a.util.numeric(d).format("0,0.[00]")]})})]})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{type:"primary",onClick:e,style:{borderRadius:40},block:!0,size:"large",children:"Confirm"})})]})},{Step:tn}=i.Steps,sn=({onClose:e=(()=>{})})=>{const t=(0,n.useSelector)((e=>e.pools)),[s,o]=(0,r.useState)(j.setupToken),[c,d]=(0,r.useState)(""),u=(0,a.useWalletAddress)(),p=(0,r.useCallback)((async()=>{if(!c){for(const e in t){const s=t[e];if(s.authority.toBase58()===u&&s.state.uninitialized)return o(j.addLiquidity),d(e)}return d("")}}),[c,t,u]);(0,r.useEffect)((()=>{p()}),[p]);const h=(0,r.useMemo)((()=>{switch(s){case j.setupToken:return(0,l.jsx)(Ys,{setCurrentStep:o});case j.addLiquidity:return t[c]?(0,l.jsx)(Xs,{setCurrentStep:o,poolAddress:c,onClose:e}):null;case j.confirmCreatePool:return t[c]?(0,l.jsx)(en,{onConfirm:e,poolAddress:c}):null}}),[s,e,c,t]);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:4,children:"New Pool"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Steps,{size:"small",current:s,children:[(0,l.jsx)(tn,{title:"Select tokens & weights"}),(0,l.jsx)(tn,{title:"Add liquidity"}),(0,l.jsx)(tn,{title:"Confirm"})]})}),(0,l.jsx)(i.Col,{span:24,children:h})]})},nn=()=>{const e=(0,n.useSelector)((e=>e.pools)),[t,s]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),d=(0,a.useWalletAddress)(),u=(0,r.useCallback)((async()=>{for(const t in e){const s=e[t];if(s.authority.toBase58()===d&&s.state.uninitialized)return c(!0)}return c(!1)}),[e,d]);return(0,r.useEffect)((()=>{u()}),[u]),(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(i.Button,{icon:(0,l.jsx)(p.Z,{name:o?"sync-outline":"add-outline"}),onClick:()=>s(!0),style:{borderRadius:40},block:!0,ghost:!0,children:o?"Resume":"New Pool"}),(0,l.jsx)(i.Modal,{open:t,onCancel:()=>{s(!1)},closeIcon:(0,l.jsx)(p.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,width:572,children:(0,l.jsx)(sn,{onClose:()=>s(!1)})})]})},an="searchPools",rn={searchInput:"",filterPool:w.AllPools},on=(0,Jt.createAsyncThunk)(`${an}/setSearchSelection`,(async({filterPool:e})=>({filterPool:e}))),ln=(0,Jt.createAsyncThunk)(`${an}/setSearchInput`,(async({searchText:e})=>({searchInput:e}))),cn=(0,Jt.createSlice)({name:an,initialState:rn,reducers:{},extraReducers:e=>{e.addCase(on.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ln.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,dn=()=>{const{searchInput:e,filterPool:t}=(0,n.useSelector)((e=>e.searchPools)),s=(0,n.useDispatch)(),a=e=>{s(ln({searchText:e}))};return(0,l.jsxs)(i.Row,{className:"search-pools",gutter:[12,12],children:[(0,l.jsx)(i.Col,{md:8,xs:10,children:(0,l.jsxs)(i.Select,{value:t,onChange:e=>{s(on({filterPool:e}))},style:{width:"100%",height:"32px"},className:"category",children:[(0,l.jsx)(i.Select.Option,{value:w.AllPools,children:"All pools"}),(0,l.jsx)(i.Select.Option,{value:w.DepositedPools,children:"Deposited pools"}),(0,l.jsx)(i.Select.Option,{value:w.YourPools,children:"Your pools"})]})}),(0,l.jsx)(i.Col,{flex:"1 0",children:(0,l.jsx)(i.Input,{placeholder:"Search",className:"search",value:e,prefix:e?(0,l.jsx)(i.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent",marginLeft:-7},onClick:()=>a(""),icon:(0,l.jsx)(p.Z,{name:"close-outline"})}):(0,l.jsx)(p.Z,{style:{fontSize:"24px",marginLeft:-5},name:"search-outline"}),onChange:e=>{a(e.target.value)},style:{borderRadius:"24px",height:"32px"}})})]})},un=()=>{const e=(0,a.useInfix)()<a.Infix.md;return(0,l.jsxs)(i.Row,{gutter:[12,12],justify:"center",align:"middle",children:[(0,l.jsx)(i.Col,{xs:24,md:20,lg:16,xl:12,xxl:8,children:(0,l.jsxs)(i.Row,{gutter:[12,12],justify:"space-between",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(dn,{})}),(0,l.jsx)(i.Col,{span:e?24:void 0,children:(0,l.jsx)(nn,{})})]})}),(0,l.jsx)(i.Col,{span:24}),(0,l.jsx)(i.Col,{xs:24,md:20,lg:16,xl:12,xxl:8,children:(0,l.jsx)(Ls,{})}),(0,l.jsx)(i.Col,{span:24})]})};const pn=new(s(54882).C)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDU4M0Q5MmIwMGJlNjZDNjg2NDUyY0JkNTZEMTlmOWZlMTRhNjhCYTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTg4MDM1NjE3MTcsIm5hbWUiOiJCb29zdGVyRGV2In0.kaP_EXFB2q7Zo8_CWZfGI1n5R-AoZzfVTWpDdZ_REcM",["launchpad"]),hn=e=>{const t=(0,n.useSelector)((t=>t.launchpads[e])),[s,a]=(0,r.useState)();return(0,r.useEffect)((()=>{(async()=>{const e=t.metadata,s=await pn.methods.launchpad.get(e);a(s)})()}),[e,t]),{launchpadData:t,metadata:s}},mn=({children:e,style:t})=>{const s=(0,a.useTheme)();return(0,l.jsx)(i.Tag,{style:{background:"dark"===s?"#394360":"#FFFFFF",border:"none",borderRadius:4,marginRight:0,...t},children:e})},xn=(0,r.memo)((({endTime:e})=>{const t=Math.floor(Date.now()/1e3),s=Date.now()/1e3,n=Ze().duration(e-t,"seconds"),[a,o]=(0,r.useState)({days:Math.floor(n.asDays()),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds()}),c=(0,r.useCallback)((async()=>{if(!e||e<s)return;const n=Ze().duration(e-t,"seconds"),a=Math.floor(n.asDays()),r=n.hours(),i=n.minutes(),l=n.seconds();o({days:a,hours:r,minutes:i,seconds:l})}),[e,s,t]);return(0,r.useEffect)((()=>{const e=setInterval((()=>c()),1e3);return()=>clearInterval(e)}),[c]),e?e<s?(0,l.jsx)(mn,{children:(0,l.jsx)(i.Typography.Text,{children:"Expired"})}):(0,l.jsxs)(i.Space,{size:4,children:[!!a.days&&(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(mn,{children:(0,l.jsxs)(i.Typography.Text,{children:[a.days,"d"]})}),":"]}),(0,l.jsx)(mn,{children:(0,l.jsxs)(i.Typography.Text,{children:[a.hours,"h"]})}),":",(0,l.jsx)(mn,{children:(0,l.jsxs)(i.Typography.Text,{children:[a.minutes,"m"]})}),!a.days&&(0,l.jsxs)(r.Fragment,{children:[":",(0,l.jsx)(mn,{children:(0,l.jsxs)(i.Typography.Text,{children:[a.seconds,"s"]})})]})]}):(0,l.jsx)(i.Typography.Text,{children:"Unlimited"})})),jn=({launchpadAddress:e})=>{const t=(0,a.useTheme)(),{launchpadData:s}=hn(e),{startTime:n,endTime:r}=s,o=r.toNumber()-n.toNumber(),c=(Date.now()/1e3-n.toNumber())/o,d=Date.now()/1e3>n.toNumber(),u=d?r:n;return(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:d?" End in":"Start in"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(xn,{endTime:u.toNumber()}),d&&(0,l.jsx)(i.Progress,{type:"circle",percent:100*c,showInfo:!1,className:"end-time-progress",strokeWidth:10,strokeColor:"dark"===t?"#63E0B3":"#081438"})]})})]})},gn=(e,t)=>{const s=(0,n.useSelector)((e=>e.cheques)),o=(0,a.useWalletAddress)(),i=(0,r.useMemo)((()=>Object.keys(s).filter((n=>{const{authority:a,launchpad:r}=s[n];return t?a.toBase58()===o&&r.toBase58()===e:r.toBase58()===e}))),[s,e,t,o]);return i},yn=(e,t)=>{const s=(0,n.useSelector)((e=>e.cheques)),a=gn(e,t);return(0,r.useMemo)((()=>{let e=0,t=new h.BN(0),n=new h.BN(0);const r=[];for(const o of a){const{authority:a,bidAmount:i,askAmount:l}=s[o];t=t.add(i),n=n.add(l),r.includes(a.toBase58())||(r.push(a.toBase58()),e+=1)}return{totalUsers:e,totalBid:t,totalAsk:n}}),[s,a])},fn=({direction:e="row",launchpadAddress:t})=>{const{totalAsk:s}=yn(t),{launchpadData:n}=hn(t),o=(0,a.useMintDecimals)({mintAddress:null===n||void 0===n?void 0:n.mint.toBase58()})||0,c=(0,r.useMemo)((()=>Number(re.undecimalize(s,o||0))/Number(re.undecimalize(null===n||void 0===n?void 0:n.startReserves[0],o))),[o,null===n||void 0===n?void 0:n.startReserves,s]),d=Date.now()/1e3>n.startTime.toNumber();return(0,l.jsxs)(i.Row,{gutter:[12,12],align:"middle",style:{flexFlow:e},children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:d?"Sold":"Total raise"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{children:[(0,l.jsxs)(i.Typography.Title,{level:5,type:"success",children:[d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Dt.Z,{mintAddress:n.mint,amount:s,formatter:"0,0.[000]"}),"/"]}),(0,l.jsx)(Dt.Z,{mintAddress:n.mint,amount:null===n||void 0===n?void 0:n.startReserves[0],formatter:"0,0.[000]"})," ",(0,l.jsx)(ee.Z,{mintAddress:n.mint})]}),d&&(0,l.jsxs)(i.Typography.Title,{level:5,children:["(",a.util.numeric(c).format("%0,0.[00]"),")"]})]})})]})},wn=({launchpadAddress:e,isDetail:t=!1,direction:s="row"})=>{const{launchpadData:n}=hn(e),{totalBid:o,totalUsers:c}=yn(e),d=(0,a.useTheme)(),u=(0,a.useMintDecimals)({mintAddress:n.stableMint.toBase58()})||0,p=(0,r.useMemo)((()=>Number(tt.utilsBN.undecimalize(o,u||0))/Number(tt.utilsBN.undecimalize(null===n||void 0===n?void 0:n.startReserves[1],u))),[null===n||void 0===n?void 0:n.startReserves,u,o]),h=Date.now()/1e3>n.startTime.toNumber();return(0,l.jsxs)(i.Row,{gutter:[8,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[12,12],style:{flexFlow:s},children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Fundraising goal"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{children:[(0,l.jsxs)(i.Typography.Title,{level:5,type:"success",children:[h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Dt.Z,{mintAddress:n.stableMint,amount:o,formatter:"0,0.[000]"}),"/"]}),(0,l.jsx)(Dt.Z,{mintAddress:n.stableMint,amount:null===n||void 0===n?void 0:n.startReserves[1],formatter:"0,0.[000]"})," ",(0,l.jsx)(ee.Z,{mintAddress:null===n||void 0===n?void 0:n.stableMint.toBase58()})]}),h&&(0,l.jsxs)(i.Typography.Title,{level:5,children:["(",a.util.numeric(p).format("%0,0.[00]"),")"]})]})})]})}),!t&&h&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[8,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Progress,{strokeColor:"dark"===d?"#63E0B3":"#081438",percent:100*p,showInfo:!1,className:p>=1?"sold-progress active":"sold-progress"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Participants:"}),(0,l.jsx)(i.Typography.Text,{children:c})]})})]})})]})},bn=({category:e,style:t})=>{const s=(0,r.useCallback)((t=>{const s=v[e];return t?`rgba(${s[0]},${s[1]},${s[2]},${t})`:`rgba(${s[0]},${s[1]},${s[2]},1)`}),[e]);return(0,r.useEffect)((()=>{s()}),[s]),(0,l.jsx)(i.Tag,{style:{color:s(),...t,borderRadius:8},color:s("0.1"),children:e})},Cn=({launchpadAddress:e})=>{const{metadata:t}=hn(e);return(0,l.jsx)(i.Spin,{spinning:!t,children:(0,l.jsxs)(i.Space,{size:24,align:"center",children:[(0,l.jsx)(i.Avatar,{shape:"square",size:69,src:null===t||void 0===t?void 0:t.coverPhoto}),(0,l.jsxs)(i.Space,{size:0,direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:4,children:null===t||void 0===t?void 0:t.projectName}),(0,l.jsx)(i.Space,{size:4,wrap:!0,children:null===t||void 0===t?void 0:t.category.map((e=>(0,l.jsx)(bn,{category:e,style:{margin:0}},e)))}),!(null===t||void 0===t||!t.socials.length)&&(0,l.jsx)(i.Space,{size:2,children:null===t||void 0===t?void 0:t.socials.map(((e,t)=>{const s=q(e);return(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:null===s||void 0===s?void 0:s.iconName}),onClick:t=>((e,t)=>{if(e.stopPropagation(),t&&Y(t))return window.open(t,"_blank")})(t,e)},t)}))})]})]})})},An=e=>(0,n.useSelector)((t=>t.launchpads[e]));function vn(e,t,s){let n=(e>t?e-t:t-e)*s;return e>t?e-n:e+n}const Tn=(e,t=1e4)=>{const s=An(e),[n,a]=(0,r.useState)((new Date).getTime()/1e3);(0,r.useEffect)((()=>{let e=setInterval((()=>{a((new Date).getTime()/1e3)}),t);return()=>clearInterval(e)}),[t]);return(0,r.useMemo)((()=>{let e=s.startTime.toNumber(),t=s.endTime.toNumber(),a=s.startWeights[0].toNumber(),r=s.startWeights[1].toNumber(),o=s.endWeights[0].toNumber(),i=s.endWeights[1].toNumber(),l=(n-e)/(t-e);return[vn(a,o,l),vn(r,i,l)]}),[n,s.endTime,s.endWeights,s.startTime,s.startWeights])},Sn=()=>(0,r.useCallback)(((e,t,s,n,a)=>{const r=tt.utilsBN.toNumber(e)+tt.utilsBN.toNumber(a),o=tt.utilsBN.toNumber(e)/r,i=tt.utilsBN.toNumber(a)/r,l=tt.utilsBN.toNumber(t);return o*tt.utilsBN.toNumber(n)*s/(l*i)}),[]),kn=()=>{const e=(0,n.useSelector)((e=>e.cheques)),t=(0,n.useSelector)((e=>e.launchpads)),s=(0,r.useCallback)(((s,n)=>{const{startReserves:a}=t[s];let r=new h.BN(0),o=new h.BN(0);for(const t in e){const{createAt:a,askAmount:i,bidAmount:l,launchpad:c}=e[t];c.toBase58()===s&&(1e3*a.toNumber()>n||(o=o.add(i),r=o.add(l)))}return[a[0].sub(o),a[1].add(r)]}),[e,t]);return s};function Nn(e,t,s){let n=(e>t?e-t:t-e)*s;return e>t?e-n:e+n}const Bn=()=>{const e=(0,n.useSelector)((e=>e.launchpads));return(0,r.useCallback)(((t,s="",n=[0,0],a=[0,0],r=0,o=0)=>{const i=e[s];let l=s?i.startTime.toNumber():r,c=s?i.endTime.toNumber():o,d=s?i.startWeights[0].toNumber():n[0].toNumber(),u=s?i.startWeights[1].toNumber():n[1].toNumber(),p=s?i.endWeights[0].toNumber():a[0].toNumber(),h=s?i.endWeights[1].toNumber():a[1].toNumber(),m=(t/1e3-l)/(c-l);return[Nn(d,p,m),Nn(u,h,m)]}),[e])},Rn=e=>{const[t,s]=(0,r.useState)(0),{launchpadData:o}=hn(e),i=(0,n.useSelector)((e=>e.pools)),l=Tn(e,5e3),c=Sn(),d=kn(),u=Bn(),p=(0,r.useCallback)((async()=>{const{pool:t,endTime:n}=o,{reserves:r}=i[t.toBase58()],p=await a.tokenProvider.getPrice(o.stableMint)||0;let h=r,m=l;(h[0].isZero()||h[1].isZero())&&(m=u(1e3*n.toNumber(),e),h=d(e,1e3*n.toNumber()));const x=c(tt.utilsBN.decimalize(m[0],9),h[0],p,h[1],tt.utilsBN.decimalize(m[1],9));return s(x)}),[o,i,l,c,u,e,d]);return(0,os.Z)(p,500,[p]),(0,r.useEffect)((()=>{p()}),[p]),t},Mn=({direction:e="row",launchpadAddress:t})=>{const s=Rn(t);return(0,l.jsxs)(i.Row,{gutter:[12,12],style:{flexFlow:e},children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Price"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Text,{children:["$",a.util.numeric(s).format("0,0.[000]")," "]})})]})},zn=({launchpadAddress:e,style:t})=>{const{metadata:s,launchpadData:{authority:n}}=hn(e),r=(0,a.useWalletAddress)(),{pushHistory:o}=Gt(),c=n.toBase58()===r;return(0,l.jsxs)(i.Row,{className:"project-card",onClick:()=>o("/launchpad-details",{launchpadAddress:e}),children:[(0,l.jsx)(i.Col,{span:24,className:"project-card_header",children:(0,l.jsx)(i.Spin,{spinning:!s,children:(0,l.jsx)(i.Image,{style:{aspectRatio:"16/9",objectFit:"cover"},src:null===s||void 0===s?void 0:s.coverPhoto,preview:!1})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Card,{className:"project-card_body",style:{...t},children:(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[24,24],wrap:!1,justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(Cn,{launchpadAddress:e})}),c&&(0,l.jsx)(i.Col,{children:(0,l.jsx)(p.Z,{className:"owner",name:"person-outline"})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(jn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Mn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(fn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(wn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Paragraph,{ellipsis:{rows:2},style:{margin:0},type:"secondary",children:null===s||void 0===s?void 0:s.description})})]})})})]})},In=({launchpadAddress:e})=>{const{pushHistory:t}=Gt(),s=(0,a.useWidth)(),n=yn(e),r=s<983?"row":"column";return(0,l.jsx)(i.Card,{hoverable:!0,style:{cursor:"pointer"},onClick:()=>t("/launchpad-details",{launchpadAddress:e}),className:"completed-card",children:(0,l.jsxs)(i.Row,{gutter:[8,8],align:"middle",children:[(0,l.jsx)(i.Col,{sm:24,xs:24,md:24,lg:8,children:(0,l.jsx)(Cn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{sm:24,xs:24,md:24,lg:16,children:(0,l.jsxs)(i.Row,{gutter:[8,8],style:{height:"100%"},children:[(0,l.jsx)(i.Col,{xs:24,sm:24,md:24,lg:8,children:(0,l.jsxs)(i.Row,{gutter:[12,12],style:{flexFlow:r},children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Participants"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:n.totalUsers})})]})}),(0,l.jsx)(i.Col,{xs:24,sm:24,md:24,lg:8,children:(0,l.jsx)(Mn,{launchpadAddress:e,direction:r})}),(0,l.jsx)(i.Col,{xs:24,sm:24,md:24,lg:8,children:(0,l.jsx)(wn,{launchpadAddress:e,isDetail:!0,direction:r})})]})})]})})},Pn=e=>{const t=(0,n.useSelector)((e=>e.launchpads));return(0,r.useMemo)((()=>{const s=[],n=Object.keys(t).filter((e=>!t[e].state.uninitialized));if(n.sort(((e,s)=>{const n=t[e].startTime.toNumber();return t[s].startTime.toNumber()-n})),!e)return n;for(const a of n){const n=t[a];let r=!0;const o=1e3*n.startTime.toNumber(),i=1e3*n.endTime.toNumber(),l=Date.now();switch(e){case C.active:(o>l||i<l)&&(r=!1);break;case C.upcoming:(o<l||i<l)&&(r=!1);break;case C.completed:i>=l&&(r=!1)}r&&s.push(a)}return s}),[t,e])},Dn=()=>{const{getQuery:e,pushHistory:t}=Gt(),s=e("state")||"",n=Pn(s),a=s===C.completed,r=s===C.upcoming;return(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{xs:24,sm:24,md:20,lg:18,children:(0,l.jsxs)(i.Row,{gutter:[0,18],id:"all-launchpad",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{onClick:()=>t("/launchpad"),icon:(0,l.jsx)(p.Z,{name:"chevron-back-outline"}),type:"text",children:"Back"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:16,align:"center",children:[(0,l.jsxs)(i.Typography.Title,{level:2,children:["All ",s," launchpad"]}),(0,l.jsx)(i.Typography.Text,{className:"amount-launchpad",children:n.length})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[12,12],children:n.map((e=>(0,l.jsx)(i.Col,{xs:24,md:a?24:12,children:a?(0,l.jsx)(In,{launchpadAddress:e}):(0,l.jsx)(zn,{style:{minHeight:r?344:404},launchpadAddress:e})},e)))})}),(0,l.jsx)(i.Col,{span:24})]})})})};var Ln=s(88479);const Zn=()=>{const{pushHistory:e}=Gt();return(0,l.jsx)(i.Card,{className:"banner",bordered:!1,children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Typography.Title,{style:{color:"#F3F3F5",fontWeight:800},children:["The"," ",(0,l.jsx)("span",{style:{color:"#081438"},children:"Liquidity Bootstrapping Launchpad"}),(0,l.jsx)("br",{})," for new projects on Solana"]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{style:{color:"#CED0D7",fontSize:20},children:"Full support in project incubation"})}),(0,l.jsx)(i.Col,{span:24}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[8,8],justify:"center",children:[(0,l.jsx)(i.Col,{xs:{order:2},sm:{order:1},md:{order:1},children:(0,l.jsx)(Ln.PopupButton,{id:"iWsRUCat",style:{minWidth:176},className:"balansol-btn balansol-btn-default balansol-btn-lg balansol-btn-background-ghost",children:"Contact us"})}),(0,l.jsx)(i.Col,{xs:{order:1},sm:{order:2},md:{order:2},children:(0,l.jsx)(i.Button,{onClick:()=>e("/launchpad-create"),size:"large",type:"primary",children:"Create a launchpad"})})]})})]})})},Fn=({state:e})=>{const t=Pn(e),{pushHistory:s}=Gt(),n=e===C.completed,a=e===C.upcoming,r=n?5:2;return(0,l.jsxs)(i.Row,{gutter:[0,8],id:"launchpad",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{size:16,align:"center",children:[(0,l.jsx)(i.Typography.Title,{level:2,style:{textTransform:"capitalize"},children:e}),(0,l.jsx)(i.Typography.Text,{className:"amount-launchpad",type:"success",children:t.length})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Button,{onClick:()=>s("/launchpad-all",{state:e}),type:"link",disabled:!t.length,style:{padding:4},children:"View all"})})]})}),(0,l.jsx)(i.Col,{span:24,children:t.length?(0,l.jsx)(i.Row,{gutter:[24,24],children:t.slice(0,r).map((e=>(0,l.jsx)(i.Col,{md:24,lg:n?24:12,children:n?(0,l.jsx)(In,{launchpadAddress:e}):(0,l.jsx)(zn,{style:{minHeight:a?344:404},launchpadAddress:e})},e)))}):(0,l.jsx)(i.Empty,{description:`No ${e} launchpads`})})]})},{Panel:En}=i.Collapse,On=[{question:"What is special about Liquidity Bootstrapping Pool (LBP)?",answer:"LBP is one of the uses of Smart Pool in Balancer. It is well suited for projects that want to distribute their tokens to the community in a fair manner. At the same time, creating a high level of liquidity with a low initial cost."},{question:"Have any bots front-run?",answer:"Prevent bot front-run so participants have a higher chance of buying tokens than in other ways."},{question:"Do I have to pay any fees to purchase tokens?",answer:"Yes, it is a tax fee (0.05%). It is the cost to help the development team maintain and stabilize the system."},{question:"What difference between the Token price and the Avg. purchased price?",answer:"The token price is the price at that time of the project. It will have a quick increase in a short time when buying demand appears and then continue to decrease or move sideways. While the Avg. purchased price is based on the average of all purchased users."},{question:"When can I claim the purchased token?",answer:"The tokens you bought will be locked while the launchpad is active, you can claim your tokens after it ends."},{question:"After the launchpad is completed, what can I do with the purchased tokens?",answer:"After the launchpad is completed, the launchpad owner will create a pool based on the assets raised, you can deposit to this pool to get the corresponding reward."}],Wn=()=>(0,l.jsxs)(i.Row,{justify:"center",gutter:[0,32],children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Title,{children:"FAQ"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Collapse,{defaultActiveKey:["0"],bordered:!1,expandIconPosition:"end",ghost:!0,children:On.map(((e,t)=>(0,l.jsx)(En,{header:(0,l.jsx)(i.Typography.Text,{children:`${t+1}. ${e.question}`}),children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:e.answer})},t)))})})]}),Vn=()=>{const{pushHistory:e}=Gt();return(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{xs:24,sm:24,md:20,lg:18,children:(0,l.jsxs)(i.Row,{gutter:[0,48],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Zn,{})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[0,8],children:[(0,l.jsx)(i.Col,{span:24,style:{textAlign:"right"},children:(0,l.jsx)(i.Tooltip,{title:"View your purchased",children:(0,l.jsx)(i.Button,{icon:(0,l.jsx)(p.Z,{name:"bag-handle-outline"}),onClick:()=>e("/launchpad-your-purchased"),ghost:!0})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Fn,{state:C.active})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Fn,{state:C.upcoming})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Fn,{state:C.completed})}),(0,l.jsx)(i.Col,{span:24})," ",(0,l.jsx)(i.Col,{span:24,style:{textAlign:"center"},children:(0,l.jsxs)(i.Space,{direction:"vertical",size:24,children:[(0,l.jsx)(i.Typography.Title,{children:"Ready to launch your project?"}),(0,l.jsx)(Ln.PopupButton,{id:"iWsRUCat",className:"balansol-btn balansol-btn-primary balansol-btn-lg",children:"Apply now"})]})}),(0,l.jsx)(i.Col,{span:24})," ",(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Wn,{})}),(0,l.jsx)(i.Col,{span:24})," "]})})})};var Yn=s(44994);const qn=({socials:e,onChangeSocials:t})=>(0,l.jsxs)(i.Row,{gutter:[8,8],children:[e.map(((s,n)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{style:{width:"100%"},className:"input-vc",children:[(0,l.jsx)(i.Input,{value:s,placeholder:"Input link",style:{width:"100%"},onChange:s=>((s,n)=>{const a=[...e];return a[n]=s,t(a)})(s.target.value,n)}),0!==n&&(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:"remove-circle-outline"}),onClick:()=>(s=>{const n=[...e];return n.splice(s,1),t(n)})(n)})]})},n))),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{size:"large",block:!0,type:"dashed",icon:(0,l.jsx)(p.Z,{name:"add-outline"}),onClick:()=>{const s=[...e];return s.push(""),t(s)},children:"Add more"})})]}),Gn=({label:e,children:t})=>(0,l.jsxs)(i.Row,{gutter:[8,8],children:[(0,l.jsx)(i.Col,{span:24,children:e}),(0,l.jsx)(i.Col,{span:24,children:t})]}),Kn=({children:e,onRemove:t,iconSize:s=14})=>(0,l.jsxs)("div",{className:"avatar-uploaded",style:{height:"100%"},children:[(0,l.jsx)("div",{className:"avatar",style:{height:"100%"},children:e}),(0,l.jsx)(p.Z,{onClick:t,className:"remove-icon",name:"trash-outline",style:{fontSize:s}})]}),Un=({vCs:e,onChangeVC:t})=>{const s=async(s,n)=>{const a={...e[n],logo:s},r=[...e];return r[n]=a,t(r)};return(0,l.jsxs)(i.Row,{gutter:[8,8],children:[e.map((({link:n,logo:a},r)=>(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:12,align:"middle",children:[(0,l.jsx)(i.Col,{xs:4,md:2,children:a?(0,l.jsx)(Kn,{onRemove:()=>(s=>{const n=[...e];return n[s]={...n[s],logo:""},t(n)})(r),children:(0,l.jsx)(i.Avatar,{size:40,src:a})}):(0,l.jsx)(i.Upload,{className:"upload-vc",accept:"image/png,image/jpg,image/webp",maxCount:1,onChange:e=>((e,t)=>{const{fileList:n}=e,a=n[0].originFileObj;V(a,s,t)})(e,r),children:(0,l.jsx)(i.Button,{size:"large",block:!0,type:"dashed",icon:(0,l.jsx)(p.Z,{name:"attach-outline"})})})}),(0,l.jsx)(i.Col,{xs:20,md:22,children:(0,l.jsxs)(i.Space,{style:{width:"100%"},className:"input-vc",children:[(0,l.jsx)(i.Input,{value:n,placeholder:"Input name",style:{width:"100%"},onChange:s=>((s,n)=>{const a=[...e];return a[n]={...a[n],link:s},t(a)})(s.target.value,r)}),0!==r&&(0,l.jsx)(i.Button,{type:"text",icon:(0,l.jsx)(p.Z,{name:"remove-circle-outline"}),onClick:()=>(s=>{const n=[...e];return n.splice(s,1),t(n)})(r)})]})})]})},r))),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{size:"large",block:!0,type:"dashed",icon:(0,l.jsx)(p.Z,{name:"add-outline"}),onClick:()=>{const s=[...e];return s.push({logo:"",link:""}),t(s)},children:"Add more"})})]})},Hn=({setStep:e})=>{const[t,s]=aa(),{pushHistory:n}=Gt(),{description:a,projectName:o,socials:c}=t.projectInfo,{whitepaper:d,vCs:u,github:p,website:h}=t.projectInfo,m=(e,n)=>{const a={...t.projectInfo,[e]:n};return s({...t,projectInfo:a})},x=(0,r.useMemo)((()=>{if(c.length>1)for(const e of c)if(!Y(e))return!0;return!o||!a||!h||!Y(h)||!d||!Y(d)||!p||!Y(p)||o.length>32||a.length>150}),[a,p,o,c,h,d]);return(0,l.jsxs)(i.Row,{gutter:[20,20],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:(0,l.jsxs)(i.Row,{justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:"Project name"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,l.jsx)("span",{style:{color:o.length>32?"red":""},children:o.length}),"/32 characters"]})})]}),children:(0,l.jsx)(i.Input,{placeholder:"Input your project name",value:o,onChange:e=>m("projectName",e.target.value)})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:(0,l.jsxs)(i.Row,{justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:"Description"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,l.jsx)("span",{style:{color:a.length>150?"red":""},children:a.length}),"/150 characters"]})})]}),children:(0,l.jsx)(i.Input.TextArea,{value:a,rows:4,placeholder:"Summarize about your project...",className:"description",onChange:e=>m("description",e.target.value)})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:"Website",children:(0,l.jsx)(i.Input,{placeholder:"Input link",value:h,onChange:e=>m("website",e.target.value)})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:"Whitepaper",children:(0,l.jsx)(i.Input,{placeholder:"Input link",value:d,onChange:e=>m("whitepaper",e.target.value)})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:"Github",children:(0,l.jsx)(i.Input,{placeholder:"Input link",value:p,onChange:e=>m("github",e.target.value)})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:"Leading venture capital (Optional)",children:(0,l.jsx)(Un,{onChangeVC:e=>{const n={...t},a={...t.projectInfo,vCs:e};return s({...n,projectInfo:a})},vCs:u})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:"Socials (Optional)",children:(0,l.jsx)(qn,{onChangeSocials:e=>{const n={...t},a={...t.projectInfo,socials:e};return s({...n,projectInfo:a})},socials:c})})}),(0,l.jsx)(i.Col,{span:24,style:{marginTop:12},children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{onClick:()=>n("/launchpad"),block:!0,ghost:!0,size:"large",children:"Cancel"})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{disabled:x,onClick:async()=>e(A.projectPhoto),block:!0,type:"primary",size:"large",children:"Continue"})})]})})]})},Jn=({setStep:e})=>{const[t,s]=aa(),n=t.projectInfo.coverPhoto,a=async e=>{const n={...t.projectInfo,coverPhoto:e};return s({...t,projectInfo:n})};return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{children:"The cover photo on your project will help create more impressions and attract users."})}),(0,l.jsx)(i.Col,{span:24,style:{minHeight:240},className:"project-photo",children:n?(0,l.jsx)(Kn,{iconSize:32,onRemove:()=>a(""),children:(0,l.jsx)(i.Image,{src:n.toString(),preview:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",aspectRatio:"16/9"},className:"cover-photo"})}):(0,l.jsx)(i.Upload.Dragger,{accept:"image/png,image/jpg,image/webp",onChange:e=>{const{fileList:t}=e,s=t[0].originFileObj;V(s,a,0)},className:"cover-photo",children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(p.Z,{style:{fontSize:40},name:"cloud-upload-outline"}),(0,l.jsxs)(i.Space,{direction:"vertical",size:0,children:[(0,l.jsx)(i.Typography.Text,{children:"Click or drag image to upload"}),(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Should be 800x450px with JPG, PNG file."})]})]})})}),(0,l.jsx)(i.Col,{span:24}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{onClick:()=>e(A.projectInfo),block:!0,ghost:!0,size:"large",children:"Back"})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{onClick:()=>e(A.configuration),block:!0,type:"primary",size:"large",disabled:!n,children:"Continue"})})]})})]})};var $n=s(52063);be.D([ve.N,Te.N,$n.N,ke.N,Se.N,Ie.N]);const Qn=(e,t,s)=>{const n=t.map((e=>Ze()(e).format("DD/MM HH:mm")));return{legend:{data:["Estimated price"],textStyle:{color:s.color}},tooltip:{trigger:"item",formatter:function(e){return`<div style="min-width: 150px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Price:</span> <span style="font-size: 16px; font-weight: 700">$${a.util.numeric(e.value).format("0,0.[000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Date:</span> <span style="font-size: 16px; font-weight: 700">${e.name}</span></span></div>`}},xAxis:{type:"category",data:n,axisLine:{lineStyle:{color:s.color}}},yAxis:{type:"value",axisLine:{lineStyle:{color:s.color}},splitLine:{lineStyle:{color:[s.lineColor]}}},series:[{name:"Estimated price",data:e,type:"line",smooth:!0,lineStyle:{normal:{width:2,type:"dashed"}}}]}},Xn={light:{color:"#081438",lineColor:"#CED0D7"},dark:{color:"#F3F3F5",lineColor:"#394360"}},_n=({startPrice:e,endPrice:t,balanceA:s,balanceB:n,baseMint:o,startTime:i,endTime:c,mint:d})=>{const[u,p]=(0,r.useState)(0),h=Sn(),m=Bn(),x=(0,a.useMintDecimals)({mintAddress:d})||0,j=(0,a.useMintDecimals)({mintAddress:o})||0,g=(0,a.useTheme)(),y=(0,r.useCallback)(((e,t,s,n)=>{const a=e*t/(e*t+s*n),r=1-a;return[tt.utilsBN.decimalize(a,9),tt.utilsBN.decimalize(r,9)]}),[]),f=(0,r.useMemo)((()=>{const e=((e,t)=>{const s=[],n=(t-e)/3;for(let a=0;a<4;a++){if(0===a){s[a]=e;continue}const t=s[s.length-1]+n;s[a]=t}return s})(i,c);return e}),[c,i]),w=(0,r.useMemo)((()=>{let a=[];const r=y(e,s,u,n),o=y(t,s,u,n);for(const e of f){const t=m(e,"",r,o,i/1e3,c/1e3),l=h(tt.utilsBN.decimalize(t[0],9),tt.utilsBN.decimalize(s,x),u,tt.utilsBN.decimalize(n,9),tt.utilsBN.decimalize(t[1],j));a.push(l)}return a}),[s,n,h,x,f,t,c,m,y,u,e,i,j]);return(0,r.useEffect)((()=>{(async()=>{if(u)return;const e=await a.tokenProvider.getPrice(o);p(e||0)})()}),[o,u]),(0,l.jsx)(we.Z,{echarts:Ce,option:Qn(w,f,Xn[g]),notMerge:!0,lazyUpdate:!0})},ea=new h.BN(5e5),ta=e=>{const t=e.label;return(0,l.jsx)(bn,{category:t})},sa=({setStep:e})=>{const[t,s]=(0,r.useState)(!1),[n,o]=aa(),{onCreateLaunchpad:c}=(()=>{const e=(0,a.useGetMintDecimals)(),t=(0,r.useCallback)(((e,t,s,n)=>{const a=e*t/(e*t+s*n),r=1-a;return{weightA:tt.utilsBN.decimalize(a,9),weightB:tt.utilsBN.decimalize(r,9)}}),[]),s=(0,r.useCallback)((async s=>{const{amount:n,mint:r,endTime:o,endPrice:i,fee:l}=s,{stableMint:c,projectInfo:d,startPrice:u,startTime:p}=s,{baseAmount:m}=d,x=h.rV.Keypair.generate(),j=[],g=[],y=await e({mintAddress:r})||0,f=await e({mintAddress:c})||0,w=tt.utilsBN.decimalize(n,y),b=tt.utilsBN.decimalize(m,f),C=await pn.methods.launchpad.set(d),A=tt.utilsBN.decimalize(l,9),v=(0,a.getAnchorProvider)();v.opts.skipPreflight=!0;const{tx:T}=await window.launchpad.initializeLaunchpad({baseAmount:b,stableMint:new h.rV.PublicKey(c),mint:new h.rV.PublicKey(r),sendAndConfirm:!0,launchpad:x});g.push(T);const S=await window.launchpad.deriveBaseMintAddress(x.publicKey),k=await a.tokenProvider.getPrice(c)||0,N=t(u,n,k,m),B=t(i,n,k,m),R=[{publicKey:r,action:Q.MintActionStates.Active,amountIn:w,weight:N.weightA},{publicKey:S,action:Q.MintActionStates.Active,amountIn:b,weight:N.weightB}],{poolAddress:M,tx:z}=await window.balansol.initializePool({fee:A,taxFee:ea,mintsConfigs:R,taxMan:Z.sol.taxmanAddress,sendAndConfirm:!0});g.push(z);const{transaction:I}=await window.balansol.initializeJoin({poolAddress:M,mint:r,amountIn:w,sendAndConfirm:!1}),{transaction:P}=await window.balansol.initializeJoin({poolAddress:M,mint:S,amountIn:b,sendAndConfirm:!1});j.push(I),j.push(P);const{tx:D}=await window.balansol.updateActions({poolAddress:M,actions:[Q.MintActionStates.AskOnly,Q.MintActionStates.BidOnly],sendAndConfirm:!1});j.push(D);const L=await window.launchpad.deriveTreasurerAddress(x.publicKey),{tx:F}=await window.balansol.transferOwnership({poolAddress:M,newOwner:L,sendAndConfirm:!1});j.push(F);const{tx:E}=await window.launchpad.activeLaunchpad({pool:new h.rV.PublicKey(M),startTime:new h.BN(p/1e3),endTime:new h.BN(o/1e3),launchpad:x.publicKey,metadata:Array.from(C.digest),endWeights:[B.weightA,B.weightB],sendAndConfirm:!1});return j.push(E),await v.sendAll(j.map((e=>({tx:e,signers:[]})))),window.notify({type:"success",description:"Initialized launchpad successfully!"})}),[e,t]);return{onCreateLaunchpad:s}})(),{stableMint:d,startPrice:u,endPrice:m,mint:x}=n,{startTime:j,endTime:g,projectInfo:y,amount:f}=n,{balance:w}=vt(x),C=(0,a.useTheme)(),{pushHistory:T}=Gt(),S=(e,t)=>o({...n,[e]:t}),k=(e,t)=>{null===t&&(t="");const s={...n.projectInfo,[e]:t};return o({...n,projectInfo:s})},N=!x||!f||!d||!y.baseAmount||!y.category.length||!j||!g||!u||!m;return(0,l.jsxs)(i.Row,{gutter:[20,20],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:(0,l.jsxs)(i.Row,{justify:"space-between",children:[(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:"Your token"})}),(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Typography.Text,{onClick:()=>S("amount",w),style:{cursor:"pointer"},className:"caption",type:"secondary",children:["Available: ",a.util.numeric(w).format("0,0.[0000]")]})})]}),children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Ht.Z,{style:{background:"dark"===C?"#142042":"#e6eaf5",width:"100%",textAlign:"left",height:40,paddingLeft:12},value:x,placeholder:"Select a token",onChange:e=>S("mint",e)})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.InputNumber,{onChange:e=>S("amount",e),value:f||void 0,placeholder:"Input total raise"})})]})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{children:"Purchase token"}),(0,l.jsx)(i.Typography.Text,{className:"caption",type:"secondary",children:"Should be a stablecoin"})]}),children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Ht.Z,{style:{width:"100%",textAlign:"left",height:40,paddingLeft:12,background:"dark"===C?"#142042":"#e6eaf5"},placeholder:"Select a token",value:d,onChange:e=>S("stableMint",e)})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.InputNumber,{placeholder:"Input fundraising goal",onChange:e=>k("baseAmount",e),value:y.baseAmount?y.baseAmount:void 0})})]})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Gn,{label:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{children:"Type of project"}),(0,l.jsx)(i.Typography.Text,{className:"caption",type:"secondary",children:"E.g. defi, gamefi, lending, DAO... (maximum 4 tags)"})]}),children:(0,l.jsx)(i.Select,{className:"select-category",mode:"multiple",showArrow:!0,style:{width:"100%",paddingLeft:8},tagRender:ta,placeholder:"Select types",onChange:e=>k("category",e),children:Object.keys(v).map((e=>(0,l.jsx)(i.Select.Option,{disabled:y.category.length>=4&&!y.category.includes(e),children:e},e)))})})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Gn,{label:"Start price",children:(0,l.jsx)(i.InputNumber,{placeholder:"Input price",onChange:e=>S("startPrice",e),value:u||void 0,className:"input-price"})})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Gn,{label:"Floor price",children:(0,l.jsx)(i.InputNumber,{placeholder:"Input price",onChange:e=>S("endPrice",e),value:m||void 0,className:"input-price"})})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Gn,{label:"Start Time",children:(0,l.jsx)(i.DatePicker,{placeholder:"Select time",suffixIcon:(0,l.jsx)(p.Z,{name:"time-outline"}),className:"date-option",onChange:e=>S("startTime",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:j?Ze()(j):Ze()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:b,disabledDate:e=>e<Ze()().subtract(1,"minutes")})})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(Gn,{label:"End Time",children:(0,l.jsx)(i.DatePicker,{placeholder:"Select time",suffixIcon:(0,l.jsx)(p.Z,{name:"time-outline"}),className:"date-option",onChange:e=>S("endTime",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:g?Ze()(g):Ze()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:b,disabledDate:e=>e&&e>Ze()(j).add(7,"days")||e<Ze()()})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[8,8],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Text,{children:"Preview"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(_n,{startTime:j,endTime:g,startPrice:u,endPrice:m,mint:x,baseMint:d,balanceA:f,balanceB:y.baseAmount})})]})}),(0,l.jsx)(i.Col,{span:24,style:{marginTop:12},children:(0,l.jsxs)(i.Row,{gutter:[12,12],children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{onClick:()=>e(A.projectPhoto),block:!0,ghost:!0,size:"large",children:"Back"})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsx)(i.Button,{disabled:N,onClick:async()=>{try{s(!0);const e=JSON.parse(JSON.stringify(n)),t=[];for(const s of n.projectInfo.socials)s&&t.push(s);return e.projectInfo.socials=t,await c(e),o(na),T("/launchpad")}catch(e){(0,Ms.cB)(e)}finally{s(!1)}},block:!0,type:"primary",size:"large",loading:t,children:"Create"})})]})})]})},na={projectInfo:{projectName:"",description:"",website:"",github:"",whitepaper:"",vCs:[{logo:"",link:""}],socials:[""],coverPhoto:"",category:[],baseAmount:0},mint:"",stableMint:"",amount:0,fee:0,startPrice:0,endPrice:0,startTime:Date.now(),endTime:Date.now()+2592e5},aa=(0,Yn.r)(na),ra=()=>{const[e,t]=(0,r.useState)(A.projectInfo),s=(0,r.useMemo)((()=>{switch(e){case A.projectInfo:return(0,l.jsx)(Hn,{setStep:t});case A.projectPhoto:return(0,l.jsx)(Jn,{setStep:t});case A.configuration:return(0,l.jsx)(sa,{setStep:t})}}),[e]);return(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{xs:24,sm:20,md:18,lg:12,children:(0,l.jsx)(i.Card,{style:{marginBottom:24},children:(0,l.jsxs)(i.Row,{gutter:[32,32],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Steps,{size:"small",current:e,direction:"horizontal",children:[(0,l.jsx)(i.Steps.Step,{title:"Project info"}),(0,l.jsx)(i.Steps.Step,{title:"Cover photo"}),(0,l.jsx)(i.Steps.Step,{title:"Configuration"})]})}),(0,l.jsx)(i.Col,{span:24,children:s})]})})})})},oa=e=>{const t=An(e);return(0,n.useSelector)((e=>e.pools[t.pool.toBase58()]))},ia=({launchpadAddress:e})=>{const[t,s]=(0,r.useState)(0),[o,c]=(0,r.useState)(new h.BN(0)),d=An(e),u=oa(e),{onBuyToken:p,loading:m}=(()=>{const[e,t]=(0,r.useState)(!1),s=(0,n.useSelector)((e=>e.launchpads)),o=(0,a.useGetMintDecimals)(),i=(0,r.useCallback)((async e=>{try{t(!0);const{launchpadAddress:n,amount:r,limit:i}=e,l=s[n],c=new h.rV.PublicKey(n),d=h.rV.Keypair.generate(),u=new h.rV.Transaction,p=await o({mintAddress:l.mint.toBase58()})||0,m=tt.utilsBN.decimalize(r,p),x=await window.launchpad.printBaseMint({launchpad:c,amount:m,sendAndConfirm:!1,cheque:d});u.add(x.tx);const j=await window.launchpad.buyLaunchpad({launchpad:c,bidAmount:m,limit:i,cheque:d.publicKey,sendAndConfirm:!1});u.add(j.tx);const g=(0,a.getAnchorProvider)();return g.opts.skipPreflight=!0,await g.sendAndConfirm(u,x.signers),window.notify({type:"success",description:"Bought token successfully!"})}catch(n){E(n)}finally{t(!1)}}),[o,s]);return{onBuyToken:i,loading:e}})(),{balance:x}=vt(d.stableMint.toBase58()),j=Tn(e,5e3),g=(0,a.useGetMintDecimals)(),y=Date.now()/1e3>d.startTime.toNumber(),f=(0,r.useCallback)((async()=>{const e=await g({mintAddress:d.stableMint.toBase58()}),s=tt.utilsBN.decimalize(t,e),n=j[0]+j[1],a=le(s,u.reserves[0],u.reserves[1],j[0]/n,j[1]/n,u.fee.add(u.taxFee));return c(a)}),[t,j,g,d.stableMint,u]);return(0,os.Z)(f,500,[f]),(0,l.jsx)(i.Card,{children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"You pay"}),(0,l.jsx)(i.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,l.jsx)(Nt,{amount:t,selectedMint:d.stableMint.toBase58(),onChangeAmount:e=>s(Number(e)),mintSelection:(0,l.jsxs)(i.Space,{className:"mint-display",children:[(0,l.jsx)(_.Z,{mintAddress:d.stableMint}),(0,l.jsx)(ee.Z,{mintAddress:d.stableMint})]})})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"You receive"}),(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{className:"mint-display",children:[(0,l.jsx)(_.Z,{mintAddress:d.mint}),(0,l.jsx)(ee.Z,{mintAddress:d.mint})]})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Title,{level:3,children:(0,l.jsx)(Dt.Z,{mintAddress:d.mint,amount:o})})})]})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Rate"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{children:"1"}),(0,l.jsx)(ee.Z,{mintAddress:d.mint}),(0,l.jsx)(i.Typography.Text,{children:"="}),(0,l.jsx)(Dt.Z,{mintAddress:d.mint,amount:o,formatter:e=>a.util.numeric(Number(e)?Number(t)/Number(e):0).format("0.[0000]")}),(0,l.jsx)(ee.Z,{mintAddress:d.stableMint})]})})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{size:"large",type:"primary",block:!0,onClick:()=>{t&&p({amount:t,launchpadAddress:e})},loading:m,disabled:!t||t>x||!y,children:"Purchase"})})]})})};be.D([ve.N,Te.N,$n.N,ke.N,Se.N,Ie.N]);const la={light:{color:"#081438",lineColor:"#CED0D7"},dark:{color:"#F3F3F5",lineColor:"#394360"}},ca=(e,t,s)=>{const n=t.map((e=>Ze()(e).format("DD/MM HH:mm")));return{legend:{data:["Real price","Estimated price"],textStyle:{color:s.color}},tooltip:{trigger:"item",formatter:function(e){return`<div style="min-width: 150px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Price:</span> <span style="font-size: 16px; font-weight: 700">$${a.util.numeric(e.value).format("0,0.[000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Date:</span> <span style="font-size: 16px; font-weight: 700">${e.name}</span></span></div>`}},xAxis:{type:"category",data:n,axisLine:{lineStyle:{color:s.color}}},yAxis:{type:"value",axisLine:{lineStyle:{color:s.color}},splitLine:{lineStyle:{color:[s.lineColor]}}},series:[{name:"Estimated price",data:e.estimateResult,type:"line",smooth:!0,lineStyle:{normal:{width:2,type:"dashed"}}},{name:"Real price",data:e.currentResult,type:"line",smooth:!0,lineStyle:{normal:{width:2}}}]}},da=({launchpadAddress:e})=>{const[t,s]=(0,r.useState)(0),{launchpadData:n}=hn(e),o=Sn(),i=Bn(),c=kn(),d=(0,a.useTheme)(),u=(0,r.useMemo)((()=>{const{startTime:e,endTime:t}=n;return((e,t)=>{const s=[],n=(t-e)/20;for(let a=0;a<=20;a++){if(0===a){s[a]=e;continue}const t=s[s.length-1]+n;s[a]=t}return s})(1e3*e.toNumber(),1e3*t.toNumber())}),[n]),p=(0,r.useMemo)((()=>{const s=[],n=[];for(const r of u){const a=i(r,e),l=c(e,r),d=o(tt.utilsBN.decimalize(a[0],9),l[0],t,l[1],tt.utilsBN.decimalize(a[1],9));r>=Date.now()?(n.push(d),s.push(null)):(s.push(d),n.push(null))}let a=0;for(let e=0;e<s.length;e++)if(!s[e]){a=s[e-1]||0;break}for(let e=0;e<n.length;e++)if(n[e]){n[e-1]=a;break}return{currentResult:s,estimateResult:n}}),[o,u,c,i,e,t]);return(0,r.useEffect)((()=>{(async()=>{if(t||!e)return;const r=await a.tokenProvider.getPrice(n.stableMint);s(r||0)})()}),[e,n.stableMint,t]),(0,l.jsx)(we.Z,{echarts:Ce,option:ca(p,u,la[d]),notMerge:!0,lazyUpdate:!0})},ua=({launchpadAddress:e,amount:t,isBaseAmount:s=!1})=>{const{launchpadData:{stableMint:n,mint:a}}=hn(e),r=s?n:a;return(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(Dt.Z,{amount:t,mintAddress:r}),(0,l.jsx)(ee.Z,{mintAddress:r})]})},pa=[{title:"TIME",dataIndex:"createAt",render:e=>(0,l.jsx)(i.Typography.Text,{children:Ze()(1e3*e.toNumber()).format(b)})},{title:"ACCOUNT",dataIndex:"authority",render:e=>(0,l.jsx)(i.Typography.Text,{underline:!0,onClick:()=>window.open(a.util.explorer(e.toBase58()),"_blank"),style:{cursor:"pointer"},type:"success",children:a.util.shortenAddress(e.toBase58())})},{title:"PAY",dataIndex:"bidAmount",render:(e,{launchpad:t})=>(0,l.jsx)(ua,{amount:e,launchpadAddress:t.toBase58(),isBaseAmount:!0})},{title:"RECEIVE",dataIndex:"askAmount",render:(e,{launchpad:t})=>(0,l.jsx)(ua,{amount:e,launchpadAddress:t.toBase58()})}],ha=({launchpadAddress:e})=>{const[t,s]=(0,r.useState)(4),a=(0,n.useSelector)((e=>e.cheques)),o=gn(e),c=(0,r.useMemo)((()=>o.map((e=>a[e])).sort(((e,t)=>t.createAt.toNumber()-e.createAt.toNumber()))),[a,o]);return(0,l.jsxs)(i.Row,{gutter:[0,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Typography.Title,{level:5,children:"Recent transactions"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Table,{columns:pa,dataSource:c.slice(0,t),rowKey:e=>e.createAt.toString(),pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})}),(0,l.jsx)(i.Col,{span:24,style:{textAlign:"center"},children:(0,l.jsx)(i.Button,{disabled:t>=c.length,onClick:()=>s(t+4),ghost:!0,children:"View more"})})]})},ma=({launchpadAddress:e})=>{const t=(0,a.useTheme)(),s=Rn(e),o=(e=>{const t=(0,n.useSelector)((e=>e.cheques)),s=gn(e),a=(0,r.useCallback)((e=>{const{askAmount:s,bidAmount:n}=t[e];return s.toNumber()?n.toNumber()/s.toNumber():0}),[t]);return(0,r.useMemo)((()=>{if(!s.length)return 0;let e=0;for(const t of s)e+=a(t);return e/s.length}),[s,a])})(e);return(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(Cn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Card,{bordered:!1,style:{background:"dark"===t?"#394360":"#ffffff",borderRadius:20},bodyStyle:{padding:"12px 16px"},children:(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{span:12,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Token price"}),(0,l.jsxs)(i.Typography.Title,{level:4,type:"success",children:["$",a.util.numeric(s).format("0,0.[000]")]})]})}),(0,l.jsx)(i.Col,{span:12,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:(0,l.jsxs)(i.Space,{className:"align-middle-icon",align:"center",children:["Avg. purchase price",(0,l.jsx)(i.Tooltip,{title:"This price is based on the average of all purchased users.",children:(0,l.jsx)(p.Z,{name:"information-circle-outline",style:{fontSize:24}})})]})}),(0,l.jsxs)(i.Typography.Title,{level:4,type:"success",children:["$",a.util.numeric(o).format("0,0.[000]")]})]})})]})})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(da,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ha,{launchpadAddress:e})})]})},xa=({launchpadAddress:e})=>{const[t,s]=(0,r.useState)(!1),n=An(e),o=oa(e),{supply:c}=Bt(o.mintLpt),d=Date.now()/1e3>=n.endTime.toNumber(),u=(0,r.useMemo)((()=>{const{stableMint:e,mint:t}=n,{reserves:s}=o,a=s[1].gt(n.startReserves[1])?s[1].sub(n.startReserves[1]):new h.BN(0);return[{mint:t,amount:s[0]},{mint:e,amount:a}]}),[n,o]);return(0,l.jsxs)(i.Row,{gutter:[0,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:(0,l.jsx)(p.Z,{name:"information-circle-outline"})}),(0,l.jsx)(i.Typography.Text,{type:"secondary",className:"caption",children:"The launchpad had completed, you can withdraw your tokens."})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",className:"caption",children:"Your Assets"}),(0,l.jsx)(i.Row,{children:u.map((({mint:e,amount:t})=>(0,l.jsx)(i.Col,{span:12,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(_.Z,{mintAddress:e.toBase58()}),(0,l.jsx)(Dt.Z,{amount:t,mintAddress:e}),(0,l.jsx)(ee.Z,{mintAddress:e})]})},e.toBase58())))})]})}),(0,l.jsx)(i.Col,{span:24}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{block:!0,type:"primary",size:"large",onClick:async()=>{s(!0);try{let{tx:t}=await window.launchpad.claim({launchpad:new h.rV.PublicKey(e),sendAndConfirm:!1});const{transaction:s}=await window.balansol.createRemoveLiquidityTransaction(n.pool,c),r=(0,a.getAnchorProvider)(),o=await r.sendAndConfirm(t.add(s));F("Withdraw",o)}catch(t){(0,Ms.cB)(t)}finally{s(!1)}},loading:t,disabled:!d||u[0].amount.isZero(),children:"Withdraw"})})]})},ja=({launchpadAddress:e})=>{const{metadata:t}=hn(e),s=e=>{if(e&&Y(e))return window.open(e,"_blank")};return(0,l.jsxs)(i.Space,{style:{cursor:"pointer"},children:[(0,l.jsxs)(i.Space,{onClick:()=>s(null===t||void 0===t?void 0:t.website),children:[(0,l.jsx)(p.Z,{name:"globe-outline"}),(0,l.jsx)(i.Typography.Text,{children:"Website"}),(0,l.jsx)(i.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]}),(0,l.jsxs)(i.Space,{onClick:()=>s(null===t||void 0===t?void 0:t.whitepaper),children:[(0,l.jsx)(p.Z,{name:"book-outline"}),(0,l.jsx)(i.Typography.Text,{children:"Whitepaper"}),(0,l.jsx)(i.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]}),(0,l.jsxs)(i.Space,{onClick:()=>s(null===t||void 0===t?void 0:t.github),children:[(0,l.jsx)(p.Z,{name:"logo-github"}),(0,l.jsx)(i.Typography.Text,{children:"Github"})]})]})},ga=e=>{const[t,s]=(0,r.useState)(void 0),n=(0,a.useGetMintData)(),o=(0,r.useCallback)((async()=>{try{const{[e]:{supply:t}}=await n({mintAddress:e})||{};return s(new h.BN(t.toString()))}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{o()}),[o]),t},ya=({launchpadAddress:e})=>{const{metadata:t,launchpadData:s}=hn(e),n=s.mint.toBase58(),r=ga(n);return(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ja,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"Description"}),(0,l.jsx)(i.Typography.Paragraph,{style:{margin:0},children:null===t||void 0===t?void 0:t.description})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"Token information"}),(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsxs)(i.Typography.Text,{children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Token Name: "}),(0,l.jsx)(wt.Z,{mintAddress:n})," (",(0,l.jsx)(ee.Z,{mintAddress:n}),")"]}),(0,l.jsxs)(i.Typography.Text,{style:{cursor:"pointer"},onClick:()=>window.open(a.util.explorer(n),"_blank"),children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Token Address: "}),a.util.shortenAddress(n,6)]}),(0,l.jsxs)(i.Typography.Text,{children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Token supply: "}),(0,l.jsx)(Dt.Z,{amount:r||new h.BN(0),mintAddress:n})," ","(",(0,l.jsx)(ee.Z,{mintAddress:n}),")"]}),(0,l.jsxs)(i.Typography.Text,{children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad supply: "}),(0,l.jsx)(Dt.Z,{amount:s.startReserves[0],mintAddress:n})," ","(",(0,l.jsx)(ee.Z,{mintAddress:n}),")"]}),(0,l.jsxs)(i.Typography.Text,{children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad start time: "}),Ze()(1e3*(null===s||void 0===s?void 0:s.startTime.toNumber())).format(b)]}),(0,l.jsxs)(i.Typography.Text,{children:[(0,l.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad end time: "}),Ze()(1e3*(null===s||void 0===s?void 0:s.endTime.toNumber())).format(b)]})]})]})}),!!t&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"Social media"}),(0,l.jsx)(i.Space,{style:{cursor:"pointer"},children:t.socials.map(((e,s)=>{if(!e)return null;const n=q(e);return(0,l.jsxs)(i.Space,{onClick:()=>(e=>{if(e&&Y(e))return window.open(e,"_blank")})(e),children:[(0,l.jsx)(p.Z,{style:{fontSize:21},name:null===n||void 0===n?void 0:n.iconName}),(0,l.jsx)(i.Typography.Text,{children:null===n||void 0===n?void 0:n.websiteName}),s!==t.socials.length-1&&(0,l.jsx)(i.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]},s)}))})]})}),!!t&&!!t.vCs.length&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{direction:"vertical",children:[(0,l.jsx)(i.Typography.Title,{level:5,children:"Leading venture capital"}),(0,l.jsx)(i.Space,{style:{cursor:"pointer"},children:t.vCs.map((({link:e,logo:s},n)=>e?(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(i.Avatar,{size:21,src:s}),(0,l.jsx)(i.Typography.Text,{children:e}),n!==t.vCs.length-1&&(0,l.jsx)(i.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]},n):null))})]})})]})},fa=({launchpadAddress:e})=>{const{launchpadData:{authority:t}}=hn(e),s=(0,a.useWalletAddress)()===t.toBase58(),n=(0,r.useMemo)((()=>{const t=[{label:"Launchpad info",key:'launchpad-info"',children:(0,l.jsx)(ma,{launchpadAddress:e})},{label:"Project info",key:"project-info",children:(0,l.jsx)(ya,{launchpadAddress:e})}];return s?(t.push({label:"Manage",key:"manage",children:(0,l.jsx)(xa,{launchpadAddress:e})}),t):t}),[e,s]);return(0,l.jsx)(i.Card,{style:{marginBottom:24},children:(0,l.jsx)(i.Tabs,{items:n})})},wa=({launchpadAddress:e})=>{const[t,s]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!0),c=An(e),d=Number(c.endTime)<Date.now()/1e3,{totalAsk:u}=yn(e,!0),m=(0,r.useCallback)((async()=>{const t=await window.launchpad.deriveMasterAddress(e),s=await h.P6.token.associatedAddress({mint:c.mint,owner:t}),n=await a.splt.getAccountData(s.toBase58());o(!Number(n.amount.toString()))}),[e,c.mint]);return(0,r.useEffect)((()=>{m()}),[m]),(0,l.jsxs)(i.Row,{align:"middle",children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsxs)(i.Space,{className:"align-middle-icon",children:[(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Your bought"}),(0,l.jsx)(i.Tooltip,{title:"The tokens you bought will be locked while the launchpad is active, you can claim your tokens after it ends.",children:(0,l.jsx)(p.Z,{style:{color:"#9CA1AF",fontSize:16},name:"information-circle-outline"})})]})}),(0,l.jsx)(i.Col,{children:d?(0,l.jsx)(i.Button,{type:"primary",size:"large",onClick:async()=>{s(!0);try{let{txId:t}=await window.launchpad.redeem({launchpad:new h.rV.PublicKey(e)});F("Claim",t),o(!0)}catch(t){}finally{s(!1)}},loading:t,disabled:n,children:(0,l.jsxs)(i.Space,{size:4,children:[n?"Claimed ":"Claim ",(0,l.jsx)(Dt.Z,{mintAddress:c.mint,amount:u,formatter:"0,0.[000]"}),(0,l.jsx)(ee.Z,{mintAddress:null===c||void 0===c?void 0:c.mint.toBase58()})]})}):(0,l.jsx)(i.Typography.Title,{level:3,children:(0,l.jsxs)(i.Space,{children:[(0,l.jsx)(Dt.Z,{mintAddress:c.mint,amount:u,formatter:"0,0.[000]"}),(0,l.jsx)(ee.Z,{mintAddress:null===c||void 0===c?void 0:c.mint.toBase58()})]})})})]})},ba=({launchpadAddress:e})=>{const t=yn(e);return(0,l.jsx)(i.Card,{children:(0,l.jsxs)(i.Row,{gutter:[16,16],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(wa,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{children:[(0,l.jsx)(i.Col,{flex:"auto",children:(0,l.jsx)(i.Typography.Text,{type:"secondary",children:"Participants"})}),(0,l.jsx)(i.Col,{children:(0,l.jsx)(i.Typography.Text,{children:t.totalUsers})})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(jn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(fn,{launchpadAddress:e})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(wn,{isDetail:!0,launchpadAddress:e})})]})})},Ca=()=>{const{pushHistory:e,getQuery:t}=Gt(),s=t("launchpadAddress")||"",{launchpadData:n}=hn(s);if(!n||!s)return(0,l.jsx)(Kt,{label:"launchpad",redirect:"/launchpad"});const a=Number(n.endTime)<Date.now()/1e3;return(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{sm:24,xs:24,md:24,lg:18,children:(0,l.jsxs)(i.Row,{gutter:[0,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{onClick:()=>e("/launchpad"),type:"text",icon:(0,l.jsx)(p.Z,{name:"chevron-back-outline"}),children:"Back"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{xs:24,md:14,children:(0,l.jsx)(fa,{launchpadAddress:s})}),(0,l.jsx)(i.Col,{xs:24,md:10,children:(0,l.jsxs)(i.Row,{gutter:[0,24],children:[!a&&(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ia,{launchpadAddress:s})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(ba,{launchpadAddress:s})})]})})]})}),(0,l.jsx)(i.Col,{span:24})]})})})},Aa=()=>{const{pushHistory:e}=Gt(),t=(()=>{const e=(0,n.useSelector)((e=>e.cheques)),t=(0,n.useSelector)((e=>e.launchpads)),s=(0,a.useWalletAddress)(),o=(0,r.useMemo)((()=>{const t={};for(const n in e){const{launchpad:a,authority:r}=e[n];s===r.toBase58()&&(t[a.toBase58()]||(t[a.toBase58()]=n))}return Object.keys(t)}),[e,s]);return o.sort(((e,s)=>t[s].startTime.toNumber()-t[e].startTime.toNumber()))})();return(0,l.jsx)(i.Row,{justify:"center",children:(0,l.jsx)(i.Col,{xs:24,sm:24,md:20,lg:18,children:(0,l.jsxs)(i.Row,{gutter:[0,18],id:"all-launchpad",children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Button,{onClick:()=>e("/launchpad"),icon:(0,l.jsx)(p.Z,{name:"chevron-back-outline"}),type:"text",children:"Back"})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsxs)(i.Space,{size:16,align:"center",children:[(0,l.jsx)(i.Typography.Title,{level:2,children:"Your purchased"}),(0,l.jsx)(i.Typography.Text,{type:"success",className:"amount-launchpad",children:t.length})]})}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[12,12],children:t.map((e=>(0,l.jsx)(i.Col,{xs:24,md:12,children:(0,l.jsx)(zn,{launchpadAddress:e})},e)))})}),(0,l.jsx)(i.Col,{span:24})]})})})};var va=s(33048),Ta=s.n(va);const Sa=()=>(0,l.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,l.jsxs)(i.Row,{gutter:[24,24],children:[(0,l.jsx)(i.Col,{span:24,style:{height:256}}),(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(i.Row,{gutter:[24,24],justify:"center",children:(0,l.jsx)(i.Col,{children:(0,l.jsxs)(i.Space,{direction:"vertical",align:"center",size:32,children:[(0,l.jsx)(i.Spin,{size:"large"}),(0,l.jsx)(i.Typography.Title,{level:5,style:{textAlign:"center"},children:"Welcome to Balansol. The application is loading..."})]})})})})]})}),ka={},Na=(0,Yn.r)({}),Ba=e=>{const{program:t,name:s,filter:n,upset:a,init:o}=e,[i,c]=(0,r.useState)(0),[,d]=Na(),{accountClient:u,connection:p}=(0,r.useMemo)((()=>{var e;const n=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[s];return{accountClient:n,connection:n.provider.connection}}),[s,null===t||void 0===t?void 0:t.account]),h=(0,r.useCallback)((async()=>{if(void 0===ka[s])try{ka[s]=!0,d({...ka,[s]:!0});const e=await u.all(n),t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;await o(t)}catch(e){E(e)}finally{ka[s]=!1,d({...ka,[s]:!1})}}),[u,n,o,s,d]),m=(0,r.useCallback)((async()=>{if(i)return;const e=p.onProgramAccountChange(u.programId,(async e=>{const n=e.accountId.toBase58(),r=e.accountInfo.data,o=t.coder.accounts.decode(s,r);a(n,o)}),"confirmed",[{memcmp:{offset:0,bytes:(0,tt.encodeIxData)((0,tt.accountDiscriminator)(s))}},...n]);c(e)}),[u.programId,p,n,s,t.coder.accounts,a,i]);return(0,r.useEffect)((()=>{h()}),[h]),(0,r.useEffect)((()=>(m(),()=>{(async()=>{i&&await p.removeProgramAccountChangeListener(i)})()})),[p,m,i]),(0,l.jsx)(r.Fragment,{})},Ra=[],Ma=e=>{const t=(0,n.useDispatch)(),[s,a]=(0,r.useState)(!0),o=(0,r.useCallback)(((e,s)=>t(Hs({address:e,data:s}))),[t]),i=(0,r.useCallback)((async()=>{try{await t(Ks()).unwrap(),a(!1)}catch(e){return window.notify({type:"error",description:"Cannot fetch data of pools"})}}),[t]);return(0,r.useEffect)((()=>{i()}),[i]),s?(0,l.jsx)(Sa,{}):(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(Ba,{program:window.balansol.program,name:"pool",filter:Ra,init:()=>{},upset:o}),e.children]})},za="launchpads",Ia=(0,Jt.createAsyncThunk)(`${za}/initLaunchpads\n  `,(async e=>e)),Pa=(0,Jt.createAsyncThunk)(`${za}/upsetLaunchpad`,(async({address:e,data:t})=>{if(!T.account.isAddress(e))throw new Error("Invalid pool address");if(!t)throw new Error("Data is empty");return{[e]:t}})),Da=((0,Jt.createAsyncThunk)(`${za}/getLaunchpads`,(async(e,{getState:t})=>{const{launchpads:s}=t();return s})),(0,Jt.createSlice)({name:za,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ia.fulfilled,((e,{payload:t})=>t)).addCase(Pa.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer),La=[],Za=()=>{const e=(0,n.useDispatch)(),t=(0,r.useCallback)((async t=>{const s=await window.balansol.program.account.pool.all(),n={};for(const e in t){s.find((s=>s.publicKey.equals(t[e].pool)))&&(n[e]=t[e])}e(Ia(n))}),[e]),s=(0,r.useCallback)(((t,s)=>e(Pa({address:t,data:s}))),[e]);return(0,l.jsx)(Ba,{program:window.launchpad.program,name:"launchpad",filter:La,init:t,upset:s})},Fa="cheques",Ea=(0,Jt.createAsyncThunk)(`${Fa}/initCheques\n  `,(async e=>e)),Oa=((0,Jt.createAsyncThunk)(`${Fa}/getLaunchpads`,(async(e,{getState:t})=>{const{launchpads:s}=t();return s})),(0,Jt.createAsyncThunk)(`${Fa}/upsetCheque`,(async({address:e,data:t})=>{if(!T.account.isAddress(e))throw new Error("Invalid pool address");if(!t)throw new Error("Data is empty");return{[e]:t}}))),Wa=(0,Jt.createSlice)({name:Fa,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ea.fulfilled,((e,{payload:t})=>t)).addCase(Oa.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Va=[],Ya=()=>{const e=(0,n.useDispatch)(),t=(0,r.useCallback)((t=>e(Ea(t))),[e]),s=(0,r.useCallback)(((t,s)=>e(Oa({address:t,data:s}))),[e]);return(0,l.jsx)(Ba,{program:window.launchpad.program,name:"cheque",filter:Va,init:t,upset:s})},{sol:{balancerAddress:qa,launchpadAddress:Ga}}=Z,Ka=e=>{const[t,s]=(0,r.useState)(!0),[n]=Na(),o=(0,a.useWalletAddress)(),i=(0,r.useCallback)((()=>{if(!a.util.isAddress(o))return;const e=(0,a.getAnchorProvider)();window.balansol=new(X())(e,qa),window.launchpad=new(Ta())(e,Ga,qa),s(!1)}),[o]);return(0,r.useEffect)((()=>{i()}),[i]),t||Object.values(n).includes(!0)?(0,l.jsx)(Sa,{}):(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(Za,{}),(0,l.jsx)(Ya,{}),(0,l.jsx)(Ma,{children:e.children})]})},Ua=s.p+"static/media/background-dark.622cd8aea937b87d31af.png",Ha=s.p+"static/media/background-light.d3a232854f7f1440ca6c.png",{sol:{balancerAddress:Ja}}=Z,$a=()=>{const e=(0,a.useSetBackground)(),{extend:t}=(0,a.useAppRoute)();return(0,r.useEffect)((()=>{e({light:Ha,dark:Ua})}),[e]),a.util.isAddress(Ja)?(0,l.jsx)(Ka,{children:(0,l.jsx)(ts,{children:(0,l.jsx)(xs,{children:(0,l.jsxs)(i.Row,{gutter:[0,24],children:[(0,l.jsx)(i.Col,{span:24,children:(0,l.jsx)(u,{})}),(0,l.jsx)(i.Col,{span:24,id:"balansol-body",children:(0,l.jsxs)(o.Switch,{children:[(0,l.jsx)(o.Route,{path:t("/details"),component:Ut}),(0,l.jsx)(o.Route,{path:t("/swap"),children:(0,l.jsx)(Rs,{})}),(0,l.jsx)(o.Route,{path:t("/pools"),children:(0,l.jsx)(un,{})}),(0,l.jsx)(o.Route,{path:t("/launchpad"),children:(0,l.jsx)(Vn,{})}),(0,l.jsx)(o.Route,{path:t("/launchpad-create"),children:(0,l.jsx)(ra,{})}),(0,l.jsx)(o.Route,{path:t("/launchpad-all"),component:Dn}),(0,l.jsx)(o.Route,{path:t("/launchpad-details"),component:Ca}),(0,l.jsx)(o.Route,{path:t("/launchpad-your-purchased"),component:Aa}),(0,l.jsx)(o.Route,{path:t("/farms"),children:(0,l.jsx)(o.Redirect,{to:"/app/sen_farming_v2?autoInstall=true"})}),(0,l.jsx)(o.Redirect,{from:"*",to:t("/swap",{absolutePath:!0})})]})})]})})})}):(0,l.jsx)(i.Empty,{description:"Coming soon.",image:i.Empty.PRESENTED_IMAGE_SIMPLE})};s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Qa="main",Xa=(0,Jt.createAsyncThunk)(`${Qa}/increaseCounter`,(async(e,{getState:t})=>{const{main:{counter:s}}=t();return{counter:s+1}})),_a=(0,Jt.createSlice)({name:Qa,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(Xa.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,er=(0,Jt.configureStore)({middleware:e=>e({serializableCheck:!1}),devTools:!1,reducer:{main:_a,pools:$s,swap:Xt,searchPools:cn,launchpads:Da,cheques:Wa}});var tr=s(45597);const{manifest:{appId:sr}}=Z,nr=()=>(0,l.jsx)(a.AntdProvider,{appId:sr,prefixCls:sr,children:(0,l.jsx)(n.Provider,{store:er,children:(0,l.jsx)($a,{})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.a221197702aa27813243.md"},69363:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABhCAMAAADx2D+RAAABOFBMVEUAAABm37OA4L9237qE4MCD4L9237lu37Vx4Ll84L134Lt537ho37GB4L9/375p4LZ/4Lxp4LZ/4L2C4L9n4bZo4LVl4LNz4Llm4LSE4b9o4LSB4L5o4bZp37SD4MCB37+B371p37WD4L984LyA371p4LWA372C5L7///+A4L69795n4LW279uD4L9w4Lhz4Llt4Ld74Lx+4L1r4LZq4LV94L1l4LR34Lp44Ltp4LZx4Ll54Lu079pv4Ld14bps4LZ64Lt24Lu/795037mA375n37S48NyC4b9x37hq4baA4b+r7NWE4cB+4b6d6c6D379k4LTK8+Su7dft+/aL5cWX58tm4bVw4bml69J937yH48KB5MCh69GS6MmD5MF95L954ry37tqo69OO5sd24rts4bhy4rrd9+6PMOy2AAAAKHRSTlMAQP7+vr9AQL+/vxAg3yDvQJ+QcG/f38+/ro+Af2CfYFAw7+8wr58vOCnhoQAACntJREFUaN6UlG9r2lAYxRVhG+ugFPanlO3FXgwKkRhIqESSlE1SImWyOasytZbVdt//G+yc57k31xht3cm9T66b/Z3nnnvbxm69+dz8b30+ahymo7cn7y8uflz8UGFF4eU0Ycl17XmeWVx4x6dnzefxp2DiqYPJmNiV1nKRe1SOkb87efOUwcdjdq0GdVngRFqf4FEp3y33ezTfAzypwycYnvWgUJ0c2els95GcXeyR8oU82YXNt82i6N2ObRydbiI1cTBzL+cZcrW38diLB3nkxVEUke6x5G9r1/O94wNaJoL+9ylWC6BROFGjmD6c0ccdBiZrdkuXXdTcsnMv4lq6zvPIKKYBbWhS3cUH5uK5pnMpNTwDUQ+hDwCVPQA7IJketGENBy83byl+fMJwvKeVx2ISE4xKD67JHkg88UAsojCM4/DYHXcTt1sJHLvEMJg18sjJo4G2HFd7xxtmYRyGcHlVOrxT/L7GifMYiB6i1hI7kJ2EugpRSR+EInsUnwTj4merXAApuZPp+rWf5BkIUBrGB11Rl3ig4yOzhbzSsR4o5JmIpVmtZRzSLiYGUYBXdKn18qNuoTSI+eDFyB9XqwDbJ8yeKCPWs4zIZtqRIWar1bTiEAAPHYvDKZCCh8xdXi1GCTS7fyQWfKWyZY1c6cZAv93+c79mOAQHKix4Y9/o3nMvtok8LhKr6zGvekgidxDWFITZjHgoSUZjwjEwWR6C4ETOWbAK53i8Tja05OWW48SrknQgSa+vwYeD6sb2zoeDMX1RtATNuNXA6V7xFTimCWQ9It9pSTRlX5/xByOm3AUfJltaVdCQxIA+OYYWfWXe88uqw6dGA2B2jyfmb8o82daCZEZiWhe8afW2va2ZcFNMXZzhoCUejIFcbW6hjSnp6mvF0BWK4nLGekFodRvzwMqnw0mjOeDN5m3Rc0yckK8eNomchNqqORC5ZbJMyUZJ0yD101eNpnDLw7xrGzYHCzQMTPd2lFoZ7KaGZKeYvj/11SEKrRDyimRMlVostHOjh8BpXt9Ce0Y62+fj+3DgGQalx50wqzdwwUTq+MD3v7frmqFxoGmAAYeX4SVFOjnTdl03G92vl+tAI6ayav/6beIZkGyBDhKwHh812to2NAY6lX3M/56fn3/DkiZsclTvZ5zKf01pow7kb9zFZbumtRAx5r/OqZ8+9yBa1i/THcGFr+qJA6R4Lh56SXULejmkZRqoBXrUtLNkO6QhuBaPxzg4weXe/YRotDa3jwbWQlKm9NtOozti1aBwDoJWTYNgWLFIvqaULztwFshZZb/NcXWV3EnvoqJHFzi4C5hKrR7FaAU6hxo4izKJJcC0oMdoxX+CgEfp9IoeHBSu08cEbWyvSLLsmDicgbMwveLbV6Lk5iuzxwC/0xPRAVTbPLuVOb1dLmaz4TjTI60b0AI5A1ggDPvtXscnGbNjSwcONICLwjmm8vI3dUuDuoUPMZBSHVdU6sCLQqIDT+XT0wa0IFtiN0zSUYuCn4rCOmgQxFc0xSx8XrgpI9ptYdiKF2Bhu++7PZTdpuBZ9TDsmzvYa6FENk4LR+bCOiASVWHfssDup7wZYrDforNXWengWleqz6OrnsHzFn2tDiyfsn6mKVEC1lik6iE+Z0ALovrqkNnax8hggKd0ABClAFXR5gitwWFBkUu6wDMYw+I1HVwmgCtZdYABLfqajxI7YGcwwRomrQwObBxi++5qa6XBIRbScV8HCsTCSocXEo+oKPFFRwSDAy3EodvK+t0Wsa1Wq9vl/NrlHpSLoVeaRfXn/FD97iOPbpZ1uzpU1oFwS+1JnFbfDnb4V6kZtTgNRFE4pKsgssuy+yCLoKKiJBCkgdBCRFoNjaRtimsDbdmHbQX9///Ac+6d2Uk67VpPZm4mS/jOnZPZF90d4AiGxHFvLHhWPiKlT7/5e/nd/435D4fGNE0oBmYPdcwHOhxVc6rBTyEaPItYDYdwGR50+MLJsz050eGOQJlD40H2gE90cFi70kONcaLFlHkMmQ2o6BwXhALR4Vune9JZebZ7p1nsyCeaBZcMqxwO7J7nGVgKSznSX1BOspgCN+YYyHS6H+YPe5BE6GIPHW1wrrH6p8WOYGbSVZ5j5LoH5sFAKP4yAszy8MUet5ia3O/bbIHnKjqw4wGZvcE3AfdYKD3b8eMGVtpyG97HoMNA+h5jCLQn53k8Jn3Y+8cupqARbsmOzSsfjfIRHL70QDQXuWSCrJdoHB8zIF+ZvKvuMcHm7Pf7o2fBU8HJgBMGFvq7wjpUxYcNSHZctg4oxwgDogUcgLUNs5JLfrXZZFgft6ABkxB0uVzO+aCigbGhg9CBRM/smw7jzXQbQ7dNlevJHsS+gcBZ7Nt1SWrfaKRVHYaKh6RU09jqc4NnCTn2DLTXvGy/zWBaLpoSQ7FhSPjVZ7w8kQujzo1i34AeJd52qh3dOQBPrhUNOmrsCYzbBtIrNMPbXYtMyVmmlXtoC6QVd2AHtcz7I4kkdgYSMS128Z6Wtvl1JmbqkKuGnMt4X1NJg1dsDeSJ5Zf/dn8NstAzVDoI2YlNTfbawvfUvmJjoPK3QC3BbYkOkJoAgw/qq5azLbnUP/78sDkwg0NvC3huDFLjgB7vETauTexrJak7LG9aDr6dOaUp94C+MdglryVD8qJVSbLWYc2gl7Gv2yxbZ/MUcBbuAf0Tr0G4PfgOGbligxWrt4evuOBAi4z0uXEAWIPmKo193QGouTi+rirH5qDF17vUSRzea8bqAm19h4Ydy7S3tS1b5aqLqukYRM+CC+E61b7DjPm7r6chyMhqgjEwrTYCxsBEuQqCdx2LrJocOEr2/K0R73qu+JQqQe5qp2hU2BRRdI1/0RWwaRPLZs9gO7ONp2STns7n9kM2ewbbDeEgU1UVRZdBcEWscZG66hhMYACU6dvTfNUxiDfs3VhUHM+D4FLoEA0kjbq9g02HGzm0PhRp3d7BMlIVhbF5wf9MfJc5gQ81W3M6JnU5ZzTkOQm4KCRrUJqt3UA903BsCcPwOoCuNGeKaa+Zx696enu7akrXOj0YgEylR1by9q4hn1zdhKzKCzpcEp/KEQcFxSxAJUgtKuFDDi1fVFXZWgCLUtqwPgSiZySula4Zc3K4/HUacmUBHJV90qZL3njhXvIkmU2kh6QMkE1/nXZDXWsiodlMQiziT6KkLJIkeRUYXZFHlJ50+0SyItyCS5UG3VKCxyRMyqhMcKMWF9bh+TloOjALMQCsivZlEwmZduHCQDiEFzSQS/UyeNBH7dp9TZG3BYPXMAhOONkvKm90QOu4Zni4CVq6jqrCw3nt84Br2gXpRSRYTjbO0tZ5948FXh7ih5zWWuFFgVliKVSRW804FmZ1jo/QtVAQKygVu6aFVYJQAEccmKFhLqSUzknh1AIG+3pzrlRnZD4ifBQdRspUhKWV5mfOkvMGEXm6gAWhofauVVNm6SbiYll04dTs7XVwWK/PiS0wmQUv4HzZPlG6P5wZgzOXkLcN8SjY9H/JosXn7DJ4VG9evS15uH2KTreHblgU6tnLU/7G6P3rq5snR3V2TDevrt8cwP8FY5i8wVwIBsQAAAAASUVORK5CYII="},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.ae87573b389c1c96bd89.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.0b0454a9c94cb721d3bf.png"},83943:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel3.3ac409ec75ffde3a2872.png"},46601:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_background-dark_png-src_static_images_background-ligh-d83fef.7a11fe30.chunk.js.map