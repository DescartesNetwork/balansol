(globalThis.webpackChunkbalansol=globalThis.webpackChunkbalansol||[]).push([["src_bootstrap_app_tsx-src_static_images_background-dark_png-src_static_images_background-ligh-d83fef"],{45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return a.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var n=l(s(27803)),o=l(s(85468)),r=l(s(83943)),a=l(s(69363)),i=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const c=[n.default,o.default,r.default];t.h0=c},39575:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>lr,__esModule:()=>ar.X$,logo:()=>ar.jY,panels:()=>ar.h0,readme:()=>ar.ng});var n=s(55754),o=s(68275),r=s(92950),a=s(45055),i=s(50794),l=s(15835),c=s(32671),d=s(45263);const u=["swap","pools","launchpad"],p=[{label:"Swap",value:"swap"},{label:"Pools",value:"pools"},{label:"Launchpad",value:"launchpad",disabled:"mainnet"===o.net}],h=()=>{const{to:e}=(0,o.useAppRoute)(),{pathname:t}=(0,a.useLocation)(),s=(0,r.useMemo)((()=>{const e=t.split("/");return e[e.length-1]}),[t]);return(0,r.useMemo)((()=>{for(const e of u)if(s===e)return!0;return!1}),[s])?(0,d.jsx)(c.Row,{gutter:[24,24],style:{paddingTop:32},justify:"center",children:(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Segmented,{className:"navigation",options:p,value:s,onChange:t=>e(`/${t.toString()}`),block:!0})})}):(0,d.jsx)(r.Fragment,{})};var m=s(69716);let x;!function(e){e.InputRight="input-right",e.InputLeft="input-left",e.InputCenter="input-center"}(x||(x={}));const j=e=>{let{max:t,onValue:s=(()=>{}),inputStyle:n=x.InputRight,styles:o,...a}=e;const i=(0,r.useCallback)((e=>{if(null===e||t&&parseFloat(e.toString())>parseFloat(t.toString()))return s("");s(e.toString())}),[t,s]);return(0,d.jsx)(c.InputNumber,{...a,stringMode:!0,onChange:i,className:`${n}`,style:{width:"100%",fontSize:24,...o},onBlur:e=>{e.target.value||i("0")},decimalSeparator:".",formatter:e=>(e=>{if(!e)return"0";const t=`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",").split(".");return t[1]?`${t[0]}.${t[1].replace(/,/g,"")}`:t[0]})(e),parser:e=>{if(!e)return 0;const t=e.split(".");return t[1]?Number.parseFloat(`${t[0].replace(/\D/g,"")}.${t[1].replace(/\D/g,"")}`):Number.parseFloat(`${t[0].replace(/\D/g,"")}`)}})};let g,y,f,w;!function(e){e.Sentre="sentre-pools",e.Deposited="deposited-pools",e.YourPools="your-pools",e.Community="community-pools"}(g||(g={})),function(e){e.details="details",e.address="poolAddress",e.category="category",e.wrapTab="tab",e.tabInPools="tab-in-pools"}(y||(y={})),function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(f||(f={})),function(e){e[e.setupToken=0]="setupToken",e[e.addLiquidity=1]="addLiquidity",e[e.confirmCreatePool=2]="confirmCreatePool"}(w||(w={}));const b=10**9,C=1e9;let A,v;!function(e){e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap"}(A||(A={})),function(e){e.AllPools="all-pools",e.DepositedPools="deposited-pools",e.YourPools="your-pools"}(v||(v={}));const T="MMM DD, YYYY HH:mm";let S,k;!function(e){e.active="active",e.upcoming="upcoming",e.completed="completed"}(S||(S={})),function(e){e[e.projectInfo=0]="projectInfo",e[e.projectPhoto=1]="projectPhoto",e[e.configuration=2]="configuration"}(k||(k={}));const N={defi:[49,100,0],gamefi:[4,100,253],DAO:[114,100,7],multisig:[248,100,176],lending:[147,100,156],portfolio:[72,100,5],liquidity:[242,100,21],AMM:[161,100,253],privacy:[136,100,35],payment:[108,100,145],utility:[156,100,45],NFT:[4,100,253]};var B=s(95418),R=s(83342),z=s(25829),M=s(31892),I=s(20547),P=s(51013);const D={appId:"balansol",url:"https://descartesnetwork.github.io/balansol/index.js"},L={development:{...D},production:{...D}};var Z=s(71256);const F={devnet:{connection:new Z.Connection(o.rpc),balancerAddress:"6SRa2Kc3G4wTG319G4Se6yrRWeS1A1Hj79BC3o7X9v6T",taxmanAddress:"GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54",bidMintDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askMintDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",launchpadAddress:"54e31kYfV9KSfrXBCdxn2aAuL7hY5WhvDuqGaNhFYAJe"},testnet:{connection:new Z.Connection(o.rpc),balancerAddress:"",taxmanAddress:"",bidMintDefault:"",askMintDefault:"",launchpadAddress:""},mainnet:{connection:new Z.Connection(o.rpc),balancerAddress:"D3BBjqUdCYuP18fNvvMbPAZ8DpcRi4io2EsYHQawJDag",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",bidMintDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askMintDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",launchpadAddress:"54e31kYfV9KSfrXBCdxn2aAuL7hY5WhvDuqGaNhFYAJe"}},E=e=>({origin:e,version:{base:e+"/public/api/v1",get tvl(){return this.base+"/tvl"},get detailTvl(){return this.base+"/tvl/all/"}}}),O={development:{...E("https://stat.sentre.io")},production:{...E("https://stat.sentre.io")}},W={manifest:L[o.env],sol:F[o.net],api:O[o.env]},Y=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(o.util.explorer(t),"_blank")}),K=e=>(console.log("er",e),window.notify({type:"error",description:e.message})),U=e=>!e||e<A.goodSwap?"#14E041":e>A.acceptableSwap?"#D72311":"#FA8C16",G=(e,t)=>Object.keys(e[t])[0],q=(e,t,s)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=async()=>{n.result&&t(n.result.toString(),s)}},V=e=>/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e),H=e=>{const t={t:{iconName:"logo-telegram",websiteName:"Telegram"},twitter:{iconName:"logo-twitter",websiteName:"Twitter"},facebook:{iconName:"logo-facebook",websiteName:"Facebook"},discord:{iconName:"logo-discord",websiteName:"Discord"},global:{iconName:"globe",websiteName:"Social media"},medium:{iconName:"logo-medium",websiteName:"Medium"}};if(!V(e))return t.global;let s="";const n=new URL(e).hostname.replace("www.","");for(const o of n){if("."===o)break;s+=o}return t[s.toLowerCase()]||(s="global"),t[s.toLowerCase()]},{sol:{taxmanAddress:J}}=W,$=e=>{let{title:t,percent:s,currentPercent:n,onChangeValue:o=(()=>{}),tooltipContent:r,disabled:a}=e;return(0,d.jsxs)(c.Row,{gutter:[8,8],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Space,{size:8,children:[(0,d.jsxs)(c.Typography.Text,{style:{textTransform:"capitalize"},children:[t," (%)"]}),(0,d.jsx)(c.Tooltip,{title:r,children:(0,d.jsx)(m.Z,{name:"information-circle-outline"})})]})}),(0,d.jsxs)(c.Col,{children:[(0,d.jsxs)(c.Typography.Text,{type:"secondary",children:["Current ",t,":"]})," ",(0,d.jsxs)(c.Typography.Text,{children:[n,"%"]})]})]})}),(0,d.jsx)(c.Col,{span:24,className:"fee",children:(0,d.jsx)(j,{bordered:!1,inputStyle:x.InputLeft,placeholder:"0",controls:!1,value:s,styles:{fontSize:14},onValue:o,disabled:a})})]})},X=e=>{let{poolAddress:t}=e;const s=(0,n.useSelector)((e=>e.pools[t])),o=100*s.fee.toNumber()/C,a=100*s.taxFee.toNumber()/C,[l,u]=(0,r.useState)(o.toString()),[p,h]=(0,r.useState)(a.toString()),[m,x]=(0,r.useState)(!1);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)($,{title:"LP Reward Rate",percent:l,currentPercent:o,onChangeValue:u,tooltipContent:"The portion of trading fee a liquidity provider earns upon depositing into the pool"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)($,{title:"Platform Fee",percent:p,currentPercent:a,onChangeValue:h,tooltipContent:"The portion of fee your pool will pay to Balansol for maintaining the system",disabled:s.authority.toBase58()!==J})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{ghost:!0,block:!0,size:"large",loading:m,onClick:async()=>{x(!0);try{const{updateFee:e}=window.balansol,{txId:s}=await e(t,new i.BN(Number(l)*C/100),new i.BN(Number(p)*C/100));return Y("Update Fee",s)}catch(e){K(e)}finally{x(!1)}},children:"Update"})})]})},Q=e=>{let{description:t,statusColor:s="success",statusContent:n}=e;return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:12,align:"start",children:[(0,d.jsx)(m.Z,{name:"information-circle-outline"}),(0,d.jsx)(c.Space,{direction:"vertical",size:0,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:12},children:t})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:0,children:[(0,d.jsx)(c.Badge,{status:s}),(0,d.jsxs)(c.Typography.Text,{children:["Current status: ",n]})]})})]})},_=e=>{let{poolAddress:t}=e;const[s,n]=(0,r.useState)(!1);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Q,{statusColor:"error",statusContent:"Frozen",description:"Unfreeze a pool will active all actions"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{ghost:!0,onClick:async()=>{n(!0);try{const{thawPool:e}=window.balansol,{txId:s}=await e({poolAddress:t});return Y("Unfreeze",s)}catch(e){K(e)}finally{n(!1)}},icon:(0,d.jsx)(m.Z,{name:"sunny-outline"}),block:!0,loading:s,size:"large",children:"Unfreeze Pool"})})]})},ee=e=>{let{poolAddress:t}=e;const[s,n]=(0,r.useState)(!1);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Q,{statusColor:"success",statusContent:"Active",description:"Freezing a pool will prevent all actions until the pool has been unfreezed."})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{onClick:async()=>{n(!0);try{const{freezePool:e}=window.balansol,{txId:s}=await e({poolAddress:t});return Y("Freeze",s)}catch(e){K(e)}finally{n(!1)}},icon:(0,d.jsx)(m.Z,{name:"snow-outline"}),block:!0,loading:s,ghost:!0,size:"large",children:"Freeze Pool"})})]})};var te=s(43933),se=s.n(te),ne=s(74939),oe=s(99370);const re=e=>{let{poolAddress:t}=e;const{mints:s,actions:o}=(0,n.useSelector)((e=>e.pools[t])),[a,i]=(0,r.useState)(o),[l,u]=(0,r.useState)(!1);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:12,align:"start",children:[(0,d.jsx)(m.Z,{name:"alert-circle-outline"}),(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Freezing tokens will prevent all actions until the tokens has been unfreezed."})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[12,12],children:s.map(((e,t)=>{const s=G(a,t);return(0,d.jsx)(c.Col,{span:12,children:(0,d.jsxs)(c.Button,{block:!0,onClick:()=>(e=>{const t=[...a];switch(G(t,e)){case"paused":t[e]=te.MintActionStates.Active;break;case"active":t[e]=te.MintActionStates.Paused}i(t)})(t),size:"large",children:[(0,d.jsxs)(c.Space,{size:8,className:"individual-token",children:[(0,d.jsx)(ne.Z,{mintAddress:e.toBase58()}),(0,d.jsx)(c.Typography.Text,{ellipsis:!0,style:{fontWeight:400,fontSize:14},children:(0,d.jsx)(oe.Z,{mintAddress:e.toBase58()})})]}),"paused"===s&&(0,d.jsx)(c.Space,{className:"disable-mask",align:"center",children:(0,d.jsx)(m.Z,{name:"snow-outline",style:{color:"#F3F3F5"}})})]})})}))})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{block:!0,ghost:!0,onClick:async()=>{u(!0);try{const{updateActions:e}=window.balansol,{txId:s}=await e({poolAddress:t,actions:a});return Y("Freeze",s)}catch(e){K(e)}finally{u(!1)}},size:"large",disabled:JSON.stringify(o)===JSON.stringify(a),loading:l,children:"Confirm"})})]})},ae=e=>{let{poolAddress:t}=e;const s=(0,n.useSelector)((e=>e.pools[t])),o=s.state;return(0,d.jsxs)(c.Tabs,{className:"freeze-thaw",type:"card",children:[(0,d.jsxs)(c.Tabs.TabPane,{tab:"Pool",children:[o.initialized&&(0,d.jsx)(ee,{poolAddress:t}),o.frozen&&(0,d.jsx)(_,{poolAddress:t})]},"pool"),(0,d.jsx)(c.Tabs.TabPane,{tab:"Individual token",disabled:!!o.frozen,children:(0,d.jsx)(re,{poolAddress:t})},"individual_token")]})},ie=e=>{let{poolAddress:t}=e;const[s,n]=(0,r.useState)(""),[o,a]=(0,r.useState)(!1);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:12,align:"center",children:[(0,d.jsx)(m.Z,{style:{fontSize:16},name:"information-circle-outline"}),(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{children:"Transfer to Owner"})}),(0,d.jsx)(c.Col,{span:24,className:"transfer-owner",children:(0,d.jsx)(c.Input,{className:"transfer-owner-input",value:s,onChange:e=>n(e.target.value),placeholder:"E.g. AgTMC..."})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{ghost:!0,size:"large",onClick:async()=>{if(a(!0),B.account.isAddress(s))try{const{transferOwnership:e}=window.balansol,{txId:n}=await e({poolAddress:t,newOwner:s});return Y("Update weights",n)}catch(e){K(e)}finally{a(!1)}},loading:o,disabled:!s,block:!0,children:"Transfer"})})]})};var le=s(40106);const ce={decimalize:(e,t)=>{if(!e)return new i.BN(0);if(t<0||t%1!==0)throw new Error("decimals must be an integer greater than zero");const s=e.toString();if(!t)return new i.BN(s);const n=s.split(".");if(n.length>2)throw new Error("Invalid number");return 1===n.length?new i.BN(e).mul(new i.BN(10**t)):n[1].length>=t?new i.BN(n[0]+n[1].substring(0,t)):new i.BN(n[0]+n[1]+"0".repeat(t-n[1].length))},undecimalize:(e,t)=>{if(t<0||t%1!==0)throw new Error("decimals must be an integer greater than zero");if(!e)return"0";const s=e.toString();if(!t)return s;let n=s.length>t?s.substring(0,s.length-t):"0",o="";for(o=s.length>t?s.substring(s.length-t,s.length):s.length===t?s:"0".repeat(t-s.length)+s,o=o.split("");"0"===o[o.length-1];)o.pop();return o=o.join(""),o?n+"."+o:n},toNumber:e=>Number(ce.undecimalize(e,0))},de=(e,t)=>{const s=((e,t)=>e.mints.map((e=>e.toBase58())).indexOf(new i.web3.PublicKey(t).toBase58()))(e,t);if(-1===s)throw new Error("Can not find mint in pool");const n=me(e.weights,e.weights[s]);return{reserve:e.reserves[s],normalizedWeight:n,treasury:e.treasuries[s]}},ue=e=>e<1?1-e:0,pe=(e,t,s,n,o,r)=>{const a=ce.toNumber(t),l=ce.toNumber(s),c=ce.toNumber(e),d=ce.toNumber(r)/b,u=l/(l+c),p=o/n;return new i.BN(a*(1-u**p)*(1-d))},he=(e,t,s,n,o,r)=>{const a=ce.toNumber(t),l=ce.toNumber(s),c=ce.toNumber(r)/b,d=a/(a-ce.toNumber(e)/(1-c)),u=n/o;return new i.BN(l*(d**u-1))},me=(e,t)=>{const s=e.map((e=>Number(le.default.undecimalize(BigInt(e.toString()),9))));return Number(le.default.undecimalize(BigInt(t.toString()),9))/s.reduce(((e,t)=>e+t),0)};function xe(e,t){const{balanceIn:s,decimalIn:n,balanceOut:o,decimalOut:r,weightIn:a,weightOut:i,swapFee:l}=t,c=Number(le.default.undecimalize(BigInt(s.toString()),n)),d=Number(le.default.undecimalize(BigInt(o.toString()),r)),u=a,p=i,h=Number(le.default.undecimalize(BigInt(e.toString()),n)),m=Number(le.default.undecimalize(BigInt(l.toString()),9));return-c*p/(d*(-1+m)*(c/(h+c-h*m))**((u+p)/p)*u)}const je=(e,t)=>{const s=xe(new i.BN(0),t),n=xe(e,t);if(n<s)return 0;return 1-s/n},ge=(e,t,s,n,o)=>e.map(((e,t)=>Number(le.default.undecimalize(BigInt(e.toString()),o[t])))).reduce(((e,r,a)=>{const l=me(s,s[a]),c={balanceIn:t[a],balanceOut:n,weightIn:l,decimalIn:o[a],swapFee:new i.BN(0)},d=((e,t)=>{const s=Number(le.default.undecimalize(BigInt(t.balanceOut.toString()),9)),n=Number(le.default.undecimalize(BigInt(e.toString()),9)),o=t.weightIn,r=Number(le.default.undecimalize(BigInt(t.balanceIn.toString()),t.decimalIn)),a=Number(le.default.undecimalize(BigInt(t.swapFee.toString()),9));return Math.pow((n+s)/s,1/o)*r/((n+s)*(1+a*(-1+o))*o)})(new i.BN(0),c);return e+r/d}),0),ye=(e,t,s,n,o,r)=>{if(0===o.length)return{lpOut:0,impactPrice:0};const a=Number(((e,t,s,n,o,r)=>{const a=Number(le.default.undecimalize(BigInt(r.toString()),9)),i=Number(le.default.undecimalize(BigInt(n.toString()),9)),l=t.map(((e,t)=>Number(le.default.undecimalize(BigInt(e.toString()),o[t])))),c=e.map(((e,t)=>Number(le.default.undecimalize(BigInt(e.toString()),o[t])))),d=new Array(e.length);let u=0;for(let h=0;h<e.length;h++){const e=me(s,s[h]);d[h]=(l[h]+c[h])/l[h],u+=d[h]*e}let p=1;for(let h=0;h<e.length;h++){const e=me(s,s[h]);let t=c[h];if(d[h]>u){let e=l[h]*(u-1);t=e+(c[h]-e)*(1-a)}p*=((l[h]+t)/l[h])**e}return p>1?i*(p-1):0})(e,t,s,n,o,r).toFixed(9));return{lpOut:a,impactPrice:1-a/Number(ge(e,t,s,n,o).toFixed(9))||0}},fe=(e,t,s,n,o,r,a)=>{if(0===r.length||e.isZero())return{lpOut:0,impactPrice:0};let l=new i.BN(0);const c=s.map(((c,d)=>{if(t!==d)return new i.BN(0);const u=me(n,n[d]),p=((e,t,s,n,o,r)=>{const a=Number(le.default.undecimalize(BigInt(e.toString()),o)),i=Number(le.default.undecimalize(BigInt(s.toString()),9)),l=Number(le.default.undecimalize(BigInt(n.toString()),9)),c=Number(le.default.undecimalize(BigInt(r.toString()),9)),d=a*ue(((l-i)/l)**(1/t)),u=d*ue(t);return d-u+u*ue(c)})(s[d],u,e,o,r[d],a);return l=new i.BN(le.default.decimalize(p,r[d]).toString()),l})),d=Number(ge(c,s,n,o,r).toFixed(9)),u=Number(le.default.undecimalize(BigInt(e.toString()),9));if(u<d)return{tokenAmountOut:l,impactPrice:0};return{tokenAmountOut:l,impactPrice:u/d-1}},we=e=>{let t=1;return e.forEach((e=>{const s=e.priceImpact;t*=1-s})),1-t},be=e=>{let{mintAddress:t}=e;return(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ne.Z,{mintAddress:t}),(0,d.jsx)(oe.Z,{mintAddress:t})]})},Ce=e=>{let{poolAddress:t}=e;const[s,a]=(0,r.useState)(),[l,u]=(0,r.useState)(!1),{mints:p,weights:h}=(0,n.useSelector)((e=>e.pools[t])),x=(0,o.useTheme)(),g=(0,r.useCallback)((()=>{const e={};p.forEach(((t,s)=>{const n=me(h,h[s]),r=t.toBase58();e[r]={addressToken:r,weight:o.util.numeric(100*n).format("0,0.[00]"),isLocked:!1}})),a(e)}),[p,h]),y=(0,r.useCallback)((e=>{if(!s)return!1;const{weight:t}=s[e],n=Number(t);if(n>100||n<0)return!1;let r=0;for(const{addressToken:o,weight:i}of Object.values(s))e!==o&&(r+=Number(i));const a=100-r;return n===Number(o.util.numeric(a).format("0,0.[00]"))}),[s]),f=(0,r.useMemo)((()=>{if(!s)return!0;for(const e of Object.keys(s))if(!y(e))return!0;return!1}),[s,y]);return(0,r.useEffect)((()=>{g()}),[g]),(0,d.jsxs)(c.Row,{gutter:[12,12],children:[p.map(((e,t)=>{const n=e.toBase58();if(!s)return null;const{isLocked:r,weight:i}=s[n];return(0,d.jsx)(c.Col,{span:24,className:"weight",children:(0,d.jsxs)(c.Row,{gutter:12,align:"middle",wrap:!1,children:[(0,d.jsx)(c.Col,{flex:"auto",className:y(n)?"weight-input":"weight-input-error",children:(0,d.jsx)(j,{prefix:(0,d.jsx)(be,{mintAddress:n}),disabled:r,bordered:!1,controls:!1,styles:{borderRadius:40,background:"light"===x?"#e6eaf5":"#142042"},addonAfter:(0,d.jsx)(c.Typography.Text,{children:"%"}),value:i,name:n,onValue:e=>((e,t)=>{const n={...s};n[t]={...n[t],weight:e};let r=100-Number(e);const i=Object.values(n).filter((e=>!e.isLocked&&e.addressToken!==t)).length;let l=!0;for(const s of p){const{isLocked:e,weight:a,addressToken:c}=n[s.toBase58()];if(t===c)continue;if(e){r-=Number(a);continue}const d=(r/i).toFixed(2);if(l){const e=r-Number(d)*(i-1);n[c]={...n[c],weight:o.util.numeric(e).format("0,0.[00]")},l=!1}else n[c]={...n[c],weight:o.util.numeric(d).format("0,0.[00]")}}return a(n)})(e,n)})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Button,{shape:"circle",type:"text",onClick:()=>(e=>{const t={...s},{isLocked:n}=t[e];t[e]={...t[e],isLocked:!n},a(t)})(n),icon:(0,d.jsx)(m.Z,{name:r?"lock-closed-outline":"lock-open-outline"})})})]})},n+t)})),(0,d.jsx)(c.Col,{span:24})," ",(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{onClick:async()=>{if(u(!0),!s)return;const e=Object.values(s).map((e=>{let{weight:t}=e;const s=Number(t)*b;return new i.BN(s)}));try{const{updateWeights:s}=window.balansol,{txId:n}=await s({poolAddress:t,weights:e});return Y("Update weights",n)}catch(n){K(n)}finally{u(!1)}},loading:l,disabled:f,block:!0,ghost:!0,size:"large",children:"Update"})})]})},Ae=e=>{let{poolAddress:t}=e;return(0,d.jsx)(c.Card,{children:(0,d.jsxs)(c.Tabs,{children:[(0,d.jsx)(c.Tabs.TabPane,{tab:"Weights",children:(0,d.jsx)(Ce,{poolAddress:t})},"weights"),(0,d.jsx)(c.Tabs.TabPane,{tab:"Freeze/Unfreeze",children:(0,d.jsx)(ae,{poolAddress:t})},"freeze-thaw"),(0,d.jsx)(c.Tabs.TabPane,{tab:"Fee",children:(0,d.jsx)(X,{poolAddress:t})},"fee"),(0,d.jsx)(c.Tabs.TabPane,{tab:"Ownership",children:(0,d.jsx)(ie,{poolAddress:t})},"ownership")]})})};var ve=s(40426),Te=s(69954),Se=s(44521),ke=s(54179),Ne=s(45198),Be=s(90404),Re=s(54132),ze=s(8399);Se.D([Ne.N,Be.N,ke.N,ze.N,Re.N]);const Me=(e,t)=>({legend:{bottom:0,icon:"circle",textStyle:{color:t.color}},tooltip:{trigger:"item",borderWidth:"1",formatter:function(e,t,s){return`<div style="min-width: 200px; font-weight: 400"><span style="color: #9CA1AF; font-size: 12px">${e.data.name}</span><br/><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Weight&nbsp;</span> <span style="font-size: 16px; font-weight: 700">${e.data.value}%</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount&nbsp;</span> <span style="font-size: 16px; font-weight: 700">${e.data.tokenAmount}</span></span></div>`},backgroundColor:t.backgroundColor,extraCssText:"border-radius: 24px",textStyle:{color:t.color}},series:[{type:"pie",radius:"70%",avoidLabelOverlap:!1,top:0,label:{show:!0,position:"inside",formatter:"{c}%"},labelLine:{show:!0},bottom:0,data:e.map((e=>({name:e.symbol,value:o.util.numeric(e.weight).format("0,0.[00]"),tokenAmount:e.tokenAmount})))}]}),Ie={light:{color:"#081438",backgroundColor:"#F2F4FA"},dark:{color:"#F3F3F5",backgroundColor:"#212C4C"}},Pe=e=>{let{data:t}=e;const s=(0,o.useTheme)();return(0,d.jsx)(ve.Z,{echarts:Te,option:Me(t,Ie[s]),notMerge:!0,lazyUpdate:!0})},De=e=>{let{poolAddress:t}=e;const[s,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)([]),u=(0,n.useSelector)((e=>e.pools[t])),p=(0,o.useGetMintDecimals)(),h=(0,r.useCallback)((async()=>{try{if(a(!0),!u)return;const e=await Promise.all(u.mints.map((async e=>{const{normalizedWeight:t,reserve:s}=de(u,e.toBase58()),n=await o.tokenProvider.findByAddress(e.toBase58());if(n)return{symbol:n.symbol,tokenAmount:ce.undecimalize(s,n.decimals),weight:100*t};const r=await p({mintAddress:e.toBase58()})||0;return{symbol:e.toBase58().substring(0,4),tokenAmount:ce.undecimalize(s,r)||"0",weight:100*t}})));l(e)}catch(e){K(e)}finally{a(!1)}}),[p,u]);return(0,r.useEffect)((()=>{h()}),[h]),(0,d.jsx)(c.Card,{className:"chart-card",children:(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:"Pool Weights"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Spin,{tip:"Loading...",spinning:s,children:(0,d.jsx)(Pe,{data:i})})})]})})};var Le=s(57221),Ze=s(72870);Se.D([Ne.N,Ze.N,Be.N,Le.N,ze.N,Re.N]);const Fe=e=>({xAxis:{type:"category",data:e.map((e=>e.label)),axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{formatter:e=>o.util.numeric(e).format("0,0.[00]a")}},tooltip:{trigger:"item",borderWidth:"1",valueFormatter:e=>"$"+e.toFixed(2)},series:[{data:e.map((e=>e.data)),type:"bar",itemStyle:{color:"#87E0C0"}}],grid:{show:!1,top:10,left:40,right:10,bottom:50}}),Ee=e=>{let{data:t}=e;return(0,d.jsx)(c.Row,{justify:"center",className:"barchart-container",children:(0,d.jsx)(ve.Z,{echarts:Te,option:Fe(t)})})};var Oe=s(4550),We=s.n(Oe);const Ye=1e3;let Ke;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Ke||(Ke={}));class Ue{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new Ue,s=e*Ye;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new Ue,s=We()(e,Ke.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=Ue.fromYmd(e);const o=Ue.fromYmd(t);for(;n.ymd()<=o.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return We()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=We()(this.milliSeconds).subtract(e,"days").valueOf();return Ue.fromSeconds(t/Ye)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=We()(this.milliSeconds).add(e,"days").valueOf();return Ue.fromSeconds(t/Ye)}seconds(){return(this.milliSeconds-this.milliSeconds%Ye)/Ye}ymd(){return Number(this.format(Ke.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.YMD;return We()().format(e)}}class Ge{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class qe{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Ve{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const He=700;class Je{constructor(){this.conn=o.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;s>He&&(s=He);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let o=0;o<=e.length/200;o++){const t=200*o,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const o of n)t=t.concat(o);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:o,lastSignature:r,limit:a}=t;n=Math.floor(n||0),o=Math.floor(o||s);const i=new Z.PublicKey(e);let l=[],c=!1;for(;!c;){const e=await this.fetchSignatures(i,r,a);if(null===e||void 0===e||!e.length||c)break;for(const t of e){const e=t.blockTime;if(e&&!(e>o)){if(e<n){c=!0;break}r=t.signature,l.push(t.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<He)break}return await this.fetchConfirmTransaction(l)}}let $e;!function(e){e.Transfer="transfer"}($e||($e={}));let Xe;!function(e){e.Swap="SWAP"}(Xe||(Xe={}));class Qe extends class{constructor(){this.parseAction=e=>""}async collect(e,t,s){let{lastSignature:n,limit:o}=t;const r=new Je;let a=[],i=n,l=!1,c=200;for(;!l;){const n=await r.fetchTransactions(e,{...t,lastSignature:i,limit:c});for(const e of n){i=e.transaction.signatures[0];const t=this.parseTransLog(e);if(t){if(s){if(!await s(t))continue}if(a.push(t),o&&a.length>=o){l=!0;break}}}if(o&&(c=c*o/(a.length||1)),!n.length)break;if(l)break}return a}parseTransLog(e){var t,s;const{blockTime:n,meta:o,transaction:r}=e;if(!n||!o)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:c}=o,{signatures:d,message:u}=r,p=(null===(t=o.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],h=u.instructions[0]||[],m=new Ge;m.signature=d[0],m.blockTime=n,m.time=Ue.fromSeconds(n).ymd(),m.programId=h.programId.toString();const x=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,c);return this.isParsedInstruction(h)?(m.programTransfer=this.parseListActionTransfer([h],x),m):(m.actionTransfers=this.parseListActionTransfer(p,x),m.programInfo={programId:h.programId.toString(),data:h.data},m.actionType=this.parseAction(m),m)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===$e.Transfer){const n=e.info,o=this.parseActionTransfer(n,t);o&&s.push(o)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:o,lamports:r}=e,a=o||r.toString();if(!a||!t.has(s)||!t.has(n))return;const i=new Ve;return i.source=t.get(s),i.destination=t.get(n),i.amount=a,i}parseAccountInfo(e,t,s,n,o){const r=new Map;for(const a of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=a,o=new qe;o.address=e[t].pubkey.toString(),o.postBalance=n.amount,o.mint=s,o.decimals=n.decimals,r.set(o.address,o)}for(const a of s){const{accountIndex:t,uiTokenAmount:s}=a,n=e[t].pubkey.toString(),o=r.get(n)||new qe;o.preBalance=s.amount,r.set(o.address,o)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!B.account.isAssociatedAddress(s)){const e=r.get(s)||new qe;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(o[t]||0),e.decimals=9,r.set(e.address,e)}})),r}}{constructor(){super(...arguments),this.parseAction=e=>{try{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data,n=window.balansol.program.coder.instruction.decode(s,"base58");if("route"===(null===n||void 0===n?void 0:n.name))return Xe.Swap}catch(s){}return""}}}class _e{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class et{parserDailyReport(e){let t=new Array;for(const s of e)t=t.concat(this.parseDailyReport(s));return this.mergeDailyReport(t)}parseDailyReport(e){const t=new Array,{programId:s,time:n,actionType:o,actionTransfers:r}=e;for(const a of r){const{source:e,destination:r,amount:i}=a,l=new _e;if(l.programId=s,l.time=n,l.actionType=o,e){const{mint:s,address:n}=e;t.push({...l,mint:s,address:n,amountOut:BigInt(i)})}if(r){const{mint:e,address:s}=r;t.push({...l,mint:e,address:s,amountIn:BigInt(i)})}}return t}mergeDailyReport(e){const t=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(t.has(e)){const s=t.get(e);void 0!==s&&(n.amountIn+=s.amountIn,n.amountOut+=s.amountOut,n.totalTrans+=s.totalTrans)}t.set(e,n)}const s=new Array;return t.forEach((e=>s.push(e))),s}}class tt{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Qe,this.dailyReportService=new et,this.tokenProvider=new o.TokenProvider,this.getPoolData=async()=>{if(!this.poolData){const e=window.balansol;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,t)=>{const s=await this.tokenProvider.findByAddress(e);if(!s)return 0;const{decimals:n,extensions:r}=s;try{const e=await o.util.fetchCGK(null===r||void 0===r?void 0:r.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const s=ce.undecimalize(new i.BN(t.toString()),n);return Number(s)*e.price}catch(a){return 0}},this.fetchTransLog=async(e,t)=>{const s=new o.PDB(this.poolAddress).createInstance("stat");let n=await s.getItem("translogs")||[];n=n.sort(((e,t)=>t.blockTime-e.blockTime));const r=n[0],a=n[n.length-1];if(r&&a){const[s]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:r.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:t});return await s.setItem("translogs",n),n},this.getDailyInfo=async()=>{let e=new Ue;const t=(new Ue).subtractDay(8),{fee:s,taxFee:n,treasuries:o}=await this.getPoolData(),r=await this.fetchTransLog(t.seconds(),e.seconds()),a=this.dailyReportService.parserDailyReport(r),i={};for(const c of a){const{time:e,address:t}=c;o.map((e=>e.toBase58().includes(t)))&&(i[e]||(i[e]=[]),i[e].push(c))}const l={};for(l[e.ymd()]={tvl:0,fee:0,volume:0};e.ymd()>t.ymd();){const o=i[e.ymd()]||[],r=l[e.ymd()],a=e.subtractDay(1);!l[a.ymd()]&&a.ymd()>=t.ymd()&&(l[a.ymd()]={tvl:r.tvl,fee:0,volume:0});for(const t of o){const o=await this.getUsd(t.mint,t.amountOut),r=await this.getUsd(t.mint,t.amountIn);if(l[a.ymd()]&&(l[a.ymd()].tvl+=o-r,l[a.ymd()].tvl<0&&(l[a.ymd()].tvl=0)),t.actionType===Xe.Swap){l[e.ymd()].volume+=r+o;const t=Number(ce.undecimalize(s.add(n),9))*o;l[e.ymd()].fee+=t}}e=e.subtractDay(1)}return l},this.poolAddress=e}}var st=s(32083);const nt=()=>{const e=(0,o.useGetMintDecimals)(),t=(0,r.useCallback)((async(t,s)=>{const n=await e({mintAddress:new i.web3.PublicKey(s).toString()})||0;return new i.BN(le.default.decimalize(t,n).toString())}),[e]),s=(0,r.useCallback)((async(t,s)=>{const n=await e({mintAddress:new i.web3.PublicKey(s).toString()})||0;return le.default.undecimalize(BigInt(t.toString()),n)}),[e]);return{decimalize:(0,r.useCallback)(((e,t)=>new i.BN(le.default.decimalize(e,t).toString())),[]),undecimalize:(0,r.useCallback)(((e,t)=>le.default.undecimalize(BigInt(e.toString()),t)),[]),decimalizeMintAmount:t,undecimalizeMintAmount:s}},ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=(0,n.useSelector)((t=>t.pools[e])),[s,o]=(0,r.useState)(0),a=(0,st.G)(),{undecimalizeMintAmount:i}=nt(),l=(0,r.useCallback)((async e=>{if(!e)return 0;let t=0;for(let s in e.reserves){const n=await a(e.mints[s]);if(!n)continue;const o=await i(e.reserves[s],e.mints[s]);t+=n*Number(o)}return t}),[a,i]),c=(0,r.useCallback)((async()=>{const e=await l(t);return o(e)}),[l,t]);return(0,r.useEffect)((()=>{c()}),[c]),{TVL:s,getTVL:l}},rt=e=>{const[t,s]=(0,r.useState)(0),[n,a]=(0,r.useState)({}),[i,l]=(0,r.useState)(!1),{TVL:c}=ot(e),d=(0,r.useCallback)((async()=>{try{if(l(!0),!e||!c)return l(!1),s(0),a({});const t=new tt(e),n=await o.DataLoader.load("getDailyInfo"+e,(()=>t.getDailyInfo()),{cache:{ttl:3e5}});let r=0,i=0;for(const e in n)r+=n[e].fee,n[e].fee&&n[e].volume&&n[e].tvl&&i++;const d=r/i/c,u=Math.pow(1+d,365)-1;s(Number.isFinite(u)?u:0),a(n)}catch(t){}finally{l(!1)}}),[e,c]);return(0,r.useEffect)((()=>{d()}),[d]),{apy:t,dailyInfo:n,loading:i}},at=e=>{const[t,s]=(0,r.useState)([]),{dailyInfo:n,loading:o}=rt(e),a=(0,r.useCallback)((async()=>{if(!e)return s([]);const t=Object.keys(n).map((e=>({data:n[e].volume,label:We()(e,"YYYYMMDD").format("MM/DD")})));return s(t)}),[n,e]);(0,r.useEffect)((()=>{a()}),[a]);const i=(0,r.useMemo)((()=>{var e,s;const n=(null===(e=t[t.length-1])||void 0===e?void 0:e.data)||0,o=(null===(s=t[t.length-2])||void 0===s?void 0:s.data)||0;return n+(new Date).getHours()*o/24}),[t]);return{chartData:t,loading:o,vol24h:i}},it=e=>{let{poolAddress:t}=e;const{vol24h:s,loading:n,chartData:r}=at(t);return(0,d.jsx)(c.Card,{className:"chart-card",children:(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{justify:"center",align:"middle",className:"chart-title",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Title,{level:4,children:"Volume 24h"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Title,{level:2,children:["$",o.util.numeric(s).format("0,0.[0]a")]})})]})}),(0,d.jsx)(c.Col,{span:24,flex:"auto",children:(0,d.jsx)(c.Spin,{tip:"Loading...",spinning:n,children:(0,d.jsx)(Ee,{data:r})})})]})})};var lt=s(4065);const ct=(e,t,s)=>B.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(lt.utilsBN.undecimalize(t,s))}:{amount:new i.BN(0),decimals:0,balance:0},dt=e=>{const t=(0,o.useWalletAddress)(),s=(0,o.useWalletBalance)(),n=(0,o.useAccountSelector)((t=>t[e])),{amount:r,mint:a}=n||{},l=(0,o.useMintDecimals)({mintAddress:a})||0;return B.account.isAddress(t)&&B.account.isAddress(e)?e===t?ct(B.DEFAULT_EMPTY_ADDRESS,new i.BN(s),9):ct(a,new i.BN((null===r||void 0===r?void 0:r.toString())||0),l):ct()},ut=e=>{const[t,s]=(0,r.useState)(""),n=(0,o.useWalletAddress)(),a=dt(t);return(0,r.useEffect)((()=>{(async()=>{if(!B.account.isAddress(n)||!B.account.isAddress(e))return s("");try{const t=await o.splt.deriveAssociatedAddress(n,e);s(t)}catch(t){return s("")}})()})),a},pt=e=>{let{title:t,content:s,bg:n}=e;return(0,d.jsx)(c.Card,{className:"card-detail-header",style:{background:`url(${n})`},children:(0,d.jsxs)(c.Row,{gutter:[0,8],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Space,{align:"end",children:s})})]})})};const ht=s.p+"static/media/tvl.85fd6f5a6c3970dff1166cd0b28e15f8.svg";const mt=s.p+"static/media/apy.e92b9714a458a3d8c34272011f0e8b3e.svg";const xt=s.p+"static/media/my-contribution.4131308b4ed787a3c77c8b39b9cefaea.svg",jt=e=>{let{poolAddress:t}=e;const{pools:{[t]:s}}=(0,n.useSelector)((e=>e)),{TVL:a}=ot(t),{balance:i}=ut(s.mintLpt.toBase58()),{apy:l,loading:u}=rt(t);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{lg:8,md:8,xs:24,children:(0,d.jsx)(pt,{title:"TVL",content:(0,d.jsxs)(c.Typography.Title,{level:3,children:["$ ",o.util.numeric(a).format("0,0.[00]a")]}),bg:ht})}),(0,d.jsx)(c.Col,{lg:8,md:8,xs:24,children:(0,d.jsx)(pt,{title:"APY",content:u?(0,d.jsx)(c.Skeleton,{style:{width:150},active:!0,paragraph:{rows:1},title:!1}):(0,d.jsx)(c.Typography.Title,{level:3,children:o.util.numeric(l).format("0,0.[00]a%")}),bg:mt})}),(0,d.jsx)(c.Col,{lg:8,md:8,xs:24,children:(0,d.jsx)(pt,{title:"My Contribution",content:(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Typography.Title,{level:3,children:o.util.numeric(i).format("0,0.[00]")}),(0,d.jsx)(c.Typography.Text,{type:"secondary",children:" LP"})]}),bg:xt})})]})};var gt=s(51518),yt=s.n(gt);const ft=e=>{let{poolAddress:t,size:s=24,icon:o=(0,d.jsx)(m.Z,{name:"diamond-outline"}),max:r}=e;const a=(0,n.useSelector)((e=>e.pools[t]));return(0,d.jsx)(c.Avatar.Group,{style:{whiteSpace:"nowrap"},maxCount:r,size:s,children:a&&a.mints.map((e=>(0,d.jsx)(ne.Z,{mintAddress:e.toBase58(),size:s,icon:o},e.toBase58())))})};var wt=s(58421);const bt=e=>{let{onChange:t,disabled:s=!1,mints:n}=e;const[a,i]=(0,r.useState)(""),l=(0,r.useCallback)((async()=>{if(!a||a.length<3)return t(n);const e=(await o.tokenProvider.find(a)).filter((e=>{let{address:t}=e;return n.includes(t)})).map((e=>{let{address:t}=e;return t}));return n.forEach((t=>{if(!e.includes(t)&&t.toLowerCase().includes(a.toLowerCase()))return e.push(t)})),t(e)}),[a,t,n]);return(0,r.useEffect)((()=>{l()}),[l]),(0,d.jsx)(c.Card,{className:"mint-search",bodyStyle:{padding:0},style:{padding:8},bordered:!1,children:(0,d.jsx)(c.Input,{placeholder:"Search",value:a,size:"small",bordered:!1,suffix:(0,d.jsx)(c.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:a?()=>i(""):()=>{},icon:(0,d.jsx)(m.Z,{name:a?"close-outline":"search-outline"}),disabled:s}),onChange:e=>i(e.target.value),disabled:s})})};var Ct=s(63396);const At=e=>{let{mintAddress:t,onClick:s,active:n=!1}=e;return(0,d.jsx)(c.Card,{bodyStyle:{padding:0},className:"card-child-balansol mint-select-item",bordered:n,onClick:s,hoverable:!0,children:(0,d.jsxs)(c.Space,{size:12,style:{display:"flex"},children:[(0,d.jsx)(ne.Z,{mintAddress:t,size:32}),(0,d.jsx)(c.Typography.Text,{style:{margin:0},children:(0,d.jsx)(oe.Z,{mintAddress:t})}),(0,d.jsx)(c.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:(0,d.jsx)(Ct.Z,{mintAddress:t})})]})})},vt=e=>{let{selectedMint:t,onChange:s,visible:n,mints:o,onClose:a}=e;const[i,l]=(0,r.useState)(o);return(0,d.jsx)(c.Modal,{open:n,closeIcon:(0,d.jsx)(m.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,onCancel:a,children:(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:"Select token"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(bt,{mints:o,onChange:l})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[16,16],style:{height:300},className:"scrollbar",children:(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[16,16],children:i.slice(0,100).map(((e,n)=>(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(wt.ZP,{height:48,overflow:!0,children:(0,d.jsx)(At,{mintAddress:e,onClick:()=>s(e),active:t===e})})},n)))})})})})]})})},Tt=e=>{let{selectedMint:t,mints:s=[],onChange:n=(()=>{}),mintLabel:o,mintAvatar:a}=e;const[i,l]=(0,r.useState)(!1);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsxs)(c.Space,{className:"mint-select",onClick:()=>l(s.length>0),children:[a||(0,d.jsx)(ne.Z,{mintAddress:t}),o||(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(oe.Z,{mintAddress:t})}),s.length?(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(m.Z,{name:"chevron-down-outline"})}):null]})]}),i&&(0,d.jsx)(vt,{selectedMint:t,visible:i,onChange:e=>(n&&n(e),l(!1)),mints:s,onClose:()=>l(!1)})]})},St=e=>{const t=(0,o.useWalletBalance)(),s=ut(e),n=ut(z.Gd.toBase58()),a=(0,r.useMemo)((()=>{const e=n.amount.add(new i.BN(t));return{balance:Number(lt.utilsBN.undecimalize(e,9)),amount:e}}),[t,n.amount]);return e===z.Gd.toBase58()?a:s},kt=[50,100],Nt=e=>{let{amount:t,selectedMint:s,portionValue:n,onChangeAmount:a}=e;const l=(0,o.useTheme)(),{balance:u,amount:p}=St(s),{undecimalizeMintAmount:h}=nt();let m=(0,r.useMemo)((()=>{let e=0;for(const s in kt){if(!u)break;const n=kt[s],o=u*n/100;Number(t).toFixed(4)===o.toFixed(4)&&(e=n)}return e}),[t,u]);const x="dark"===l?"#394360":"#ced0d7";return(0,d.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,d.jsx)(c.Radio.Button,{className:"proportion-btn",disabled:!a,onClick:async()=>{if(!a)return;const e=new i.BN(p.toString()).mul(new i.BN(n)).divRound(new i.BN(100)),t=await h(e,s);a(t)},style:{background:n<=m?"#63e0b3":x}}),(0,d.jsx)(c.Typography.Text,{type:"secondary",className:"caption",children:`${n}%`})]},n)},Bt=[50,100];function Rt(e){let{amount:t,onChangeAmount:s,selectedMint:n,mints:a=[],onSelect:i=(()=>{}),mintLabel:l,mintAvatar:u,ratioButton:p,unit:h,force:m,mintSelection:x,footer:g,placeholder:y="0"}=e;const{balance:f}=St(n),w=(0,r.useCallback)((e=>{if(!s)return;const t=Number(e)>f&&!!s;return s(e,t)}),[f,s]);return(0,d.jsxs)(c.Row,{gutter:[0,10],align:"middle",className:"card-swap-item",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[10,0],wrap:!1,align:"middle",children:[(0,d.jsx)(c.Col,{children:x||(0,d.jsx)(Tt,{selectedMint:n,onChange:i,mints:a,mintLabel:l,mintAvatar:u})}),(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(j,{bordered:!1,controls:!1,placeholder:String(Number(y)),value:t,max:m?f:void 0,onValue:w,disabled:!s||m&&!f})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",style:{width:"100%"},wrap:!1,children:[(0,d.jsx)(c.Col,{flex:"auto",style:{justifyContent:"left"},children:(0,d.jsxs)(c.Space,{className:"caption",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Available:"}),(0,d.jsx)(c.Typography.Text,{style:{cursor:"pointer"},children:o.util.numeric(f).format("0,0.[00]")}),(0,d.jsx)(c.Typography.Text,{type:"secondary",children:h||(0,d.jsx)(oe.Z,{mintAddress:n})})]})}),(0,d.jsx)(c.Col,{className:"proportion-wrap",style:{display:null===p?"none":""},children:p||(0,d.jsx)(c.Space,{children:Bt.map(((e,o)=>(0,d.jsx)(Nt,{amount:t,selectedMint:n,portionValue:e,onChangeAmount:s},o)))})})]})}),g]})}const zt=e=>{const[t,s]=(0,r.useState)(new i.BN(0)),n=(0,o.useGetMintData)(),a=(0,r.useCallback)((async()=>{if(!e)return s(new i.BN(0));let t=new i.web3.PublicKey(e).toString();try{const e=await n({mintAddress:t}).then((e=>e?e[t].supply.toString():"0"));return s(new i.BN(e))}catch(o){}}),[n,e]);return(0,r.useEffect)((()=>{a()}),[a]),{supply:t}},Mt=()=>{const e=(0,o.useWalletAddress)(),t=(0,o.useWalletBalance)(),s=(0,o.useGetMintDecimals)(),n=(0,o.useAccounts)(),a=(e,t,s)=>o.util.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(lt.utilsBN.undecimalize(t,s))}:{amount:new i.BN(0),decimals:0,balance:0};return{getMintBalance:(0,r.useCallback)((async function(r){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!o.util.isAddress(e)||!o.util.isAddress(r))return a();try{const o=await i.utils.token.associatedAddress({mint:new i.web3.PublicKey(r),owner:new i.web3.PublicKey(e)}).then((e=>e.toBase58())),c=r===B.DEFAULT_WSOL;if(o===e||c){const{amount:e=BigInt(0)}=n[o]||{},s=c?B.DEFAULT_WSOL:B.DEFAULT_EMPTY_ADDRESS,r=c?new i.BN((null===e||void 0===e?void 0:e.toString())||0):new i.BN((null===t||void 0===t?void 0:t.toString())||0);return a(s,l?new i.BN((null===t||void 0===t?void 0:t.toString())||0+(null===e||void 0===e?void 0:e.toString())||0):r,9)}const{amount:d,mint:u}=n[o]||{},p=await s({mintAddress:u});return a(u,new i.BN((null===d||void 0===d?void 0:d.toString())||0),p)}catch(c){return a()}}),[n,s,t,e])}};var It=s(82714);const Pt=()=>{const{getMintBalance:e}=Mt(),t=(0,o.useWalletAddress)(),s=(0,o.useAccounts)(),n=(0,r.useCallback)((async(n,o)=>{const r=new i.web3.Transaction,{balance:a}=await e(n);if(n!==z.Gd.toBase58()||a>=o)return;const l=B.utils.decimalize(o,9)-B.utils.decimalize(a,9),c=await(0,R.Am)(z.Gd,new i.web3.PublicKey(t));if(!s[c.toBase58()]){const e=await(async e=>{const t=await(0,R.Am)(z.Gd,e);return(0,M.E)(e,t,e,z.Gd)})(new i.web3.PublicKey(t));r.add(e)}const d=await(async(e,t)=>{const s=await(0,R.Am)(z.Gd,t);return i.web3.SystemProgram.transfer({fromPubkey:t,toPubkey:s,lamports:e})})(l,new i.web3.PublicKey(t));return r.add(d,(0,It.D2)(c)),r}),[s,e,t]);return{createWrapSolTxIfNeed:n,createUnWrapSolTxIfNeed:async e=>{if(e!==z.Gd.toBase58())return;const s=await(async e=>{const t=await(0,R.Am)(z.Gd,e);return(0,I.Zu)(t,e,e)})(new i.web3.PublicKey(t));return(new i.web3.Transaction).add(s)}}},Dt=e=>{let{poolAddress:t,hideModal:s}=e;const a=(0,n.useSelector)((e=>e.pools[t])),[i,l]=(0,r.useState)(new Array(a.mints.length).fill("0")),[u,p]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[x,j]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!1),[f,w]=(0,r.useState)(0),[b,C]=(0,r.useState)(0),[v,T]=(0,r.useState)(0),{supply:S}=zt(a.mintLpt),{decimalizeMintAmount:k,undecimalizeMintAmount:N}=nt(),B=(0,o.useGetMintDecimals)(),{getMintBalance:R}=Mt(),{createWrapSolTxIfNeed:z}=Pt(),M=(0,r.useMemo)((()=>{const e=o.util.numeric(b).format("0,0.[0000]");return b>0&&b<1e-4?"LP < 0.0001":e}),[b]),I=(0,r.useCallback)((async()=>{T(0);const{reserves:e,weights:t,fee:s,taxFee:n,mints:o}=a;let r=[],l=[];for(let a in i){const e=await B({mintAddress:o[a].toBase58()})||0,t=await k(i[a],o[a]);r.push(t),l.push(e)}const{lpOut:c,impactPrice:d}=ye(r,e,t,S,l,s.add(n));C(c),T(d)}),[i,k,B,a,S]);(0,r.useEffect)((()=>{I()}),[I]);const P=(0,r.useCallback)((async()=>{const{mints:e}=a;for(let t in i){const{balance:s}=await R(e[t].toBase58(),!0);if(Number(i[t])>s)return j(!0)}return b?v>A.acceptableSwap&&!g?j(!0):j(!1):j(!0)}),[i,R,v,g,b,a]);(0,r.useEffect)((()=>{P()}),[P]);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:"Deposit"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[24,8],children:a.mints.map(((e,t)=>{let s=e.toBase58();const n=me(a.weights,a.weights[t]);return(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Rt,{selectedMint:s,amount:i[t],onChangeAmount:e=>(async(e,t)=>{const{reserves:s,mints:n}=a;let o=[...i];o[e]=t,l(o),w(e),l(o);const r=await Promise.all(n.map((async(o,r)=>{if(e===r)return"";const a=await B({mintAddress:n[r].toBase58()})||0,i=await N(s[f],n[f]),l=await N(s[r],n[r]),c=(Number(i)+Number(t))/Number(i);return(Number(l)*(c-1)).toFixed(a)})));p(r)})(t,e),mintLabel:(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(oe.Z,{mintAddress:s||""})}),(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(n).format("0,0.[0000]%")})]}),ratioButton:(h=t,f!==h&&Number(i[f])>0&&Number(u[h])>0&&Number(u[h])!==Number(i[h])&&(0,d.jsx)(c.Tooltip,{title:u[t],children:(0,d.jsx)(c.Button,{type:"text",style:{marginRight:-15},onClick:()=>(async e=>{const t=[...i];t[e]=u[e],l(t)})(t),children:"Apply suggestion"})}))})},e.toBase58());var h}))})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[0,13],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Price impact"})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)("span",{style:{color:U(v)},children:o.util.numeric(v).format("0,0.[0000]%")})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"You will receive"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Title,{level:4,children:[M," LP"]})})]})})]})}),v>A.acceptableSwap&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Checkbox,{onChange:e=>y(e.target.checked),checked:g,children:"I agree to execute this trade with the high price impact."})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{size:"large",type:"primary",block:!0,onClick:async()=>{m(!0);try{const e=(0,o.getAnchorProvider)(),n=await Promise.all(a.mints.map((async(e,t)=>await k(i[t],e)))),r=[];for(const t in a.mints){const e=await z(a.mints[t].toBase58(),i[t]);e&&r.push(e)}const{tx:l}=await window.balansol.addLiquidity(t,n,!1);r.push(l);const c=await e.sendAll(r.map((e=>({tx:e,signers:[]}))));Y("Deposit",c[c.length-1]),s()}catch(e){K(e)}finally{m(!1)}},loading:h,disabled:x,children:"Deposit"})})]})},Lt=e=>{let{poolAddress:t}=e;const[s,n]=(0,r.useState)(!1);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Button,{type:"primary",onClick:()=>n(!0),block:!0,children:"Deposit"}),(0,d.jsx)(c.Modal,{open:s,onCancel:()=>n(!1),footer:null,destroyOnClose:!0,centered:!0,closeIcon:(0,d.jsx)(m.Z,{name:"close-outline"}),children:(0,d.jsx)(Dt,{poolAddress:t,hideModal:()=>n(!1)})})]})};var Zt=s(60914);const Ft=e=>{let{mintAddress:t,amount:s}=e;return(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ne.Z,{mintAddress:t}),(0,d.jsx)(c.Typography.Text,{type:"secondary",children:(0,d.jsx)(oe.Z,{mintAddress:t})})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(Zt.Z,{mintAddress:t,amount:s})})})]})},Et=e=>{let{poolAddress:t,lptAmount:s,onSuccess:a=(()=>{})}=e;const[l,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(!1),m=(0,n.useSelector)((e=>e.pools[t])),x=(0,o.useGetMintData)(),{decimalize:j}=nt(),{createUnWrapSolTxIfNeed:g}=Pt();const y=(0,r.useCallback)((async()=>{var e;let t=m.mintLpt.toBase58(),n=await x({mintAddress:t});if(!n){const e=new Array(m.reserves.length).fill(new i.BN(0));return u(e)}let o=null===(e=n[t])||void 0===e?void 0:e.supply,r=await j(s,9),a=((e,t,s)=>{let n=e.toNumber()/t.toNumber();return s.map((e=>new i.BN(n*Number(e))))})(new i.BN(String(r)),new i.BN(String(o)),m.reserves);return u(a)}),[j,x,s,m.mintLpt,m.reserves]);return(0,r.useEffect)((()=>{y()}),[y]),(0,d.jsxs)(c.Row,{gutter:[0,24],className:"withdraw",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[0,14],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:"12px"},children:"You will receive"})}),m.mints.map(((e,t)=>(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ft,{mintAddress:e.toBase58(),amount:l[t]},t)},e.toBase58())))]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",block:!0,onClick:async()=>{try{h(!0);let e=j(s,9);const n=(0,o.getAnchorProvider)(),r=await async function(){const e=(0,o.getAnchorProvider)();return await(0,lt.initTxCreateMultiTokenAccount)(e,{mints:m.mints})}(),{transaction:i}=await window.balansol.createRemoveLiquidityTransaction(t,e);r.push(i);for(const t of m.mints){const e=await g(t.toBase58());e&&r.push(e)}const l=await n.sendAll(r.map((e=>({tx:e,signers:[]}))));Y("Withdraw",l[l.length-1]),a()}catch(e){K(e)}finally{h(!1)}},size:"large",loading:p,disabled:!Number(s),children:"Withdraw"})})]})},Ot=e=>{let{poolAddress:t,lptAmount:s,mintAddress:a,onSuccess:l=(()=>{}),withdrawableMax:u}=e;const[p,h]=(0,r.useState)(new i.BN(0)),[m,x]=(0,r.useState)(0),[j,g]=(0,r.useState)(!1),y=(0,o.useGetMintDecimals)(),f=(0,n.useSelector)((e=>e.pools[t])),{decimalize:w}=nt(),{supply:b}=zt(f.mintLpt),{createUnWrapSolTxIfNeed:C}=Pt(),A=Number(s)>u,v=(0,r.useCallback)((async()=>{let e=w(s,9);x(0);let t=[];for(let s in f.reserves){const e=await y({mintAddress:f.mints[s].toBase58()})||0;t.push(e)}const n=f.mints.map((e=>e.toBase58())).indexOf(a),{tokenAmountOut:o,impactPrice:r}=fe(e,n,f.reserves,f.weights,b,t,f.fee.add(f.taxFee));h(o||new i.BN(0)),x(r)}),[w,y,s,a,f,b]);return(0,r.useEffect)((()=>{v()}),[v]),(0,d.jsxs)(c.Row,{gutter:[12,12],className:"withdraw",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:"14px"},children:"Price impact"})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)("span",{style:{color:U(m)},children:o.util.numeric(m).format("0,0.[0000]%")})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[14,14],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:"14px"},children:"You will receive"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ft,{mintAddress:a,amount:p})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[0,8],children:(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",size:"large",block:!0,onClick:async()=>{if(Number(s)>u)return K({message:"Please input amount less than 30% Liquidity Provider!"});try{g(!0);const e=[],n=(0,o.getAnchorProvider)();let r=w(s,9);const{tx:i}=await window.balansol.removeSidedLiquidity(t,a,r,!1);e.push(i);const c=await C(a);c&&e.push(c);const d=await n.sendAll(e.map((e=>({tx:e,signers:[]}))));Y("Withdraw",d[d.length-1]),l()}catch(e){K(e)}finally{g(!1)}},disabled:p.isZero()||A,loading:j,children:"Withdraw"})})})})]})},Wt=e=>{let{poolAddress:t,hideModal:s}=e;const a=(0,n.useSelector)((e=>e.pools[t])),i=(0,r.useMemo)((()=>a?a.mints.map((e=>e.toBase58())):[]),[a]),[l,u]=(0,r.useState)(i),[p,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(!0),{balance:j}=ut(a.mintLpt.toBase58()),{supply:g}=zt(a.mintLpt),y=(0,r.useMemo)((()=>Number(B.utils.undecimalize(BigInt(g.toString()),9))),[g]),f=(0,r.useMemo)((()=>Number((30*y/100).toFixed(9))),[y]),w=(0,r.useMemo)((()=>!m||f>j?j:f),[m,j,f]),b=l.length===(null===a||void 0===a?void 0:a.mints.length);return(0,d.jsxs)(c.Row,{gutter:[24,24],className:"withdraw",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:"Withdraw"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:"12px"},children:"You want to receive"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Button,{className:"btn-token-name "+(b?"selected":""),onClick:()=>u(i),children:(0,d.jsx)("span",{className:"title",children:"All"})})}),i.map((e=>{let t=l.includes(e)?"selected":"";return(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Button,{className:`btn-token-name ${t}`,onClick:()=>u([e]),children:(0,d.jsx)("span",{className:"title",children:(0,d.jsx)(oe.Z,{mintAddress:e})})})},e)}))]})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Rt,{selectedMint:null===a||void 0===a?void 0:a.mintLpt.toBase58(),amount:p,onChangeAmount:e=>h(e),mintLabel:(0,d.jsx)(c.Typography.Text,{ellipsis:!0,children:"Balansol LP"}),mintAvatar:(0,d.jsx)(ft,{poolAddress:t,max:2}),unit:"LP",force:!0,ratioButton:!b&&(0,d.jsx)(c.Button,{onClick:()=>h(`${w}`),size:"small",children:"Max"}),footer:!b&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Tag,{style:{width:"100%",border:"none",padding:"5px 16px",whiteSpace:"unset"},color:"gold",children:(0,d.jsxs)(c.Space,{align:"center",size:6,children:[(0,d.jsx)(c.Checkbox,{className:"warning-checkbox",checked:m,onChange:()=>x(!m)}),(0,d.jsxs)(c.Typography.Text,{style:{color:"inherit"},children:["Prevent to withdraw more than 30% (Currently"," ",o.util.numeric(Number(p)/y).format("0,0.[00]%"),") of the total LP."]})]})})})})}),(0,d.jsx)(c.Col,{span:24,children:b?(0,d.jsx)(Et,{poolAddress:t,lptAmount:p,onSuccess:s}):(0,d.jsx)(Ot,{poolAddress:t,mintAddress:l[0],lptAmount:p,onSuccess:s,withdrawableMax:w})})]})},Yt=e=>{let{poolAddress:t}=e;const[s,n]=(0,r.useState)(!1);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Button,{ghost:!0,onClick:()=>n(!0),block:!0,children:"Withdraw"}),(0,d.jsx)(c.Modal,{open:s,onCancel:()=>n(!1),footer:null,destroyOnClose:!0,centered:!0,closeIcon:(0,d.jsx)(m.Z,{name:"close-outline"}),children:(0,d.jsx)(Wt,{poolAddress:t,hideModal:()=>n(!1)})})]})},Kt=e=>{let{title:t,value:s}=e;const[n,a]=(0,r.useState)(!1);return(0,d.jsxs)(c.Space,{direction:"vertical",size:4,children:[(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:t}),(0,d.jsx)(c.Button,{type:"text",size:"small",icon:(0,d.jsx)(m.Z,{name:"open-outline"}),onClick:()=>window.open(o.util.explorer(s),"_blank")})]}),(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{style:{wordBreak:"break-all"},children:s}),(0,d.jsx)(c.Tooltip,{title:"Copied",open:n,arrowPointAtCenter:!0,children:(0,d.jsx)(yt(),{text:s,children:(0,d.jsx)(c.Button,{type:"text",size:"small",icon:(0,d.jsx)(m.Z,{name:"copy-outline"}),onClick:async()=>{a(!0),await o.util.asyncWait(1500),a(!1)}})})})]})]})},Ut=e=>{let{poolAddress:t}=e;const s=(0,n.useSelector)((e=>e.pools[t])),r=(0,o.useInfix)()<o.Infix.md;return(0,d.jsxs)(c.Row,{gutter:[24,24],justify:"space-between",children:[(0,d.jsx)(c.Col,{md:18,xs:24,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ft,{poolAddress:t,size:32}),(0,d.jsx)(c.Typography.Title,{level:4,children:"Balansol LP"}),(0,d.jsx)(c.Popover,{placement:"bottom",content:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(Kt,{title:"Pool Address",value:t}),(0,d.jsx)(Kt,{title:"LPT Address",value:s.mintLpt.toBase58()})]}),children:(0,d.jsx)(c.Button,{type:"text",style:{marginLeft:-4},icon:(0,d.jsx)(m.Z,{name:"information-circle-outline"})})})]})}),(0,d.jsx)(c.Col,{span:r?24:void 0,children:(0,d.jsxs)(c.Space,{style:{width:"100%"},children:[(0,d.jsx)(Yt,{poolAddress:t}),(0,d.jsx)(Lt,{poolAddress:t})]})})]})},{manifest:{appId:Gt}}=W,qt=`/app/${Gt}`,Vt=()=>{const{search:e,pathname:t}=(0,a.useLocation)(),s=(0,a.useHistory)(),n=(0,r.useMemo)((()=>new URLSearchParams(e)),[e]),o=(0,r.useCallback)((e=>n.get(e)),[n]),i=(0,r.useCallback)((()=>{const e={};n.forEach(((t,s)=>{e[s]=t}));return e}),[n]),l=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=i();!1===n&&(t=Object.assign(o,t));const r=new URLSearchParams(t);r&&(e+=`?${r.toString()}`),s.push(`${qt}${e}`)}),[i,s]);return{getQuery:o,getAllQuery:i,pushHistory:l,appRoute:qt,pathname:t}},Ht=e=>{let{label:t,redirect:s}=e;const{pushHistory:n}=Vt();return(0,d.jsxs)(c.Row,{justify:"center",children:[(0,d.jsx)(c.Col,{span:24,style:{textAlign:"center"},children:(0,d.jsx)(c.Empty,{description:`${t} not found`})}),(0,d.jsx)(c.Col,{span:24,style:{textAlign:"center"},children:(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:"arrow-back-outline"}),onClick:()=>n(s),children:"Go Back Home"})})]})},Jt=()=>{const{getQuery:e,pushHistory:t}=Vt(),s=e("pool")||"",r=(0,n.useSelector)((e=>e.pools[s])),a=(0,o.useWalletAddress)(),i=(0,o.useInfix)();if(!r||!s)return(0,d.jsx)(Ht,{label:"pool",redirect:"/pools"});const l=a===r.authority.toBase58(),u=i<o.Infix.md;return(0,d.jsx)(c.Row,{justify:"center",style:{paddingBottom:12},children:(0,d.jsx)(c.Col,{lg:20,md:24,style:{maxWidth:u?"":930},children:(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:"arrow-back-outline"}),onClick:()=>t("/pools"),style:{margin:-12},children:"Back"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ut,{poolAddress:s})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(jt,{poolAddress:s})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[24,24],style:{display:"flex"},children:[(0,d.jsx)(c.Col,{lg:12,md:12,xs:24,children:(0,d.jsx)(it,{poolAddress:s})}),(0,d.jsx)(c.Col,{lg:12,md:12,xs:24,children:(0,d.jsx)(De,{poolAddress:s})}),l&&(0,d.jsx)(c.Col,{lg:12,md:12,xs:24,children:(0,d.jsx)(Ae,{poolAddress:s})})]})})]})})})};var $t=s(70457),Xt=s(19289);const Qt="swap",_t=(0,Xt.createAsyncThunk)("swap/setSwapState",(async e=>e)),es=(0,Xt.createSlice)({name:Qt,initialState:{bidMint:"",bidAmount:"",askMint:"",askAmount:"",isReverse:!1,slippageTolerance:.5,loading:!1},reducers:{},extraReducers:e=>{e.addCase(_t.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ts=()=>{const{askMint:e,askAmount:t,loading:s,isReverse:a,bidAmount:i}=(0,n.useSelector)((e=>e.swap)),l=(0,o.useTheme)(),u=(0,n.useDispatch)(),{getAllQuery:p}=Vt(),{ask_mint:h}=p();(0,r.useEffect)((()=>{if(!e){const e=h||W.sol.askMintDefault;u(_t({askMint:e}))}}),[e,h,u]);return(0,d.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,d.jsx)(c.Spin,{spinning:s&&!a&&!!Number(i),children:(0,d.jsx)(Rt,{amount:t,selectedMint:e,onChangeAmount:async e=>{u(_t({askAmount:e,isReverse:!0,bidAmount:"",loading:!0})).unwrap()},ratioButton:null,mintSelection:(0,d.jsx)($t.Z,{value:e,onChange:t=>{u(_t({askMint:t,loading:e!==t})).unwrap()},style:{background:"dark"===l?"#394360":"#F2F4FA"}})})})})},ss=(0,r.createContext)({activePools:{}}),ns=e=>{let{children:t}=e;const s=(()=>{const e=(0,n.useSelector)((e=>e.pools)),[t,s]=(0,r.useState)({}),{getTVL:o}=ot(),a=(0,r.useCallback)((async()=>{const t={};for(const s in e){const n=e[s];i.web3.PublicKey.isOnCurve(n.authority)&&(n.state.initialized&&(n.reserves.map((e=>e.toString())).includes("0")||await o(n)<1e3||(t[s]=n)))}s(t)}),[o,e]);return(0,r.useEffect)((()=>{a()}),[a]),t})(),o=(0,r.useMemo)((()=>({activePools:s})),[s]);return(0,d.jsx)(ss.Provider,{value:o,children:t})},os=()=>(0,r.useContext)(ss),rs=()=>{const{bidAmount:e,bidMint:t,askMint:s}=(0,n.useSelector)((e=>e.swap)),a=(0,n.useDispatch)(),i=(0,o.useTheme)(),l=(()=>{const{activePools:e}=os(),t=(0,r.useMemo)((()=>{let t=[];for(const{mints:s}of Object.values(e))for(const e of s)t.includes(e.toBase58())||t.push(e.toBase58());return t}),[e]);return t})(),{getAllQuery:c}=Vt(),{bid_mint:u}=c();(0,r.useEffect)((()=>{if(!t){const e=u||W.sol.bidMintDefault;a(_t({bidMint:e}))}}),[t,u,a]);const p=(0,r.useMemo)((()=>l.filter((e=>e!==s))),[s,l]);return(0,d.jsx)(Rt,{amount:e,selectedMint:t,onChangeAmount:e=>{a(_t({bidAmount:e,isReverse:!1,askAmount:"",loading:!0}))},mints:p,mintSelection:(0,d.jsx)($t.Z,{value:t,onChange:e=>{a(_t({bidMint:e,loading:t!==e}))},style:{background:"dark"===i?"#394360":"#F2F4FA"}})})};const as=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",is=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,d.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,d.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,d.jsx)(c.Tooltip,{title:"Jupiter Aggregator",children:(0,d.jsx)(c.Avatar,{src:as,size:n})})]})};var ls=s(93253);const cs=()=>{const{askMint:e,bidMint:t}=(0,n.useSelector)((e=>e.swap)),s=(()=>{const{activePools:e}=os(),t=(0,r.useCallback)(((t,s,n,o)=>{let r=e[o],a=r.mints.map((e=>e.toBase58())),i=a.indexOf(s),l=a.indexOf(n),c=r.actions;return c[i].active&&c[l].active?(s===n||(t[s]||(t[s]={}),t[s][n]||(t[s][n]=[]),t[s][n].push(o)),t):t}),[e]);return(0,r.useMemo)((()=>{let s={};for(const n in e){const o=e[n].mints.map((e=>e.toBase58()));for(const e of o)for(const r of o)s=t(s,e,r,n)}return s}),[e,t])})(),[o,a]=(0,r.useState)([]),i=e=>{const t=e.map((e=>e.pool));for(const s in t)if(t[s]===t[Number(s)+1])return!1;for(const s of e)for(const t of e)if(s.bidMint===t.askMint&&s.askMint===t.bidMint)return!1;return!0},l=(0,r.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>3)return[];const o=s[e];if(!o)return[];const r=o[t]||[],a=r.map((s=>[{pool:s,bidMint:e,askMint:t}]));for(const s in o){const r=o[s];if(!r)continue;const c=l(s,t,n+1);for(const t of c)for(const n of r){const o=[{pool:n,bidMint:e,askMint:s},...t];i(o)&&a.push(o)}}return a}),[s]),c=(0,r.useCallback)((()=>{const s=l(t,e);a(s)}),[e,t,l]);return(0,ls.Z)((async()=>c()),300,[c]),o},ds=()=>{const[e,t]=(0,r.useState)({route:[],bidAmount:0,askAmount:0,priceImpact:0}),[s,a]=(0,r.useState)(!1),{bidMint:i,askAmount:l,askMint:c,isReverse:d}=(0,n.useSelector)((e=>e.swap)),{activePools:u}=os(),{undecimalizeMintAmount:p}=nt(),h=(e=>{const{askAmount:t,isReverse:s}=(0,n.useSelector)((e=>e.swap)),{activePools:a}=os(),{decimalizeMintAmount:i}=nt(),[l,c]=(0,r.useState)([]),d=(0,o.useGetMintDecimals)(),u=(0,r.useCallback)((async()=>{const n=[];if(!s)return c([]);for(const s of e){const e=s[s.length-1].askMint;let o=[],r=!0,l=await i(t,e);for(const t of[...s].reverse()){const{bidMint:e,askMint:s,pool:n}=t,i=a[n],c=de(i,e),u=de(i,s),p=await d({mintAddress:e})||0,h=await d({mintAddress:s})||0;if(l.gt(u.reserve)){r=!1;break}const m=he(l,u.reserve,c.reserve,u.normalizedWeight,c.normalizedWeight,i.fee.add(i.taxFee));if(m.lten(0)){r=!1;break}const x={balanceIn:c.reserve,balanceOut:u.reserve,weightIn:c.normalizedWeight,weightOut:u.normalizedWeight,decimalIn:p,decimalOut:h,swapFee:i.fee.add(i.taxFee)},j=je(m,x);o=[{pool:t.pool,bidMint:e,askMint:s,bidAmount:m,askAmount:l,priceImpact:j}].concat(o),l=m}r&&n.push(o)}return c(n)}),[a,t,i,d,s,e]);return(0,ls.Z)((async()=>u()),300,[u]),l})(cs()),m=(0,r.useCallback)((async()=>{var e;const s=h.sort(((e,t)=>{let s=e[0].bidAmount,n=t[0].bidAmount;return s.gt(n)?1:-1}))[0];if(null===s||void 0===s||!s.length||!i||!c)return t({route:[],bidAmount:Number(0),askAmount:0,priceImpact:0});let n=await p(null===(e=s[0])||void 0===e?void 0:e.bidAmount,i);const o=s.map(((e,t)=>{const n=u[e.pool];return{...s[t],poolData:n}})),r=we(o);return t({route:s,bidAmount:Number(n),askAmount:Number(l),priceImpact:r})}),[l,c,i,u,h,p]);return(0,ls.Z)((()=>{try{if(!d)return;m()}catch(e){console.log("route error:",e)}finally{a(!1)}}),500,[m]),(0,r.useEffect)((()=>{a(!0)}),[m]),{loading:s,bestRoute:e}},us=()=>{const[e,t]=(0,r.useState)({route:[],bidAmount:0,askAmount:0,priceImpact:0}),[s,a]=(0,r.useState)(!1),{bidAmount:i,askMint:l,bidMint:c,isReverse:d}=(0,n.useSelector)((e=>e.swap)),{activePools:u}=os(),{undecimalizeMintAmount:p}=nt(),h=(e=>{const{bidAmount:t,isReverse:s}=(0,n.useSelector)((e=>e.swap)),{activePools:a}=os(),{decimalizeMintAmount:i}=nt(),[l,c]=(0,r.useState)([]),d=(0,o.useGetMintDecimals)(),u=(0,r.useCallback)((async()=>{const n=[];if(s||!Number(t))return c([]);for(const s of e){const e=s[0].bidMint,o=[];let r=await i(t,e);for(const t of s){const{bidMint:e,askMint:s,pool:n}=t,i=a[n],l=de(i,e),c=de(i,s),u=await d({mintAddress:e})||0,p=await d({mintAddress:s})||0,h=pe(r,c.reserve,l.reserve,c.normalizedWeight,l.normalizedWeight,i.fee.add(i.taxFee)),m={balanceIn:l.reserve,balanceOut:c.reserve,weightIn:l.normalizedWeight,weightOut:c.normalizedWeight,decimalIn:u,decimalOut:p,swapFee:i.fee.add(i.taxFee)};let x=je(r,m);x<0&&(x=0),o.push({pool:t.pool,bidMint:e,askMint:s,bidAmount:r,askAmount:h,priceImpact:x}),r=h}n.push(o)}return c(n)}),[t,i,d,s,e,a]);return(0,ls.Z)((async()=>u()),300,[u]),l})(cs()),m=(0,r.useCallback)((async()=>{var e;const s=h.sort(((e,t)=>{let s=e[e.length-1].askAmount;return t[t.length-1].askAmount.gt(s)?1:-1}))[0];if(null===s||void 0===s||!s.length||!c||!l)return t({route:[],bidAmount:Number(i),askAmount:0,priceImpact:0});let n=await p(null===(e=s[s.length-1])||void 0===e?void 0:e.askAmount,l);const o=s.map(((e,t)=>{const n=u[e.pool];return{...s[t],poolData:n}})),r=we(o);return t({route:s,bidAmount:Number(i),askAmount:Number(n),priceImpact:r})}),[l,i,c,u,h,p]);return(0,ls.Z)((()=>{try{if(d)return;m()}catch(e){console.log("route error:",e)}finally{a(!1)}}),500,[m]),(0,r.useEffect)((()=>{a(!0)}),[m]),{loading:s,bestRoute:e}};const ps=class{constructor(e,t){this._wallet=void 0,this.publicKey=void 0,this._wallet=t,this.publicKey=B.account.fromAddress(e)||null}async sendTransaction(e,t,s){return e=await this.signTransaction(e),await t.sendRawTransaction(e.serializeMessage(),s)}async signTransaction(e){return await this._wallet.signTransaction(e)}async signAllTransactions(e){return await this._wallet.signAllTransactions(e)}},hs=new i.web3.Connection(o.rpc),ms={amount:0,inputMint:void 0,outputMint:void 0,slippage:0,debounceTime:250},xs={route:[],bidAmount:0,askAmount:0,priceImpact:0};let js;!function(e){e[e.Balansol=0]="Balansol",e[e.Jupiter=1]="Jupiter"}(js||(js={}));const gs={route:[],bidAmount:0,askAmount:0,priceImpact:0,swap:async()=>({txId:""}),loading:!1,platform:js.Balansol},ys=(0,r.createContext)({...gs}),fs=e=>{let{children:t}=e;const s=(0,n.useSelector)((e=>e.swap.isReverse)),a=(0,n.useDispatch)(),[c,u]=(0,r.useState)({...gs}),p=(()=>{const{bidAmount:e,bidMint:t,askMint:s,slippageTolerance:a,isReverse:i}=(0,n.useSelector)((e=>e.swap)),{decimalizeMintAmount:l}=nt(),c=us(),d=ds(),{createWrapSolTxIfNeed:u,createUnWrapSolTxIfNeed:p}=Pt(),{loading:h,bestRoute:m}=i?d:c,x=(0,r.useCallback)((async()=>{const e=(0,o.getAnchorProvider)();return await(0,lt.initTxCreateMultiTokenAccount)(e,{mints:m.route.map((e=>e.askMint))})}),[m.route]),j=(0,r.useCallback)((async()=>{const n=(0,o.getAnchorProvider)(),r=await l(e,t),i=Number(m.askAmount)*(1-a/100),c=await l(i,s),d=await x(),h=await u(t,e);h&&d.push(h);const{transaction:j}=await window.balansol.createRouteTransaction(r,m.route,c);d.push(j);const g=await p(s);g&&d.push(g);const y=await n.sendAll(d.map((e=>({tx:e,signers:[]}))));return{txId:y[y.length-1]}}),[s,m.askAmount,m.route,e,t,p,u,l,x,a]);return(0,r.useMemo)((()=>({...m,swap:j,loading:h,platform:js.Balansol})),[m,j,h])})(),h=(()=>{const[e,t]=(0,r.useState)(xs),[s,a]=(0,r.useState)({...ms}),{bidMint:c,askMint:d,bidAmount:u,slippageTolerance:p,isReverse:h}=(0,n.useSelector)((e=>e.swap)),m=(0,o.useWalletAddress)(),{decimalizeMintAmount:x,undecimalizeMintAmount:j}=nt(),{exchange:g,routes:y,loading:f}=(0,l.OO)(s),w=(0,r.useCallback)((async()=>{if(!c||!d||!Number(u)||h)return a({...ms});const e=await x(u,c);a({amount:ce.toNumber(e),inputMint:new i.web3.PublicKey(c),outputMint:new i.web3.PublicKey(d),slippage:p,debounceTime:250})}),[d,u,c,x,h,p]);(0,ls.Z)((()=>w()),300,[w]);const b=(0,r.useCallback)((async()=>{const e=null===y||void 0===y?void 0:y[0];if(!c||!d||!Number(u)||h||!e)return t(xs);const s=e.marketInfos.map((e=>({bidAmount:new i.BN(e.inAmount.toString()),bidMint:e.inputMint.toBase58(),askAmount:new i.BN(e.outAmount.toString()),askMint:e.outputMint.toBase58(),pool:"",priceImpact:e.priceImpactPct}))),n=await j(new i.BN(e.inAmount.toString()),c),o=await j(new i.BN(e.outAmount.toString()),d);return t({route:s,bidAmount:Number(n),askAmount:Number(o),priceImpact:e.priceImpactPct})}),[d,u,c,h,y,j]);(0,ls.Z)((()=>b()),300,[b]);const C=(0,r.useCallback)((async()=>{var e;if(null===y||void 0===y||!y.length)throw new Error("No available route");const t=new ps(m,window.sentre.solana),s=await g({wallet:t,routeInfo:y[0],onTransaction:async e=>(await hs.confirmTransaction(e,"confirmed"),await hs.getTransaction(e,{commitment:"confirmed"}))});if(s.error)throw new Error((null===(e=s.error)||void 0===e?void 0:e.message)||"Unknown Error");const{txid:n,outputAddress:o}=s;return{txId:n,dstAddress:o}}),[g,y,m]);return(0,r.useMemo)((()=>({...e,swap:C,platform:js.Jupiter,loading:!!Number(u)&&f})),[e,u,f,C])})(),m=(0,r.useCallback)((()=>{if(s)return;if(p.loading||h.loading&&"mainnet"===o.net)return a(_t({askAmount:"0",loading:!0}));let e=p.askAmount.toString(),t=h.askAmount.toString(),n=p;Number(t)>1.05*Number(e)&&"mainnet"===o.net&&(n=h);let r=n.askAmount.toString();return a(_t({askAmount:r,loading:!1})),u(n)}),[p,a,s,h]);(0,ls.Z)((()=>m()),1e3,[m]);const x=(0,r.useCallback)((()=>{if(!s)return;let e=p.bidAmount.toString();const t=p.loading;return t&&(e=""),a(_t({bidAmount:e,loading:t})),u(p)}),[p,a,s]);(0,ls.Z)((()=>x()),500,[x]);const j=(0,r.useMemo)((()=>c),[c]);return(0,d.jsx)(ys.Provider,{value:j,children:t})},ws=()=>(0,r.useContext)(ys),bs=()=>{const{route:e,platform:t}=ws(),s=[];return e.forEach(((e,t)=>{0===t&&s.push(e.bidMint),s.push(e.askMint)})),(0,d.jsxs)(c.Space,{children:[s.map(((e,t)=>(0,d.jsxs)(r.Fragment,{children:[t>0&&(0,d.jsx)(m.Z,{name:"chevron-forward-outline"}),(0,d.jsx)(ne.Z,{mintAddress:e})]},t))),!!e.length&&t===js.Jupiter&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(is,{})]}),!e.length&&(0,d.jsx)(r.Fragment,{children:"--"})]})},Cs=e=>{let{reversed:t=!1}=e;const{askMint:s,bidMint:r}=(0,n.useSelector)((e=>e.swap)),{bidAmount:a,askAmount:i}=ws();let l=t?i/a:a/i;a&&i||(l=0);const u=t?r:s,p=t?s:r;return(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(oe.Z,{mintAddress:u}),(0,d.jsx)(c.Typography.Text,{children:"="}),(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(l).format("0.[0000]")}),(0,d.jsx)(oe.Z,{mintAddress:p})]})},As=()=>{const[e,t]=(0,r.useState)(!1);return(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Button,{type:"text",onClick:()=>{t(!e)},shape:"circle",icon:(0,d.jsx)(m.Z,{name:"swap-horizontal-outline"}),style:{background:"transparent"}}),(0,d.jsx)(c.Typography.Text,{children:"1"}),(0,d.jsx)(Cs,{reversed:e})]})},vs=e=>{let{label:t="",content:s="",loading:n=!1}=e;return(0,d.jsxs)(c.Row,{align:"middle",style:{width:"100%"},children:[(0,d.jsx)(c.Col,{flex:"auto",style:{justifyContent:"left"},children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:t})}),(0,d.jsx)(c.Col,{children:n?(0,d.jsx)(c.Skeleton.Input,{style:{width:150},active:!0,size:"small"}):(0,d.jsx)("span",{children:s})})]})},Ts=e=>{let{extraStyle:t}=e;const{slippageTolerance:s,loading:r,bidAmount:a,askAmount:i}=(0,n.useSelector)((e=>e.swap)),{priceImpact:l}=ws(),u=o.util.numeric(l).format("0.[0000]"),p=r&&(!!Number(a)||!!Number(i));return(0,d.jsxs)(c.Row,{gutter:[12,12],style:{...t},children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(vs,{label:"Price impact",content:(0,d.jsx)(c.Typography.Text,{style:{color:U(l)},children:Number(u)>0?o.util.numeric(u).format("0.[0000]%"):"~ 0%"}),loading:p})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(vs,{label:"Price",content:(0,d.jsx)(As,{}),loading:p})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(vs,{label:"Slippage Tolerance",content:`${s}%`,loading:p})}),(0,d.jsx)(c.Col,{span:24,style:{minHeight:24},children:(0,d.jsx)(vs,{label:"Route",content:(0,d.jsx)(bs,{}),loading:p})})]})},Ss=e=>{let{visible:t=!1,onCancel:s=(()=>{})}=e;const[o,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),h=(0,n.useDispatch)(),{bidAmount:x,bidMint:j,askMint:g}=(0,n.useSelector)((e=>e.swap)),{askAmount:y,priceImpact:f,swap:w}=ws();(0,r.useEffect)((()=>{if(f>A.goodSwap)return l(!0);l(!1)}),[f]);const b=(0,r.useCallback)((()=>{s(),a(!1)}),[s]);return(0,d.jsx)(c.Modal,{onCancel:b,closeIcon:(0,d.jsx)(m.Z,{name:"close"}),footer:null,open:t,forceRender:!0,children:(0,d.jsxs)(c.Row,{gutter:[16,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:" Review"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{children:"From"}),(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ne.Z,{mintAddress:j}),(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(oe.Z,{mintAddress:j})})]}),(0,d.jsx)(c.Typography.Title,{level:4,children:x})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(m.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{direction:"vertical",align:"end",children:[(0,d.jsx)(c.Typography.Text,{children:"To"}),(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ne.Z,{mintAddress:g}),(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(oe.Z,{mintAddress:g})})]}),(0,d.jsx)(c.Typography.Title,{level:4,children:y})]})})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Card,{bordered:!1,className:"confirm-info",children:(0,d.jsx)(Ts,{})})}),i&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Checkbox,{checked:o,onChange:()=>a(!o),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",onClick:async()=>{p(!0);try{const{txId:e}=await w();s(),h(_t({bidAmount:"",askAmount:""})),Y("Swap",e)}catch(e){K(e)}finally{p(!1)}},disabled:i&&!o,loading:u,block:!0,size:"large",children:"Swap"})})]})})},ks=()=>{const e=(0,n.useSelector)((e=>e.swap.bidAmount)),t=(0,n.useSelector)((e=>e.swap.askAmount)),s=(0,n.useSelector)((e=>e.swap.bidMint)),o=(0,n.useSelector)((e=>e.swap.loading)),[a,i]=(0,r.useState)(!1),{route:l}=ws(),{balance:u}=St(s),p=(0,r.useMemo)((()=>Number(e)?u<Number(e)?"Balance not enough":Number(t)&&l.length?"":"Route not found":"Enter an amount"),[t,u,e,l.length]);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",onClick:()=>i(!0),disabled:!!p,loading:o&&Number(e)+Number(t)!==0,block:!0,size:"large",children:p||"Review"})}),(0,d.jsx)(Ss,{visible:a,onCancel:()=>i(!1)})]})},Ns=(0,r.memo)(ks);const Bs=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Rs=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,d.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,d.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,d.jsx)(c.Tooltip,{title:"Sentre Protocol",children:(0,d.jsx)(c.Avatar,{src:Bs,size:n})})]})},zs=[.5,1,2,100],Ms=()=>{const e=(0,n.useSelector)((e=>e.swap.slippageTolerance)),t=(0,n.useDispatch)();return(0,d.jsx)(c.Card,{bodyStyle:{padding:16},style:{boxShadow:"none"},children:(0,d.jsxs)(c.Space,{size:24,direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:5,children:"Slippage tolerance"}),(0,d.jsx)(c.Space,{size:12,children:zs.map((s=>{const n=s===e?"selected":"";return(0,d.jsx)(c.Button,{className:`btn-slippage ${n}`,onClick:()=>{(e=>{t(_t({slippageTolerance:e}))})(s)},children:100===s?"Freely":`${s}%`},s)}))})]})})},Is=()=>(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(Rs,{}),(0,d.jsx)(c.Divider,{type:"vertical"}),(0,d.jsx)(c.Popover,{placement:"bottomRight",content:(0,d.jsx)(Ms,{}),trigger:"click",overlayClassName:"slippage",overlayInnerStyle:{borderRadius:24},children:(0,d.jsx)(c.Button,{style:{marginRight:-7},type:"text",icon:(0,d.jsx)(m.Z,{name:"cog-outline"})})})]}),Ps=()=>{const e=(0,n.useDispatch)(),{askMint:t,bidMint:s,askAmount:o}=(0,n.useSelector)((e=>e.swap)),{pushHistory:a,getAllQuery:i}=Vt();(0,r.useEffect)((()=>{if(!t||!s)return;const{bid_mint:e,ask_mint:n}=i();s===e&&t===n||a("/swap",{bid_mint:s,ask_mint:t},!1)}),[t,s,i,a]);return(0,d.jsxs)(c.Row,{gutter:[12,12],justify:"center",children:[(0,d.jsx)(c.Col,{xs:24,md:14,lg:12,xl:8,children:(0,d.jsx)(c.Card,{style:{boxShadow:"unset"},children:(0,d.jsxs)(c.Row,{gutter:[0,16],justify:"end",children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(Is,{})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[0,4],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(rs,{})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{className:"btn-switch-type",size:"small",icon:(0,d.jsx)(m.Z,{name:"git-compare-outline"}),onClick:()=>{e(_t({askMint:s,bidMint:t,bidAmount:o,askAmount:"",isReverse:!1,loading:!0}))}})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(ts,{})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ts,{})}),(0,d.jsx)(c.Col,{span:24}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ns,{})})]})})}),(0,d.jsx)(c.Col,{span:24})]})};var Ds=s(17604);const Ls=e=>{let{poolAddress:t}=e;const s=(0,n.useSelector)((e=>e.pools[t])),[a,i]=(0,r.useState)([]),l=(0,o.useTheme)();return(0,r.useEffect)((()=>{(async()=>{let e=await Promise.all(s.mints.map((async(e,t)=>{const n=me(s.weights,s.weights[t]),r=await o.tokenProvider.findByAddress(e.toBase58());return`${o.util.numeric(n).format("0,0.[00]%")} ${(null===r||void 0===r?void 0:r.symbol)||e.toBase58().substring(0,4)}`})));i(e)})()}),[s.mints,s.weights]),(0,d.jsxs)(c.Space,{size:[16,8],align:"center",wrap:!0,children:[(0,d.jsx)(c.Typography.Text,{style:{whiteSpace:"nowrap"},children:"Balansol LP"}),a.map(((e,t)=>(0,d.jsx)(c.Card,{bodyStyle:{padding:"2px 8px"},style:{background:"dark"===l?"#394360":"#ffffff",marginRight:"-8px",boxShadow:"none"},children:(0,d.jsx)(c.Typography.Text,{children:e})},e+t)))]})},Zs=e=>{let{poolAddress:t}=e;const[s,a]=(0,r.useState)(!1),i=(0,n.useSelector)((e=>e.pools[t])),l=(0,o.useWalletAddress)(),u=i.state;return(0,d.jsxs)(c.Space,{size:10,children:[u.frozen&&(0,d.jsx)(c.Tooltip,{title:"Frozen Pool",children:(0,d.jsx)(m.Z,{name:"snow-outline"})}),i.authority.toBase58()===l&&(0,d.jsx)(c.Tooltip,{title:"Your pool",children:(0,d.jsx)(m.Z,{name:"person-outline"})}),(0,d.jsx)(c.Tooltip,{title:`Pool Address: ${t}`,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",style:{cursor:"pointer"},onClick:e=>{window.open(o.util.explorer(t),"_blank"),null===e||void 0===e||e.stopPropagation()},children:o.util.shortenAddress(t,3,"...")})}),(0,d.jsx)(c.Tooltip,{title:"Copied",open:s,children:(0,d.jsx)(yt(),{text:t,children:(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:"copy-outline"}),onClick:async e=>{a(!0),setTimeout((()=>a(!1)),1500),e.stopPropagation()},style:{width:"unset",height:"unset"}})})})]})},Fs=e=>{let{poolAddress:t}=e;const s=(0,n.useSelector)((e=>e.pools[t])),r=(0,o.useWalletAddress)(),{vol24h:a}=at(t),{pushHistory:i}=Vt(),l=s.state,{TVL:u}=ot(t),{balance:p}=ut(s.mintLpt.toBase58()),h=l.initialized||s.authority.toBase58()===r;return(0,d.jsxs)(c.Card,{className:""+(h?"pool-card-detail":"disabled-pool"),style:{boxShadow:"unset"},onClick:()=>i("/details",{pool:t}),children:[(0,d.jsxs)(c.Row,{style:{marginBottom:"16px"},children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(ft,{size:32,poolAddress:t,max:3})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(Zs,{poolAddress:t})})]}),(0,d.jsxs)(c.Row,{gutter:[0,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ls,{poolAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{align:"bottom",wrap:!1,children:(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Row,{gutter:[32,0],children:[(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"TVL:"}),(0,d.jsxs)(c.Typography.Title,{level:5,children:[" ",o.util.numeric(u).formatCurrency("($0.00a)")]})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Vol 24h:"}),(0,d.jsxs)(c.Typography.Title,{level:5,children:[" ",o.util.numeric(a).formatCurrency("($0.00a)")]})]})}),(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"My Contribution:"}),(0,d.jsxs)(c.Typography.Title,{level:5,children:[" ",o.util.numeric(p).format("0,0.[00]")," LP"]})]})})]})})})})]})]})},Es=()=>{const[e,t]=(0,r.useState)(!0),[s,a]=(0,r.useState)({}),{poolsFilter:l}=(()=>{const[e,t]=(0,r.useState)({}),s=(0,n.useSelector)((e=>e.pools)),a=(0,n.useSelector)((e=>e.searchPools.filterPool)),l=(0,o.useWalletAddress)(),c=(0,o.useAccounts)(),d=(0,r.useCallback)((e=>s[e].authority.toBase58()===l),[s,l]),u=(0,r.useCallback)((async e=>{var t;const n=await i.utils.token.associatedAddress({mint:s[e].mintLpt,owner:new i.web3.PublicKey(l)});return!!(null===(t=c[n.toBase58()])||void 0===t?void 0:t.amount)}),[c,s,l]),p=(0,r.useCallback)((async e=>{let s={};for(const t in e){let n=!1;switch(a){case v.YourPools:n=d(t);break;case v.DepositedPools:n=await u(t);break;default:n=!0}for(const s of e[t].reserves)s.isZero()&&(n=!1);n&&i.web3.PublicKey.isOnCurve(e[t].authority)&&(s[t]=e[t])}t(s)}),[u,d,a]);return(0,r.useEffect)((()=>{p(s)}),[p,s]),{poolsFilter:e,filterListPools:p,checkIsYourPool:d}})(),u=(e=>{const[t,s]=(0,r.useState)({}),a=(0,n.useSelector)((e=>e.searchPools.searchInput)),i=(0,r.useCallback)((async()=>{const t={},n=(await o.tokenProvider.find(a)).map((e=>e.address)),r=Object.keys(e).filter((t=>{if(!a||!e||a.length<3)return!0;const s=e[t],{mintLpt:o,mints:r}=s;if(t.includes(a))return!0;if(o.toBase58().includes(a))return!0;for(const e in r){if(n.includes(r[e].toBase58()))return!0;if(a.includes(r[e].toBase58()))return!0}return!1}));r.sort().map((s=>t[s]=e[s])),s(t)}),[e,a]);return(0,r.useEffect)((()=>{i().then((()=>{setTimeout((()=>{(0,wt.be)()}),500)}))}),[i]),t})(l),p=(0,r.useMemo)((()=>Object.keys(u).sort(((e,t)=>(s[t]||0)-(s[e]||0)))),[u,s]),h=(0,r.useCallback)((async()=>{try{t(!0);const e=await(async()=>{const{data:e}=await P.Z.get(W.api.version.detailTvl);return e.balansol})(),s={};for(const{address:t,tvl:n}of e)s[t]=n;a(s)}catch(e){(0,Ds.cB)(e)}finally{t(!1)}}),[]);return(0,r.useEffect)((()=>{h()}),[h]),e?(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Spin,{})})}):(0,d.jsx)(c.Row,{gutter:[24,24],children:p.map((e=>{const t=u[e];if(!t)return(0,d.jsx)(r.Fragment,{});let s=t.state;return s.uninitialized||s.deleted||t.reserves.map((e=>e.toString())).includes("0")?null:(0,d.jsx)(c.Col,{xs:24,md:24,children:(0,d.jsx)(wt.ZP,{height:198,children:(0,d.jsx)(Fs,{poolAddress:e})})},e)}))})};function Os(e){let{tokenList:t}=e;const s=100-t.reduce(((e,t)=>e+Number(t.weight)),0);return(0,d.jsxs)("div",{style:{display:"flex",marginTop:8},children:[t.map(((e,t)=>0===Number(e.weight)?null:(0,d.jsx)("div",{style:{display:"flex",justifyContent:"center",width:1!==t?`calc(${e.weight}% + 8px)`:`${e.weight}%`,background:`${o.util.randomColor(e.addressToken||"_",1)}`,height:"8px",borderRadius:"20px",zIndex:`${t}`,marginRight:"-8px",alignItems:"center"},children:(0,d.jsx)(ne.Z,{mintAddress:e.addressToken})},`${e.addressToken}${t}`))),(0,d.jsx)("div",{style:{width:`${s}%`,background:"#142042",borderRadius:"20px"}})]})}const Ws=e=>{let{tokenInfo:t,onChangeWeight:s,onChangeLock:n,onRemoveToken:o}=e;const{weight:r,isLocked:a}=t;return(0,d.jsxs)(c.Space,{size:4,children:[(0,d.jsx)(j,{value:r,controls:!1,size:"large",bordered:!1,onValue:s,addonAfter:(0,d.jsx)("div",{style:{marginLeft:-4},children:"%"}),maxLength:5,placeholder:"0"}),(0,d.jsx)(c.Button,{onClick:()=>{n(!a)},shape:"circle",icon:(0,d.jsx)(m.Z,{name:a?"lock-closed-outline":"lock-open-outline"}),style:{background:"unset"},type:"text"}),(0,d.jsx)(c.Button,{onClick:o,shape:"circle",icon:(0,d.jsx)(m.Z,{name:"trash-outline"}),type:"text"})]})},Ys=e=>{let{tokenList:t,mintSetup:s,onChangeTokenInfo:n,onRemoveToken:r,id:a}=e;const i=(0,o.useTheme)();return(0,d.jsxs)(c.Row,{wrap:!1,children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)($t.Z,{value:s.addressToken,onChange:e=>{n({...s,addressToken:e},a)},style:{background:"dark"===i?"#394360":"#F2F4FA"}})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(Ws,{tokenInfo:s,onChangeWeight:e=>{n({...s,weight:e},a)},onChangeLock:e=>{n({...s,isLocked:e},a)},onRemoveToken:()=>r(a)})})]})},Ks=new i.BN(25e5),Us=new i.BN(5e5),Gs={addressToken:"",weight:"",isLocked:!1},qs=e=>{let{setCurrentStep:t}=e;const[s,n]=(0,r.useState)([]),[o,a]=(0,r.useState)(-1),[l,u]=(0,r.useState)(!1),p=(0,r.useCallback)((()=>{let e=100,t=0,r=-1;s.forEach(((s,n)=>{if(!(s.isLocked||n===o))return r=n;e-=Number(s.weight),t++})),e<0&&(e=0);const a=s.length-t;let i=e/a;const l=JSON.parse(JSON.stringify(s));l.forEach(((t,s)=>{if(!(t.isLocked||s===o))return s===r?t.weight=e.toFixed(2):(t.weight=i.toFixed(2),e-=Number(t.weight))})),JSON.stringify(s)!==JSON.stringify(l)&&n(l)}),[o,s]);(0,r.useEffect)((()=>{p()}),[p]);const h=(e,t)=>{if(l)return;const o=[...s];o[t]={...e},n(o),e.weight!==s[t].weight&&a(t)},x=e=>{l||n(s.filter(((t,s)=>s!==e)))};(0,r.useEffect)((()=>{n([{...Gs},{...Gs}])}),[]);const j=(0,r.useMemo)((()=>{if(s.length<2)return!0;let e=0;for(const t of s){if(!t.addressToken||!Number(t.weight))return!0;e+=Number(t.weight)}return 100!==e}),[s]);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[0,12],children:[(0,d.jsx)(c.Col,{flex:"auto",children:"Token"}),(0,d.jsx)(c.Col,{children:"Weight"}),s.map(((e,t)=>(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Ys,{tokenList:s,mintSetup:e,onChangeTokenInfo:h,onRemoveToken:x,id:t})},e.addressToken+t))),s.length<8&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{icon:(0,d.jsx)(m.Z,{name:"add-outline"}),onClick:()=>{l||s.length>=8||n([...s,{...Gs}])},ghost:!0,disabled:l,children:"Add a token"})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Os,{tokenList:s})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[16,16],children:(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",onClick:async()=>{try{u(!0);const e=s.map((e=>{let{addressToken:t,weight:s}=e;const n=Number(s)*b;return{publicKey:new i.web3.PublicKey(t),action:te.MintActionStates.Active,amountIn:new i.BN(0),weight:new i.BN(n)}})),{txId:n}=await window.balansol.initializePool({fee:Ks,taxFee:Us,mintsConfigs:e,taxMan:W.sol.taxmanAddress,sendAndConfirm:!0});Y("Create pool",n),t(w.addLiquidity)}catch(e){K(e)}finally{u(!1)}},disabled:j,loading:l,block:!0,children:"Supply"})})})})]})};var Vs=s(23570);const Hs="pools",Js=(0,Xt.createAsyncThunk)("pools/getPools",(async()=>{const e=await window.balansol.getAllPoolData();let t={};for(const s of e){const e=s.account;e.state.deleted||(t[s.publicKey.toBase58()]=e)}return t})),$s=(0,Xt.createAsyncThunk)("pools/getPool",(async(e,t)=>{let{address:s}=e,{getState:n}=t;if(!B.account.isAddress(s))throw new Error("Invalid pool address");const{pools:{[s]:o}}=n();if(o)return{[s]:o};return{[s]:await window.balansol.getPoolData(s)}})),Xs=(0,Xt.createAsyncThunk)("pools/upsetPool",(async e=>{let{address:t,data:s}=e;if(!B.account.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Qs=(0,Xt.createAsyncThunk)("pools/removePool",(async(e,t)=>{let{address:s}=e,{getState:n}=t;const{pools:o}=n();if(!B.account.isAddress(s))throw new Error("Invalid pool address");if(!o[s])throw new Error("Pool address does not exist!");const r={...o};return delete r[s],r})),_s=(0,Xt.createSlice)({name:Hs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Js.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase($s.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Xs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Qs.fulfilled,((e,t)=>{let{payload:s}=t;return s}))}}).reducer,en=e=>{let{poolAddress:t,setCurrentStep:s,amounts:a,onClose:i=(()=>{})}=e;const l=(0,n.useSelector)((e=>e.pools[t])),u=(0,n.useDispatch)(),[p,h]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1),[j,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!0),{decimalizeMintAmount:b}=nt(),{getMintBalance:C}=Mt(),A=(0,st.G)(),{createWrapSolTxIfNeed:v}=Pt(),T=(0,r.useCallback)((async()=>{const e=await Promise.all(l.mints.map((async e=>await A(e)||0)));h(e)}),[A,l.mints]);(0,r.useEffect)((()=>{T()}),[T]);const S=(0,r.useMemo)((()=>{let e=0;return a.forEach(((t,s)=>{l.reserves[s].isZero()&&(e+=Number(t)*(p[s]||0))})),e}),[a,l.reserves,p]),k=(0,r.useCallback)((async()=>{const{mints:e}=l;for(let t in a){const{balance:s}=await C(e[t].toBase58(),!0);if(Number(a[t])>s||Number(a[t])<=0)return f(!0)}return f(!1)}),[a,C,l]);return(0,r.useEffect)((()=>{k()}),[k]),(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[12,12],children:l.mints.map(((e,t)=>{const s=Number(a[t])*(p[t]||0);return(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{flex:1,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:(0,d.jsx)(oe.Z,{mintAddress:e.toBase58()})}),(0,d.jsxs)(c.Typography.Text,{type:"secondary",children:["(",(0,d.jsx)(Vs.Z,{mintAddress:e}),")"]})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(s).format("$0,0.[0000]")})})]},t)},e.toBase58())}))})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:1,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Total value"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Title,{level:3,children:["$",o.util.numeric(S).format("0,0.[0000]")]})})]})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{type:"ghost",disabled:m,loading:j,onClick:async()=>{try{g(!0);const{txId:e}=await window.balansol.closePool(t);Y("Close pool",e),i(),u(Qs({address:t}))}catch(e){K(e)}finally{g(!1)}},block:!0,children:"Delete pool"})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{type:"primary",onClick:async()=>{try{x(!0);const e=[];for(const s in l.mints){const n=l.mints[s];if(!l.reserves[s].isZero())continue;const o=await b(a[s],n),r=await v(n.toBase58(),a[s]);r&&e.push(r);const{transaction:i}=await window.balansol.initializeJoin({poolAddress:t,mint:n,amountIn:o,sendAndConfirm:!1});e.push(i)}const n=(0,o.getAnchorProvider)(),r=await n.sendAll(e.map((e=>({tx:e,signers:[]}))));Y("Fund pool",r[r.length]),s(w.confirmCreatePool)}catch(e){K(e)}finally{x(!1)}},disabled:y||j,loading:m,block:!0,children:"Supply"})})]})},tn=e=>{let{setCurrentStep:t,poolAddress:s,onClose:a=(()=>{})}=e;const[i,l]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[h,m]=(0,r.useState)(0),x=(0,n.useSelector)((e=>e.pools[s])),{undecimalizeMintAmount:j}=nt(),g=(0,st.G)(),y=(0,o.useGetMintDecimals)(),f=e=>h!==e&&Number(i[h])>0&&Number(u[e])>0&&Number(u[e])!==Number(i[e]),w=(0,r.useCallback)((async()=>{if(!x||0!==i.length)return;const e=await Promise.all(x.mints.map(((e,t)=>Number(i[t])?i[t]:j(x.reserves[t],e))));l(e)}),[i,x,j]);(0,r.useEffect)((()=>{w()}),[w]);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{justify:"center",gutter:[8,8],children:x.mints.map(((e,t)=>{const s=me(x.weights,x.weights[t]);return(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Rt,{amount:i[t],selectedMint:e.toBase58(),onChangeAmount:x.reserves[t].toNumber()?void 0:e=>(async(e,t)=>{const s=[...i];s[t]=e,m(t),l(s);const{mints:n,weights:o}=x,r=await g(n[t]);if(!r)return null;const a=me(o,o[t]),c=await Promise.all(n.map((async(s,n)=>{if(t===n)return"";const i=await g(s);if(!i)return"";const l=me(o,o[n]),c=await y({mintAddress:s.toBase58()});return(r*Number(e)/a*(l/i)).toFixed(c)})));p(c)})(e,t),mintLabel:(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Typography.Text,{children:(0,d.jsx)(oe.Z,{mintAddress:e.toBase58()||""})}),(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(s).format("0,0.[0000]%")})]}),placeholder:u[t],force:!0,ratioButton:f(t)&&(0,d.jsx)(c.Tooltip,{title:u[t],children:(0,d.jsx)(c.Button,{type:"text",onClick:()=>(async e=>{const t=[...i];t[e]=u[e],l(t)})(t),style:{marginRight:-15},children:"Apply suggestion"})})})},`${e.toBase58()+t}`)}))})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(en,{onClose:a,amounts:i,poolAddress:s,setCurrentStep:t})})]})},sn=[{title:"TOKEN",dataIndex:"token",render:e=>(0,d.jsx)(c.Typography.Text,{children:(0,d.jsxs)(c.Space,{size:8,children:[(0,d.jsx)(ne.Z,{mintAddress:e.addressToken}),(0,d.jsx)(oe.Z,{mintAddress:e.addressToken})]})})},{title:"WEIGHT",dataIndex:"token",render:e=>(0,d.jsx)(c.Typography.Text,{style:{fontWeight:700},children:Number(e.weight)})},{title:"AMOUNT",dataIndex:"amount",render:(e,t)=>(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(e).format(`0,0.[${"0".repeat(t.token.decimal||9)}]a`)})},{title:"VALUE",dataIndex:"value",render:(e,t)=>(0,d.jsx)(c.Typography.Text,{children:o.util.numeric(e).format("$0,0.[0000]")})}],nn=e=>{let{onConfirm:t,poolAddress:s}=e;const a=(0,n.useSelector)((e=>e.pools[s])),[i,l]=(0,r.useState)([]),[u,p]=(0,r.useState)(0),{undecimalizeMintAmount:h}=nt(),m=(0,st.G)(),x=(0,r.useCallback)((async()=>{if(!a)return l([]),p(0);const{mints:e,reserves:t}=a;let s=0;const n=await Promise.all(e.map((async(e,n)=>{const r=e.toBase58(),i=de(a,e),l=await o.tokenProvider.findByAddress(r);let c=await h(t[n],r);const d=await m(r);let u=Number(c)*(d||0);return s+=u,{token:{addressToken:r,weight:o.util.numeric(i.normalizedWeight).format("0,0.[00]"),isLocked:!0,decimal:null===l||void 0===l?void 0:l.decimals},amount:Number(c),value:u}})));p(s),l(n)}),[m,a,h]);return(0,r.useEffect)((()=>{x()}),[x]),(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Table,{columns:sn,dataSource:i,rowClassName:(e,t)=>t%2?"odd-row":"even-row",pagination:!1,rowKey:e=>e.token.addressToken,scroll:{x:!0}})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Card,{style:{borderRadius:"8px"},bodyStyle:{padding:16},bordered:!1,className:"card-total-value",children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:1,children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Total value"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Title,{level:3,children:["$",o.util.numeric(u).format("0,0.[00]")]})})]})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{type:"primary",onClick:t,style:{borderRadius:40},block:!0,size:"large",children:"Confirm"})})]})},{Step:on}=c.Steps,rn=e=>{let{onClose:t=(()=>{})}=e;const s=(0,n.useSelector)((e=>e.pools)),[a,i]=(0,r.useState)(w.setupToken),[l,u]=(0,r.useState)(""),p=(0,o.useWalletAddress)(),h=(0,r.useCallback)((async()=>{if(!l){for(const e in s){const t=s[e];if(t.authority.toBase58()===p&&t.state.uninitialized)return i(w.addLiquidity),u(e)}return u("")}}),[l,s,p]);(0,r.useEffect)((()=>{h()}),[h]);const m=(0,r.useMemo)((()=>{switch(a){case w.setupToken:return(0,d.jsx)(qs,{setCurrentStep:i});case w.addLiquidity:return s[l]?(0,d.jsx)(tn,{setCurrentStep:i,poolAddress:l,onClose:t}):null;case w.confirmCreatePool:return s[l]?(0,d.jsx)(nn,{onConfirm:t,poolAddress:l}):null}}),[a,t,l,s]);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:4,children:"New Pool"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Steps,{size:"small",current:a,children:[(0,d.jsx)(on,{title:"Select tokens & weights"}),(0,d.jsx)(on,{title:"Add liquidity"}),(0,d.jsx)(on,{title:"Confirm"})]})}),(0,d.jsx)(c.Col,{span:24,children:m})]})},an=()=>{const e=(0,n.useSelector)((e=>e.pools)),[t,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),l=(0,o.useWalletAddress)(),u=(0,r.useCallback)((async()=>{for(const t in e){const s=e[t];if(s.authority.toBase58()===l&&s.state.uninitialized)return i(!0)}return i(!1)}),[e,l]);return(0,r.useEffect)((()=>{u()}),[u]),(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(c.Button,{icon:(0,d.jsx)(m.Z,{name:a?"sync-outline":"add-outline"}),onClick:()=>s(!0),style:{borderRadius:40},block:!0,ghost:!0,children:a?"Resume":"New Pool"}),(0,d.jsx)(c.Modal,{open:t,onCancel:()=>{s(!1)},closeIcon:(0,d.jsx)(m.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,width:572,children:(0,d.jsx)(rn,{onClose:()=>s(!1)})})]})},ln="searchPools",cn={searchInput:"",filterPool:v.AllPools},dn=(0,Xt.createAsyncThunk)("searchPools/setSearchSelection",(async e=>{let{filterPool:t}=e;return{filterPool:t}})),un=(0,Xt.createAsyncThunk)("searchPools/setSearchInput",(async e=>{let{searchText:t}=e;return{searchInput:t}})),pn=(0,Xt.createSlice)({name:ln,initialState:cn,reducers:{},extraReducers:e=>{e.addCase(dn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(un.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,hn=()=>{const{searchInput:e,filterPool:t}=(0,n.useSelector)((e=>e.searchPools)),s=(0,n.useDispatch)(),o=e=>{s(un({searchText:e}))};return(0,d.jsxs)(c.Row,{className:"search-pools",gutter:[12,12],children:[(0,d.jsx)(c.Col,{md:8,xs:10,children:(0,d.jsxs)(c.Select,{value:t,onChange:e=>{s(dn({filterPool:e}))},style:{width:"100%",height:"32px"},className:"category",children:[(0,d.jsx)(c.Select.Option,{value:v.AllPools,children:"All pools"}),(0,d.jsx)(c.Select.Option,{value:v.DepositedPools,children:"Deposited pools"}),(0,d.jsx)(c.Select.Option,{value:v.YourPools,children:"Your pools"})]})}),(0,d.jsx)(c.Col,{flex:"1 0",children:(0,d.jsx)(c.Input,{placeholder:"Search",className:"search",value:e,prefix:e?(0,d.jsx)(c.Button,{type:"text",style:{width:"auto",height:"auto",background:"transparent",marginLeft:-7},onClick:()=>o(""),icon:(0,d.jsx)(m.Z,{name:"close-outline"})}):(0,d.jsx)(m.Z,{style:{fontSize:"24px",marginLeft:-5},name:"search-outline"}),onChange:e=>{o(e.target.value)},style:{borderRadius:"24px",height:"32px"}})})]})},mn=()=>{const e=(0,o.useInfix)()<o.Infix.md;return(0,d.jsxs)(c.Row,{gutter:[12,12],justify:"center",align:"middle",children:[(0,d.jsx)(c.Col,{xs:24,md:20,lg:16,xl:12,xxl:8,children:(0,d.jsxs)(c.Row,{gutter:[12,12],justify:"space-between",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(hn,{})}),(0,d.jsx)(c.Col,{span:e?24:void 0,children:(0,d.jsx)(an,{})})]})}),(0,d.jsx)(c.Col,{span:24}),(0,d.jsx)(c.Col,{xs:24,md:20,lg:16,xl:12,xxl:8,children:(0,d.jsx)(Es,{})}),(0,d.jsx)(c.Col,{span:24})]})};const xn=new(s(54882).C)("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDU4M0Q5MmIwMGJlNjZDNjg2NDUyY0JkNTZEMTlmOWZlMTRhNjhCYTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTg4MDM1NjE3MTcsIm5hbWUiOiJCb29zdGVyRGV2In0.kaP_EXFB2q7Zo8_CWZfGI1n5R-AoZzfVTWpDdZ_REcM",["launchpad"]),jn=e=>{const t=(0,n.useSelector)((t=>t.launchpads[e])),[s,o]=(0,r.useState)();return(0,r.useEffect)((()=>{(async()=>{const e=t.metadata,s=await xn.methods.launchpad.get(e);o(s)})()}),[e,t]),{launchpadData:t,metadata:s}},gn=e=>{let{children:t,style:s}=e;const n=(0,o.useTheme)();return(0,d.jsx)(c.Tag,{style:{background:"dark"===n?"#394360":"#FFFFFF",border:"none",borderRadius:4,marginRight:0,...s},children:t})},yn=(0,r.memo)((e=>{let{endTime:t}=e;const s=Math.floor(Date.now()/1e3),n=Date.now()/1e3,o=We().duration(t-s,"seconds"),[a,i]=(0,r.useState)({days:Math.floor(o.asDays()),hours:o.hours(),minutes:o.minutes(),seconds:o.seconds()}),l=(0,r.useCallback)((async()=>{if(!t||t<n)return;const e=We().duration(t-s,"seconds"),o=Math.floor(e.asDays()),r=e.hours(),a=e.minutes(),l=e.seconds();i({days:o,hours:r,minutes:a,seconds:l})}),[t,n,s]);return(0,r.useEffect)((()=>{const e=setInterval((()=>l()),1e3);return()=>clearInterval(e)}),[l]),t?t<n?(0,d.jsx)(gn,{children:(0,d.jsx)(c.Typography.Text,{children:"Expired"})}):(0,d.jsxs)(c.Space,{size:4,children:[!!a.days&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(gn,{children:(0,d.jsxs)(c.Typography.Text,{children:[a.days,"d"]})}),":"]}),(0,d.jsx)(gn,{children:(0,d.jsxs)(c.Typography.Text,{children:[a.hours,"h"]})}),":",(0,d.jsx)(gn,{children:(0,d.jsxs)(c.Typography.Text,{children:[a.minutes,"m"]})}),!a.days&&(0,d.jsxs)(r.Fragment,{children:[":",(0,d.jsx)(gn,{children:(0,d.jsxs)(c.Typography.Text,{children:[a.seconds,"s"]})})]})]}):(0,d.jsx)(c.Typography.Text,{children:"Unlimited"})})),fn=e=>{let{launchpadAddress:t}=e;const s=(0,o.useTheme)(),{launchpadData:n}=jn(t),{startTime:r,endTime:a}=n,i=a.toNumber()-r.toNumber(),l=(Date.now()/1e3-r.toNumber())/i,u=Date.now()/1e3>r.toNumber(),p=u?a:r;return(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:u?" End in":"Start in"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(yn,{endTime:p.toNumber()}),u&&(0,d.jsx)(c.Progress,{type:"circle",percent:100*l,showInfo:!1,className:"end-time-progress",strokeWidth:10,strokeColor:"dark"===s?"#63E0B3":"#081438"})]})})]})},wn=(e,t)=>{const s=(0,n.useSelector)((e=>e.cheques)),a=(0,o.useWalletAddress)(),i=(0,r.useMemo)((()=>Object.keys(s).filter((n=>{const{authority:o,launchpad:r}=s[n];return t?o.toBase58()===a&&r.toBase58()===e:r.toBase58()===e}))),[s,e,t,a]);return i},bn=(e,t)=>{const s=(0,n.useSelector)((e=>e.cheques)),o=wn(e,t);return(0,r.useMemo)((()=>{let e=0,t=new i.BN(0),n=new i.BN(0);const r=[];for(const a of o){const{authority:o,bidAmount:i,askAmount:l}=s[a];t=t.add(i),n=n.add(l),r.includes(o.toBase58())||(r.push(o.toBase58()),e+=1)}return{totalUsers:e,totalBid:t,totalAsk:n}}),[s,o])},Cn=e=>{let{direction:t="row",launchpadAddress:s}=e;const{totalAsk:n}=bn(s),{launchpadData:a}=jn(s),i=(0,o.useMintDecimals)({mintAddress:null===a||void 0===a?void 0:a.mint.toBase58()})||0,l=(0,r.useMemo)((()=>Number(ce.undecimalize(n,i||0))/Number(ce.undecimalize(null===a||void 0===a?void 0:a.startReserves[0],i))),[i,null===a||void 0===a?void 0:a.startReserves,n]),u=Date.now()/1e3>a.startTime.toNumber();return(0,d.jsxs)(c.Row,{gutter:[12,12],align:"middle",style:{flexFlow:t},children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:u?"Sold":"Total raise"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{children:[(0,d.jsxs)(c.Typography.Title,{level:5,type:"success",children:[u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Zt.Z,{mintAddress:a.mint,amount:n,formatter:"0,0.[000]"}),"/"]}),(0,d.jsx)(Zt.Z,{mintAddress:a.mint,amount:null===a||void 0===a?void 0:a.startReserves[0],formatter:"0,0.[000]"})," ",(0,d.jsx)(oe.Z,{mintAddress:a.mint})]}),u&&(0,d.jsxs)(c.Typography.Title,{level:5,children:["(",o.util.numeric(l).format("%0,0.[00]"),")"]})]})})]})},An=e=>{let{launchpadAddress:t,isDetail:s=!1,direction:n="row"}=e;const{launchpadData:a}=jn(t),{totalBid:i,totalUsers:l}=bn(t),u=(0,o.useTheme)(),p=(0,o.useMintDecimals)({mintAddress:a.stableMint.toBase58()})||0,h=(0,r.useMemo)((()=>Number(lt.utilsBN.undecimalize(i,p||0))/Number(lt.utilsBN.undecimalize(null===a||void 0===a?void 0:a.startReserves[1],p))),[null===a||void 0===a?void 0:a.startReserves,p,i]),m=Date.now()/1e3>a.startTime.toNumber();return(0,d.jsxs)(c.Row,{gutter:[8,8],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[12,12],style:{flexFlow:n},children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Fundraising goal"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{children:[(0,d.jsxs)(c.Typography.Title,{level:5,type:"success",children:[m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Zt.Z,{mintAddress:a.stableMint,amount:i,formatter:"0,0.[000]"}),"/"]}),(0,d.jsx)(Zt.Z,{mintAddress:a.stableMint,amount:null===a||void 0===a?void 0:a.startReserves[1],formatter:"0,0.[000]"})," ",(0,d.jsx)(oe.Z,{mintAddress:null===a||void 0===a?void 0:a.stableMint.toBase58()})]}),m&&(0,d.jsxs)(c.Typography.Title,{level:5,children:["(",o.util.numeric(h).format("%0,0.[00]"),")"]})]})})]})}),!s&&m&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[8,8],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Progress,{strokeColor:"dark"===u?"#63E0B3":"#081438",percent:100*h,showInfo:!1,className:h>=1?"sold-progress active":"sold-progress"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Participants:"}),(0,d.jsx)(c.Typography.Text,{children:l})]})})]})})]})},vn=e=>{let{category:t,style:s}=e;const n=(0,r.useCallback)((e=>{const s=N[t];return e?`rgba(${s[0]},${s[1]},${s[2]},${e})`:`rgba(${s[0]},${s[1]},${s[2]},1)`}),[t]);return(0,r.useEffect)((()=>{n()}),[n]),(0,d.jsx)(c.Tag,{style:{color:n(),...s,borderRadius:8},color:n("0.1"),children:t})},Tn=e=>{let{launchpadAddress:t}=e;const{metadata:s}=jn(t);return(0,d.jsx)(c.Spin,{spinning:!s,children:(0,d.jsxs)(c.Space,{size:24,align:"center",children:[(0,d.jsx)(c.Avatar,{shape:"square",size:69,src:null===s||void 0===s?void 0:s.coverPhoto}),(0,d.jsxs)(c.Space,{size:0,direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:4,children:null===s||void 0===s?void 0:s.projectName}),(0,d.jsx)(c.Space,{size:4,wrap:!0,children:null===s||void 0===s?void 0:s.category.map((e=>(0,d.jsx)(vn,{category:e,style:{margin:0}},e)))}),!(null===s||void 0===s||!s.socials.length)&&(0,d.jsx)(c.Space,{size:2,children:null===s||void 0===s?void 0:s.socials.map(((e,t)=>{const s=H(e);return(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:null===s||void 0===s?void 0:s.iconName}),onClick:t=>((e,t)=>{if(e.stopPropagation(),t&&V(t))return window.open(t,"_blank")})(t,e)},t)}))})]})]})})},Sn=e=>(0,n.useSelector)((t=>t.launchpads[e]));function kn(e,t,s){let n=(e>t?e-t:t-e)*s;return e>t?e-n:e+n}const Nn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;const s=Sn(e),[n,o]=(0,r.useState)((new Date).getTime()/1e3);(0,r.useEffect)((()=>{let e=setInterval((()=>{o((new Date).getTime()/1e3)}),t);return()=>clearInterval(e)}),[t]);const a=(0,r.useMemo)((()=>{let e=s.startTime.toNumber(),t=s.endTime.toNumber(),o=s.startWeights[0].toNumber(),r=s.startWeights[1].toNumber(),a=s.endWeights[0].toNumber(),i=s.endWeights[1].toNumber(),l=(n-e)/(t-e);return[kn(o,a,l),kn(r,i,l)]}),[n,s.endTime,s.endWeights,s.startTime,s.startWeights]);return a},Bn=()=>(0,r.useCallback)(((e,t,s,n,o)=>{const r=lt.utilsBN.toNumber(e)+lt.utilsBN.toNumber(o),a=lt.utilsBN.toNumber(e)/r,i=lt.utilsBN.toNumber(o)/r,l=lt.utilsBN.toNumber(t);return a*lt.utilsBN.toNumber(n)*s/(l*i)}),[]),Rn=()=>{const e=(0,n.useSelector)((e=>e.cheques)),t=(0,n.useSelector)((e=>e.launchpads)),s=(0,r.useCallback)(((s,n)=>{const{startReserves:o}=t[s];let r=new i.BN(0),a=new i.BN(0);for(const t in e){const{createAt:o,askAmount:i,bidAmount:l,launchpad:c}=e[t];c.toBase58()===s&&(1e3*o.toNumber()>n||(a=a.add(i),r=a.add(l)))}return[o[0].sub(a),o[1].add(r)]}),[e,t]);return s};function zn(e,t,s){let n=(e>t?e-t:t-e)*s;return e>t?e-n:e+n}const Mn=()=>{const e=(0,n.useSelector)((e=>e.launchpads));return(0,r.useCallback)((function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=e[s];let l=s?i.startTime.toNumber():r,c=s?i.endTime.toNumber():a,d=s?i.startWeights[0].toNumber():n[0].toNumber(),u=s?i.startWeights[1].toNumber():n[1].toNumber(),p=s?i.endWeights[0].toNumber():o[0].toNumber(),h=s?i.endWeights[1].toNumber():o[1].toNumber(),m=(t/1e3-l)/(c-l);return[zn(d,p,m),zn(u,h,m)]}),[e])},In=e=>{const[t,s]=(0,r.useState)(0),{launchpadData:a}=jn(e),i=(0,n.useSelector)((e=>e.pools)),l=Nn(e,5e3),c=Bn(),d=Rn(),u=Mn(),p=(0,r.useCallback)((async()=>{const{pool:t,endTime:n}=a,{reserves:r}=i[t.toBase58()],p=await o.tokenProvider.getPrice(a.stableMint)||0;let h=r,m=l;(h[0].isZero()||h[1].isZero())&&(m=u(1e3*n.toNumber(),e),h=d(e,1e3*n.toNumber()));const x=c(lt.utilsBN.decimalize(m[0],9),h[0],p,h[1],lt.utilsBN.decimalize(m[1],9));return s(x)}),[a,i,l,c,u,e,d]);return(0,ls.Z)(p,500,[p]),(0,r.useEffect)((()=>{p()}),[p]),t},Pn=e=>{let{direction:t="row",launchpadAddress:s}=e;const n=In(s);return(0,d.jsxs)(c.Row,{gutter:[12,12],style:{flexFlow:t},children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Price"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Text,{children:["$",o.util.numeric(n).format("0,0.[000]")," "]})})]})},Dn=e=>{let{launchpadAddress:t,style:s}=e;const{metadata:n,launchpadData:{authority:r}}=jn(t),a=(0,o.useWalletAddress)(),{pushHistory:i}=Vt(),l=r.toBase58()===a;return(0,d.jsxs)(c.Row,{className:"project-card",onClick:()=>i("/launchpad-details",{launchpadAddress:t}),children:[(0,d.jsx)(c.Col,{span:24,className:"project-card_header",children:(0,d.jsx)(c.Spin,{spinning:!n,children:(0,d.jsx)(c.Image,{style:{aspectRatio:"16/9",objectFit:"cover"},src:null===n||void 0===n?void 0:n.coverPhoto,preview:!1})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Card,{className:"project-card_body",style:{...s},children:(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[24,24],wrap:!1,justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(Tn,{launchpadAddress:t})}),l&&(0,d.jsx)(c.Col,{children:(0,d.jsx)(m.Z,{className:"owner",name:"person-outline"})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(fn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Pn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Cn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(An,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Paragraph,{ellipsis:{rows:2},style:{margin:0},type:"secondary",children:null===n||void 0===n?void 0:n.description})})]})})})]})},Ln=e=>{let{launchpadAddress:t}=e;const{pushHistory:s}=Vt(),n=(0,o.useWidth)(),r=bn(t),a=n<983?"row":"column";return(0,d.jsx)(c.Card,{hoverable:!0,style:{cursor:"pointer"},onClick:()=>s("/launchpad-details",{launchpadAddress:t}),className:"completed-card",children:(0,d.jsxs)(c.Row,{gutter:[8,8],align:"middle",children:[(0,d.jsx)(c.Col,{sm:24,xs:24,md:24,lg:8,children:(0,d.jsx)(Tn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{sm:24,xs:24,md:24,lg:16,children:(0,d.jsxs)(c.Row,{gutter:[8,8],style:{height:"100%"},children:[(0,d.jsx)(c.Col,{xs:24,sm:24,md:24,lg:8,children:(0,d.jsxs)(c.Row,{gutter:[12,12],style:{flexFlow:a},children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Participants"})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:r.totalUsers})})]})}),(0,d.jsx)(c.Col,{xs:24,sm:24,md:24,lg:8,children:(0,d.jsx)(Pn,{launchpadAddress:t,direction:a})}),(0,d.jsx)(c.Col,{xs:24,sm:24,md:24,lg:8,children:(0,d.jsx)(An,{launchpadAddress:t,isDetail:!0,direction:a})})]})})]})})},Zn=e=>{const t=(0,n.useSelector)((e=>e.launchpads));return(0,r.useMemo)((()=>{const s=[],n=Object.keys(t).filter((e=>!t[e].state.uninitialized));if(n.sort(((e,s)=>{const n=t[e].startTime.toNumber();return t[s].startTime.toNumber()-n})),!e)return n;for(const o of n){const n=t[o];let r=!0;const a=1e3*n.startTime.toNumber(),i=1e3*n.endTime.toNumber(),l=Date.now();switch(e){case S.active:(a>l||i<l)&&(r=!1);break;case S.upcoming:(a<l||i<l)&&(r=!1);break;case S.completed:i>=l&&(r=!1)}r&&s.push(o)}return s}),[t,e])},Fn=()=>{const{getQuery:e,pushHistory:t}=Vt(),s=e("state")||"",n=Zn(s),o=s===S.completed,r=s===S.upcoming;return(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{xs:24,sm:24,md:20,lg:18,children:(0,d.jsxs)(c.Row,{gutter:[0,18],id:"all-launchpad",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{onClick:()=>t("/launchpad"),icon:(0,d.jsx)(m.Z,{name:"chevron-back-outline"}),type:"text",children:"Back"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:16,align:"center",children:[(0,d.jsxs)(c.Typography.Title,{level:2,children:["All ",s," launchpad"]}),(0,d.jsx)(c.Typography.Text,{className:"amount-launchpad",children:n.length})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[12,12],children:n.map((e=>(0,d.jsx)(c.Col,{xs:24,md:o?24:12,children:o?(0,d.jsx)(Ln,{launchpadAddress:e}):(0,d.jsx)(Dn,{style:{minHeight:r?344:404},launchpadAddress:e})},e)))})}),(0,d.jsx)(c.Col,{span:24})]})})})};var En=s(88479);const On=()=>{const{pushHistory:e}=Vt();return(0,d.jsx)(c.Card,{className:"banner",bordered:!1,children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Typography.Title,{style:{color:"#F3F3F5",fontWeight:800},children:["The"," ",(0,d.jsx)("span",{style:{color:"#081438"},children:"Liquidity Bootstrapping Launchpad"}),(0,d.jsx)("br",{})," for new projects on Solana"]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{style:{color:"#CED0D7",fontSize:20},children:"Full support in project incubation"})}),(0,d.jsx)(c.Col,{span:24}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[8,8],justify:"center",children:[(0,d.jsx)(c.Col,{xs:{order:2},sm:{order:1},md:{order:1},children:(0,d.jsx)(En.PopupButton,{id:"iWsRUCat",style:{minWidth:176},className:"balansol-btn balansol-btn-default balansol-btn-lg balansol-btn-background-ghost",children:"Contact us"})}),(0,d.jsx)(c.Col,{xs:{order:1},sm:{order:2},md:{order:2},children:(0,d.jsx)(c.Button,{onClick:()=>e("/launchpad-create"),size:"large",type:"primary",children:"Create a launchpad"})})]})})]})})},Wn=e=>{let{state:t}=e;const s=Zn(t),{pushHistory:n}=Vt(),o=t===S.completed,r=t===S.upcoming,a=o?5:2;return(0,d.jsxs)(c.Row,{gutter:[0,8],id:"launchpad",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{size:16,align:"center",children:[(0,d.jsx)(c.Typography.Title,{level:2,style:{textTransform:"capitalize"},children:t}),(0,d.jsx)(c.Typography.Text,{className:"amount-launchpad",type:"success",children:s.length})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Button,{onClick:()=>n("/launchpad-all",{state:t}),type:"link",disabled:!s.length,style:{padding:4},children:"View all"})})]})}),(0,d.jsx)(c.Col,{span:24,children:s.length?(0,d.jsx)(c.Row,{gutter:[24,24],children:s.slice(0,a).map((e=>(0,d.jsx)(c.Col,{md:24,lg:o?24:12,children:o?(0,d.jsx)(Ln,{launchpadAddress:e}):(0,d.jsx)(Dn,{style:{minHeight:r?344:404},launchpadAddress:e})},e)))}):(0,d.jsx)(c.Empty,{description:`No ${t} launchpads`})})]})},{Panel:Yn}=c.Collapse,Kn=[{question:"What is special about Liquidity Bootstrapping Pool (LBP)?",answer:"LBP is one of the uses of Smart Pool in Balancer. It is well suited for projects that want to distribute their tokens to the community in a fair manner. At the same time, creating a high level of liquidity with a low initial cost."},{question:"Have any bots front-run?",answer:"Prevent bot front-run so participants have a higher chance of buying tokens than in other ways."},{question:"Do I have to pay any fees to purchase tokens?",answer:"Yes, it is a tax fee (0.05%). It is the cost to help the development team maintain and stabilize the system."},{question:"What difference between the Token price and the Avg. purchased price?",answer:"The token price is the price at that time of the project. It will have a quick increase in a short time when buying demand appears and then continue to decrease or move sideways. While the Avg. purchased price is based on the average of all purchased users."},{question:"When can I claim the purchased token?",answer:"The tokens you bought will be locked while the launchpad is active, you can claim your tokens after it ends."},{question:"After the launchpad is completed, what can I do with the purchased tokens?",answer:"After the launchpad is completed, the launchpad owner will create a pool based on the assets raised, you can deposit to this pool to get the corresponding reward."}],Un=()=>(0,d.jsxs)(c.Row,{justify:"center",gutter:[0,32],children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Title,{children:"FAQ"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Collapse,{defaultActiveKey:["0"],bordered:!1,expandIconPosition:"end",ghost:!0,children:Kn.map(((e,t)=>(0,d.jsx)(Yn,{header:(0,d.jsx)(c.Typography.Text,{children:`${t+1}. ${e.question}`}),children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:e.answer})},t)))})})]}),Gn=()=>{const{pushHistory:e}=Vt();return(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{xs:24,sm:24,md:20,lg:18,children:(0,d.jsxs)(c.Row,{gutter:[0,48],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(On,{})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[0,8],children:[(0,d.jsx)(c.Col,{span:24,style:{textAlign:"right"},children:(0,d.jsx)(c.Tooltip,{title:"View your purchased",children:(0,d.jsx)(c.Button,{icon:(0,d.jsx)(m.Z,{name:"bag-handle-outline"}),onClick:()=>e("/launchpad-your-purchased"),ghost:!0})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Wn,{state:S.active})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Wn,{state:S.upcoming})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Wn,{state:S.completed})}),(0,d.jsx)(c.Col,{span:24})," ",(0,d.jsx)(c.Col,{span:24,style:{textAlign:"center"},children:(0,d.jsxs)(c.Space,{direction:"vertical",size:24,children:[(0,d.jsx)(c.Typography.Title,{children:"Ready to launch your project?"}),(0,d.jsx)(En.PopupButton,{id:"iWsRUCat",className:"balansol-btn balansol-btn-primary balansol-btn-lg",children:"Apply now"})]})}),(0,d.jsx)(c.Col,{span:24})," ",(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Un,{})}),(0,d.jsx)(c.Col,{span:24})," "]})})})};var qn=s(44994);const Vn=e=>{let{socials:t,onChangeSocials:s}=e;return(0,d.jsxs)(c.Row,{gutter:[8,8],children:[t.map(((e,n)=>(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{style:{width:"100%"},className:"input-vc",children:[(0,d.jsx)(c.Input,{value:e,placeholder:"Input link",style:{width:"100%"},onChange:e=>((e,n)=>{const o=[...t];return o[n]=e,s(o)})(e.target.value,n)}),0!==n&&(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:"remove-circle-outline"}),onClick:()=>(e=>{const n=[...t];return n.splice(e,1),s(n)})(n)})]})},n))),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{size:"large",block:!0,type:"dashed",icon:(0,d.jsx)(m.Z,{name:"add-outline"}),onClick:()=>{const e=[...t];return e.push(""),s(e)},children:"Add more"})})]})},Hn=e=>{let{label:t,children:s}=e;return(0,d.jsxs)(c.Row,{gutter:[8,8],children:[(0,d.jsx)(c.Col,{span:24,children:t}),(0,d.jsx)(c.Col,{span:24,children:s})]})},Jn=e=>{let{children:t,onRemove:s,iconSize:n=14}=e;return(0,d.jsxs)("div",{className:"avatar-uploaded",style:{height:"100%"},children:[(0,d.jsx)("div",{className:"avatar",style:{height:"100%"},children:t}),(0,d.jsx)(m.Z,{onClick:s,className:"remove-icon",name:"trash-outline",style:{fontSize:n}})]})},$n=e=>{let{vCs:t,onChangeVC:s}=e;const n=async(e,n)=>{const o={...t[n],logo:e},r=[...t];return r[n]=o,s(r)};return(0,d.jsxs)(c.Row,{gutter:[8,8],children:[t.map(((e,o)=>{let{link:r,logo:a}=e;return(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:12,align:"middle",children:[(0,d.jsx)(c.Col,{xs:4,md:2,children:a?(0,d.jsx)(Jn,{onRemove:()=>(e=>{const n=[...t];return n[e]={...n[e],logo:""},s(n)})(o),children:(0,d.jsx)(c.Avatar,{size:40,src:a})}):(0,d.jsx)(c.Upload,{className:"upload-vc",accept:"image/png,image/jpg,image/webp",maxCount:1,onChange:e=>((e,t)=>{const{fileList:s}=e,o=s[0].originFileObj;q(o,n,t)})(e,o),children:(0,d.jsx)(c.Button,{size:"large",block:!0,type:"dashed",icon:(0,d.jsx)(m.Z,{name:"attach-outline"})})})}),(0,d.jsx)(c.Col,{xs:20,md:22,children:(0,d.jsxs)(c.Space,{style:{width:"100%"},className:"input-vc",children:[(0,d.jsx)(c.Input,{value:r,placeholder:"Input name",style:{width:"100%"},onChange:e=>((e,n)=>{const o=[...t];return o[n]={...o[n],link:e},s(o)})(e.target.value,o)}),0!==o&&(0,d.jsx)(c.Button,{type:"text",icon:(0,d.jsx)(m.Z,{name:"remove-circle-outline"}),onClick:()=>(e=>{const n=[...t];return n.splice(e,1),s(n)})(o)})]})})]})},o)})),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{size:"large",block:!0,type:"dashed",icon:(0,d.jsx)(m.Z,{name:"add-outline"}),onClick:()=>{const e=[...t];return e.push({logo:"",link:""}),s(e)},children:"Add more"})})]})},Xn=e=>{let{setStep:t}=e;const[s,n]=io(),{pushHistory:o}=Vt(),{description:a,projectName:i,socials:l}=s.projectInfo,{whitepaper:u,vCs:p,github:h,website:m}=s.projectInfo,x=(e,t)=>{const o={...s.projectInfo,[e]:t};return n({...s,projectInfo:o})},j=(0,r.useMemo)((()=>{if(l.length>1)for(const e of l)if(!V(e))return!0;return!i||!a||!m||!V(m)||!u||!V(u)||!h||!V(h)||i.length>32||a.length>150}),[a,h,i,l,m,u]);return(0,d.jsxs)(c.Row,{gutter:[20,20],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:(0,d.jsxs)(c.Row,{justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:"Project name"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Text,{type:"secondary",children:[(0,d.jsx)("span",{style:{color:i.length>32?"red":""},children:i.length}),"/32 characters"]})})]}),children:(0,d.jsx)(c.Input,{placeholder:"Input your project name",value:i,onChange:e=>x("projectName",e.target.value)})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:(0,d.jsxs)(c.Row,{justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:"Description"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Text,{type:"secondary",children:[(0,d.jsx)("span",{style:{color:a.length>150?"red":""},children:a.length}),"/150 characters"]})})]}),children:(0,d.jsx)(c.Input.TextArea,{value:a,rows:4,placeholder:"Summarize about your project...",className:"description",onChange:e=>x("description",e.target.value)})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:"Website",children:(0,d.jsx)(c.Input,{placeholder:"Input link",value:m,onChange:e=>x("website",e.target.value)})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:"Whitepaper",children:(0,d.jsx)(c.Input,{placeholder:"Input link",value:u,onChange:e=>x("whitepaper",e.target.value)})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:"Github",children:(0,d.jsx)(c.Input,{placeholder:"Input link",value:h,onChange:e=>x("github",e.target.value)})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:"Leading venture capital (Optional)",children:(0,d.jsx)($n,{onChangeVC:e=>{const t={...s},o={...s.projectInfo,vCs:e};return n({...t,projectInfo:o})},vCs:p})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:"Socials (Optional)",children:(0,d.jsx)(Vn,{onChangeSocials:e=>{const t={...s},o={...s.projectInfo,socials:e};return n({...t,projectInfo:o})},socials:l})})}),(0,d.jsx)(c.Col,{span:24,style:{marginTop:12},children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{onClick:()=>o("/launchpad"),block:!0,ghost:!0,size:"large",children:"Cancel"})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{disabled:j,onClick:async()=>t(k.projectPhoto),block:!0,type:"primary",size:"large",children:"Continue"})})]})})]})},Qn=e=>{let{setStep:t}=e;const[s,n]=io(),o=s.projectInfo.coverPhoto,r=async e=>{const t={...s.projectInfo,coverPhoto:e};return n({...s,projectInfo:t})};return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{children:"The cover photo on your project will help create more impressions and attract users."})}),(0,d.jsx)(c.Col,{span:24,style:{minHeight:240},className:"project-photo",children:o?(0,d.jsx)(Jn,{iconSize:32,onRemove:()=>r(""),children:(0,d.jsx)(c.Image,{src:o.toString(),preview:!1,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",aspectRatio:"16/9"},className:"cover-photo"})}):(0,d.jsx)(c.Upload.Dragger,{accept:"image/png,image/jpg,image/webp",onChange:e=>{const{fileList:t}=e,s=t[0].originFileObj;q(s,r,0)},className:"cover-photo",children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(m.Z,{style:{fontSize:40},name:"cloud-upload-outline"}),(0,d.jsxs)(c.Space,{direction:"vertical",size:0,children:[(0,d.jsx)(c.Typography.Text,{children:"Click or drag image to upload"}),(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Should be 800x450px with JPG, PNG file."})]})]})})}),(0,d.jsx)(c.Col,{span:24}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{onClick:()=>t(k.projectInfo),block:!0,ghost:!0,size:"large",children:"Back"})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{onClick:()=>t(k.configuration),block:!0,type:"primary",size:"large",disabled:!o,children:"Continue"})})]})})]})};var _n=s(52063);Se.D([Ne.N,Be.N,_n.N,ze.N,Re.N,Ze.N]);const eo=(e,t,s)=>{const n=t.map((e=>We()(e).format("DD/MM HH:mm")));return{legend:{data:["Estimated price"],textStyle:{color:s.color}},tooltip:{trigger:"item",formatter:function(e){return`<div style="min-width: 150px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Price:</span> <span style="font-size: 16px; font-weight: 700">$${o.util.numeric(e.value).format("0,0.[000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Date:</span> <span style="font-size: 16px; font-weight: 700">${e.name}</span></span></div>`}},xAxis:{type:"category",data:n,axisLine:{lineStyle:{color:s.color}}},yAxis:{type:"value",axisLine:{lineStyle:{color:s.color}},splitLine:{lineStyle:{color:[s.lineColor]}}},series:[{name:"Estimated price",data:e,type:"line",smooth:!0,lineStyle:{normal:{width:2,type:"dashed"}}}]}},to={light:{color:"#081438",lineColor:"#CED0D7"},dark:{color:"#F3F3F5",lineColor:"#394360"}},so=e=>{let{startPrice:t,endPrice:s,balanceA:n,balanceB:a,baseMint:i,startTime:l,endTime:c,mint:u}=e;const[p,h]=(0,r.useState)(0),m=Bn(),x=Mn(),j=(0,o.useMintDecimals)({mintAddress:u})||0,g=(0,o.useMintDecimals)({mintAddress:i})||0,y=(0,o.useTheme)(),f=(0,r.useCallback)(((e,t,s,n)=>{const o=e*t/(e*t+s*n),r=1-o;return[lt.utilsBN.decimalize(o,9),lt.utilsBN.decimalize(r,9)]}),[]),w=(0,r.useMemo)((()=>{const e=((e,t)=>{const s=[],n=(t-e)/3;for(let o=0;o<4;o++){if(0===o){s[o]=e;continue}const t=s[s.length-1]+n;s[o]=t}return s})(l,c);return e}),[c,l]),b=(0,r.useMemo)((()=>{let e=[];const o=f(t,n,p,a),r=f(s,n,p,a);for(const t of w){const s=x(t,"",o,r,l/1e3,c/1e3),i=m(lt.utilsBN.decimalize(s[0],9),lt.utilsBN.decimalize(n,j),p,lt.utilsBN.decimalize(a,9),lt.utilsBN.decimalize(s[1],g));e.push(i)}return e}),[n,a,m,j,w,s,c,x,f,p,t,l,g]);return(0,r.useEffect)((()=>{(async()=>{if(p)return;const e=await o.tokenProvider.getPrice(i);h(e||0)})()}),[i,p]),(0,d.jsx)(ve.Z,{echarts:Te,option:eo(b,w,to[y]),notMerge:!0,lazyUpdate:!0})},no=new i.BN(5e5),oo=e=>{const t=e.label;return(0,d.jsx)(vn,{category:t})},ro=e=>{let{setStep:t}=e;const[s,n]=(0,r.useState)(!1),[a,l]=io(),{onCreateLaunchpad:u}=(()=>{const e=(0,o.useGetMintDecimals)(),t=(0,r.useCallback)(((e,t,s,n)=>{const o=e*t/(e*t+s*n),r=1-o;return{weightA:lt.utilsBN.decimalize(o,9),weightB:lt.utilsBN.decimalize(r,9)}}),[]),s=(0,r.useCallback)((async s=>{const{amount:n,mint:r,endTime:a,endPrice:l,fee:c}=s,{stableMint:d,projectInfo:u,startPrice:p,startTime:h}=s,{baseAmount:m}=u,x=i.web3.Keypair.generate(),j=[],g=[],y=await e({mintAddress:r})||0,f=await e({mintAddress:d})||0,w=lt.utilsBN.decimalize(n,y),b=lt.utilsBN.decimalize(m,f),C=await xn.methods.launchpad.set(u),A=lt.utilsBN.decimalize(c,9),v=(0,o.getAnchorProvider)();v.opts.skipPreflight=!0;const{tx:T}=await window.launchpad.initializeLaunchpad({baseAmount:b,stableMint:new i.web3.PublicKey(d),mint:new i.web3.PublicKey(r),sendAndConfirm:!0,launchpad:x});g.push(T);const S=await window.launchpad.deriveBaseMintAddress(x.publicKey),k=await o.tokenProvider.getPrice(d)||0,N=t(p,n,k,m),B=t(l,n,k,m),R=[{publicKey:r,action:te.MintActionStates.Active,amountIn:w,weight:N.weightA},{publicKey:S,action:te.MintActionStates.Active,amountIn:b,weight:N.weightB}],{poolAddress:z,tx:M}=await window.balansol.initializePool({fee:A,taxFee:no,mintsConfigs:R,taxMan:W.sol.taxmanAddress,sendAndConfirm:!0});g.push(M);const{transaction:I}=await window.balansol.initializeJoin({poolAddress:z,mint:r,amountIn:w,sendAndConfirm:!1}),{transaction:P}=await window.balansol.initializeJoin({poolAddress:z,mint:S,amountIn:b,sendAndConfirm:!1});j.push(I),j.push(P);const{tx:D}=await window.balansol.updateActions({poolAddress:z,actions:[te.MintActionStates.AskOnly,te.MintActionStates.BidOnly],sendAndConfirm:!1});j.push(D);const L=await window.launchpad.deriveTreasurerAddress(x.publicKey),{tx:Z}=await window.balansol.transferOwnership({poolAddress:z,newOwner:L,sendAndConfirm:!1});j.push(Z);const{tx:F}=await window.launchpad.activeLaunchpad({pool:new i.web3.PublicKey(z),startTime:new i.BN(h/1e3),endTime:new i.BN(a/1e3),launchpad:x.publicKey,metadata:Array.from(C.digest),endWeights:[B.weightA,B.weightB],sendAndConfirm:!1});return j.push(F),await v.sendAll(j.map((e=>({tx:e,signers:[]})))),window.notify({type:"success",description:"Initialized launchpad successfully!"})}),[e,t]);return{onCreateLaunchpad:s}})(),{stableMint:p,startPrice:h,endPrice:x,mint:j}=a,{startTime:g,endTime:y,projectInfo:f,amount:w}=a,{balance:b}=St(j),C=(0,o.useTheme)(),{pushHistory:A}=Vt(),v=(e,t)=>l({...a,[e]:t}),S=(e,t)=>{const s={...a.projectInfo,[e]:t};return l({...a,projectInfo:s})},B=!j||!w||!p||!f.baseAmount||!f.category.length||!g||!y||!h||!x;return(0,d.jsxs)(c.Row,{gutter:[20,20],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:(0,d.jsxs)(c.Row,{justify:"space-between",children:[(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:"Your token"})}),(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Typography.Text,{onClick:()=>v("amount",b),style:{cursor:"pointer"},className:"caption",type:"secondary",children:["Available: ",o.util.numeric(b).format("0,0.[0000]")]})})]}),children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)($t.Z,{style:{background:"dark"===C?"#142042":"#e6eaf5",width:"100%",textAlign:"left",height:40,paddingLeft:12},value:j,placeholder:"Select a token",onChange:e=>v("mint",e)})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.InputNumber,{onChange:e=>v("amount",e),value:w||void 0,placeholder:"Input total raise"})})]})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{children:"Purchase token"}),(0,d.jsx)(c.Typography.Text,{className:"caption",type:"secondary",children:"Should be a stablecoin"})]}),children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)($t.Z,{style:{width:"100%",textAlign:"left",height:40,paddingLeft:12,background:"dark"===C?"#142042":"#e6eaf5"},placeholder:"Select a token",value:p,onChange:e=>v("stableMint",e)})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.InputNumber,{placeholder:"Input fundraising goal",onChange:e=>S("baseAmount",e),value:f.baseAmount?f.baseAmount:void 0})})]})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Hn,{label:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{children:"Type of project"}),(0,d.jsx)(c.Typography.Text,{className:"caption",type:"secondary",children:"E.g. defi, gamefi, lending, DAO... (maximum 4 tags)"})]}),children:(0,d.jsx)(c.Select,{className:"select-category",mode:"multiple",showArrow:!0,style:{width:"100%",paddingLeft:8},tagRender:oo,placeholder:"Select types",onChange:e=>S("category",e),children:Object.keys(N).map((e=>(0,d.jsx)(c.Select.Option,{disabled:f.category.length>=4&&!f.category.includes(e),children:e},e)))})})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(Hn,{label:"Start price",children:(0,d.jsx)(c.InputNumber,{placeholder:"Input price",onChange:e=>v("startPrice",e),value:h||void 0,className:"input-price"})})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(Hn,{label:"Floor price",children:(0,d.jsx)(c.InputNumber,{placeholder:"Input price",onChange:e=>v("endPrice",e),value:x||void 0,className:"input-price"})})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(Hn,{label:"Start Time",children:(0,d.jsx)(c.DatePicker,{placeholder:"Select time",suffixIcon:(0,d.jsx)(m.Z,{name:"time-outline"}),className:"date-option",onChange:e=>v("startTime",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:g?We()(g):We()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:T,disabledDate:e=>e<We()().subtract(1,"minutes")})})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(Hn,{label:"End Time",children:(0,d.jsx)(c.DatePicker,{placeholder:"Select time",suffixIcon:(0,d.jsx)(m.Z,{name:"time-outline"}),className:"date-option",onChange:e=>v("endTime",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:y?We()(y):We()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:T,disabledDate:e=>e&&e>We()(g).add(7,"days")||e<We()()})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[8,8],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Text,{children:"Preview"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(so,{startTime:g,endTime:y,startPrice:h,endPrice:x,mint:j,baseMint:p,balanceA:w,balanceB:f.baseAmount})})]})}),(0,d.jsx)(c.Col,{span:24,style:{marginTop:12},children:(0,d.jsxs)(c.Row,{gutter:[12,12],children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{onClick:()=>t(k.projectPhoto),block:!0,ghost:!0,size:"large",children:"Back"})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsx)(c.Button,{disabled:B,onClick:async()=>{try{n(!0);const e=JSON.parse(JSON.stringify(a)),t=[];for(const s of a.projectInfo.socials)s&&t.push(s);return e.projectInfo.socials=t,await u(e),l(ao),A("/launchpad")}catch(e){(0,Ds.cB)(e)}finally{n(!1)}},block:!0,type:"primary",size:"large",loading:s,children:"Create"})})]})})]})},ao={projectInfo:{projectName:"",description:"",website:"",github:"",whitepaper:"",vCs:[{logo:"",link:""}],socials:[""],coverPhoto:"",category:[],baseAmount:0},mint:"",stableMint:"",amount:0,fee:0,startPrice:0,endPrice:0,startTime:Date.now(),endTime:Date.now()+2592e5},io=(0,qn.r)(ao),lo=()=>{const[e,t]=(0,r.useState)(k.projectInfo),s=(0,r.useMemo)((()=>{switch(e){case k.projectInfo:return(0,d.jsx)(Xn,{setStep:t});case k.projectPhoto:return(0,d.jsx)(Qn,{setStep:t});case k.configuration:return(0,d.jsx)(ro,{setStep:t})}}),[e]);return(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{xs:24,sm:20,md:18,lg:12,children:(0,d.jsx)(c.Card,{style:{marginBottom:24},children:(0,d.jsxs)(c.Row,{gutter:[32,32],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Steps,{size:"small",current:e,direction:"horizontal",children:[(0,d.jsx)(c.Steps.Step,{title:"Project info"}),(0,d.jsx)(c.Steps.Step,{title:"Cover photo"}),(0,d.jsx)(c.Steps.Step,{title:"Configuration"})]})}),(0,d.jsx)(c.Col,{span:24,children:s})]})})})})},co=e=>{const t=Sn(e);return(0,n.useSelector)((e=>e.pools[t.pool.toBase58()]))},uo=e=>{let{launchpadAddress:t}=e;const[s,a]=(0,r.useState)(0),[l,u]=(0,r.useState)(new i.BN(0)),p=Sn(t),h=co(t),{onBuyToken:m,loading:x}=(()=>{const[e,t]=(0,r.useState)(!1),s=(0,n.useSelector)((e=>e.launchpads)),a=(0,o.useGetMintDecimals)(),l=(0,r.useCallback)((async e=>{try{t(!0);const{launchpadAddress:n,amount:r,limit:l}=e,c=s[n],d=new i.web3.PublicKey(n),u=i.web3.Keypair.generate(),p=new i.web3.Transaction,h=await a({mintAddress:c.mint.toBase58()})||0,m=lt.utilsBN.decimalize(r,h),x=await window.launchpad.printBaseMint({launchpad:d,amount:m,sendAndConfirm:!1,cheque:u});p.add(x.tx);const j=await window.launchpad.buyLaunchpad({launchpad:d,bidAmount:m,limit:l,cheque:u.publicKey,sendAndConfirm:!1});p.add(j.tx);const g=(0,o.getAnchorProvider)();return g.opts.skipPreflight=!0,await g.sendAndConfirm(p,x.signers),window.notify({type:"success",description:"Bought token successfully!"})}catch(n){K(n)}finally{t(!1)}}),[a,s]);return{onBuyToken:l,loading:e}})(),{balance:j}=St(p.stableMint.toBase58()),g=Nn(t,5e3),y=(0,o.useGetMintDecimals)(),f=Date.now()/1e3>p.startTime.toNumber(),w=(0,r.useCallback)((async()=>{const e=await y({mintAddress:p.stableMint.toBase58()}),t=lt.utilsBN.decimalize(s,e),n=g[0]+g[1],o=pe(t,h.reserves[0],h.reserves[1],g[0]/n,g[1]/n,h.fee.add(h.taxFee));return u(o)}),[s,g,y,p.stableMint,h]);return(0,ls.Z)(w,500,[w]),(0,d.jsx)(c.Card,{children:(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",style:{width:"100%"},children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"You pay"}),(0,d.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,d.jsx)(Rt,{amount:s,selectedMint:p.stableMint.toBase58(),onChangeAmount:e=>a(Number(e)),mintSelection:(0,d.jsxs)(c.Space,{className:"mint-display",children:[(0,d.jsx)(ne.Z,{mintAddress:p.stableMint}),(0,d.jsx)(oe.Z,{mintAddress:p.stableMint})]})})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",style:{width:"100%"},children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"You receive"}),(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Space,{className:"mint-display",children:[(0,d.jsx)(ne.Z,{mintAddress:p.mint}),(0,d.jsx)(oe.Z,{mintAddress:p.mint})]})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Title,{level:3,children:(0,d.jsx)(Zt.Z,{mintAddress:p.mint,amount:l})})})]})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Rate"})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{children:"1"}),(0,d.jsx)(oe.Z,{mintAddress:p.mint}),(0,d.jsx)(c.Typography.Text,{children:"="}),(0,d.jsx)(Zt.Z,{mintAddress:p.mint,amount:l,formatter:e=>o.util.numeric(Number(e)?Number(s)/Number(e):0).format("0.[0000]")}),(0,d.jsx)(oe.Z,{mintAddress:p.stableMint})]})})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{size:"large",type:"primary",block:!0,onClick:()=>{s&&m({amount:s,launchpadAddress:t})},loading:x,disabled:!s||s>j||!f,children:"Purchase"})})]})})};Se.D([Ne.N,Be.N,_n.N,ze.N,Re.N,Ze.N]);const po={light:{color:"#081438",lineColor:"#CED0D7"},dark:{color:"#F3F3F5",lineColor:"#394360"}},ho=(e,t,s)=>{const n=t.map((e=>We()(e).format("DD/MM HH:mm")));return{legend:{data:["Real price","Estimated price"],textStyle:{color:s.color}},tooltip:{trigger:"item",formatter:function(e){return`<div style="min-width: 150px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Price:</span> <span style="font-size: 16px; font-weight: 700">$${o.util.numeric(e.value).format("0,0.[000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Date:</span> <span style="font-size: 16px; font-weight: 700">${e.name}</span></span></div>`}},xAxis:{type:"category",data:n,axisLine:{lineStyle:{color:s.color}}},yAxis:{type:"value",axisLine:{lineStyle:{color:s.color}},splitLine:{lineStyle:{color:[s.lineColor]}}},series:[{name:"Estimated price",data:e.estimateResult,type:"line",smooth:!0,lineStyle:{normal:{width:2,type:"dashed"}}},{name:"Real price",data:e.currentResult,type:"line",smooth:!0,lineStyle:{normal:{width:2}}}]}},mo=e=>{let{launchpadAddress:t}=e;const[s,n]=(0,r.useState)(0),{launchpadData:a}=jn(t),i=Bn(),l=Mn(),c=Rn(),u=(0,o.useTheme)(),p=(0,r.useMemo)((()=>{const{startTime:e,endTime:t}=a;return((e,t)=>{const s=[],n=(t-e)/20;for(let o=0;o<=20;o++){if(0===o){s[o]=e;continue}const t=s[s.length-1]+n;s[o]=t}return s})(1e3*e.toNumber(),1e3*t.toNumber())}),[a]),h=(0,r.useMemo)((()=>{const e=[],n=[];for(const r of p){const o=l(r,t),a=c(t,r),d=i(lt.utilsBN.decimalize(o[0],9),a[0],s,a[1],lt.utilsBN.decimalize(o[1],9));r>=Date.now()?(n.push(d),e.push(null)):(e.push(d),n.push(null))}let o=0;for(let t=0;t<e.length;t++)if(!e[t]){o=e[t-1]||0;break}for(let t=0;t<n.length;t++)if(n[t]){n[t-1]=o;break}return{currentResult:e,estimateResult:n}}),[i,p,c,l,t,s]);return(0,r.useEffect)((()=>{(async()=>{if(s||!t)return;const e=await o.tokenProvider.getPrice(a.stableMint);n(e||0)})()}),[t,a.stableMint,s]),(0,d.jsx)(ve.Z,{echarts:Te,option:ho(h,p,po[u]),notMerge:!0,lazyUpdate:!0})},xo=e=>{let{launchpadAddress:t,amount:s,isBaseAmount:n=!1}=e;const{launchpadData:{stableMint:o,mint:r}}=jn(t),a=n?o:r;return(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(Zt.Z,{amount:s,mintAddress:a}),(0,d.jsx)(oe.Z,{mintAddress:a})]})},jo=[{title:"TIME",dataIndex:"createAt",render:e=>(0,d.jsx)(c.Typography.Text,{children:We()(1e3*e.toNumber()).format(T)})},{title:"ACCOUNT",dataIndex:"authority",render:e=>(0,d.jsx)(c.Typography.Text,{underline:!0,onClick:()=>window.open(o.util.explorer(e.toBase58()),"_blank"),style:{cursor:"pointer"},type:"success",children:o.util.shortenAddress(e.toBase58())})},{title:"PAY",dataIndex:"bidAmount",render:(e,t)=>{let{launchpad:s}=t;return(0,d.jsx)(xo,{amount:e,launchpadAddress:s.toBase58(),isBaseAmount:!0})}},{title:"RECEIVE",dataIndex:"askAmount",render:(e,t)=>{let{launchpad:s}=t;return(0,d.jsx)(xo,{amount:e,launchpadAddress:s.toBase58()})}}],go=e=>{let{launchpadAddress:t}=e;const[s,o]=(0,r.useState)(4),a=(0,n.useSelector)((e=>e.cheques)),i=wn(t),l=(0,r.useMemo)((()=>i.map((e=>a[e])).sort(((e,t)=>t.createAt.toNumber()-e.createAt.toNumber()))),[a,i]);return(0,d.jsxs)(c.Row,{gutter:[0,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Typography.Title,{level:5,children:"Recent transactions"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Table,{columns:jo,dataSource:l.slice(0,s),rowKey:e=>e.createAt.toString(),pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})}),(0,d.jsx)(c.Col,{span:24,style:{textAlign:"center"},children:(0,d.jsx)(c.Button,{disabled:s>=l.length,onClick:()=>o(s+4),ghost:!0,children:"View more"})})]})},yo=e=>{let{launchpadAddress:t}=e;const s=(0,o.useTheme)(),a=In(t),i=(e=>{const t=(0,n.useSelector)((e=>e.cheques)),s=wn(e),o=(0,r.useCallback)((e=>{const{askAmount:s,bidAmount:n}=t[e];return s.toNumber()?n.toNumber()/s.toNumber():0}),[t]);return(0,r.useMemo)((()=>{if(!s.length)return 0;let e=0;for(const t of s)e+=o(t);return e/s.length}),[s,o])})(t);return(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Tn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Card,{bordered:!1,style:{background:"dark"===s?"#394360":"#ffffff",borderRadius:20},bodyStyle:{padding:"12px 16px"},children:(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{span:12,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Token price"}),(0,d.jsxs)(c.Typography.Title,{level:4,type:"success",children:["$",o.util.numeric(a).format("0,0.[000]")]})]})}),(0,d.jsx)(c.Col,{span:12,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:(0,d.jsxs)(c.Space,{className:"align-middle-icon",align:"center",children:["Avg. purchase price",(0,d.jsx)(c.Tooltip,{title:"This price is based on the average of all purchased users.",children:(0,d.jsx)(m.Z,{name:"information-circle-outline",style:{fontSize:24}})})]})}),(0,d.jsxs)(c.Typography.Title,{level:4,type:"success",children:["$",o.util.numeric(i).format("0,0.[000]")]})]})})]})})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(mo,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(go,{launchpadAddress:t})})]})},fo=e=>{let{launchpadAddress:t}=e;const[s,n]=(0,r.useState)(!1),a=Sn(t),l=co(t),{supply:u}=zt(l.mintLpt),p=Date.now()/1e3>=a.endTime.toNumber(),h=(0,r.useMemo)((()=>{const{stableMint:e,mint:t}=a,{reserves:s}=l,n=s[1].gt(a.startReserves[1])?s[1].sub(a.startReserves[1]):new i.BN(0);return[{mint:t,amount:s[0]},{mint:e,amount:n}]}),[a,l]);return(0,d.jsxs)(c.Row,{gutter:[0,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:(0,d.jsx)(m.Z,{name:"information-circle-outline"})}),(0,d.jsx)(c.Typography.Text,{type:"secondary",className:"caption",children:"The launchpad had completed, you can withdraw your tokens."})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",style:{width:"100%"},children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",className:"caption",children:"Your Assets"}),(0,d.jsx)(c.Row,{children:h.map((e=>{let{mint:t,amount:s}=e;return(0,d.jsx)(c.Col,{span:12,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(ne.Z,{mintAddress:t.toBase58()}),(0,d.jsx)(Zt.Z,{amount:s,mintAddress:t}),(0,d.jsx)(oe.Z,{mintAddress:t})]})},t.toBase58())}))})]})}),(0,d.jsx)(c.Col,{span:24}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{block:!0,type:"primary",size:"large",onClick:async()=>{n(!0);try{let{tx:e}=await window.launchpad.claim({launchpad:new i.web3.PublicKey(t),sendAndConfirm:!1});const{transaction:s}=await window.balansol.createRemoveLiquidityTransaction(a.pool,u),r=(0,o.getAnchorProvider)(),l=await r.sendAndConfirm(e.add(s));Y("Withdraw",l)}catch(e){(0,Ds.cB)(e)}finally{n(!1)}},loading:s,disabled:!p||h[0].amount.isZero(),children:"Withdraw"})})]})},wo=e=>{let{launchpadAddress:t}=e;const{metadata:s}=jn(t),n=e=>{if(e&&V(e))return window.open(e,"_blank")};return(0,d.jsxs)(c.Space,{style:{cursor:"pointer"},children:[(0,d.jsxs)(c.Space,{onClick:()=>n(null===s||void 0===s?void 0:s.website),children:[(0,d.jsx)(m.Z,{name:"globe-outline"}),(0,d.jsx)(c.Typography.Text,{children:"Website"}),(0,d.jsx)(c.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]}),(0,d.jsxs)(c.Space,{onClick:()=>n(null===s||void 0===s?void 0:s.whitepaper),children:[(0,d.jsx)(m.Z,{name:"book-outline"}),(0,d.jsx)(c.Typography.Text,{children:"Whitepaper"}),(0,d.jsx)(c.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]}),(0,d.jsxs)(c.Space,{onClick:()=>n(null===s||void 0===s?void 0:s.github),children:[(0,d.jsx)(m.Z,{name:"logo-github"}),(0,d.jsx)(c.Typography.Text,{children:"Github"})]})]})},bo=e=>{const[t,s]=(0,r.useState)(void 0),n=(0,o.useGetMintData)(),a=(0,r.useCallback)((async()=>{try{const{[e]:{supply:t}}=await n({mintAddress:e})||{};return s(new i.BN(t.toString()))}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{a()}),[a]),t},Co=e=>{let{launchpadAddress:t}=e;const{metadata:s,launchpadData:n}=jn(t),r=n.mint.toBase58(),a=bo(r);return(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(wo,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:5,children:"Description"}),(0,d.jsx)(c.Typography.Paragraph,{style:{margin:0},children:null===s||void 0===s?void 0:s.description})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:5,children:"Token information"}),(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsxs)(c.Typography.Text,{children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Token Name: "}),(0,d.jsx)(Ct.Z,{mintAddress:r})," (",(0,d.jsx)(oe.Z,{mintAddress:r}),")"]}),(0,d.jsxs)(c.Typography.Text,{style:{cursor:"pointer"},onClick:()=>window.open(o.util.explorer(r),"_blank"),children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Token Address: "}),o.util.shortenAddress(r,6)]}),(0,d.jsxs)(c.Typography.Text,{children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Token supply: "}),(0,d.jsx)(Zt.Z,{amount:a||new i.BN(0),mintAddress:r})," ","(",(0,d.jsx)(oe.Z,{mintAddress:r}),")"]}),(0,d.jsxs)(c.Typography.Text,{children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad supply: "}),(0,d.jsx)(Zt.Z,{amount:n.startReserves[0],mintAddress:r})," ","(",(0,d.jsx)(oe.Z,{mintAddress:r}),")"]}),(0,d.jsxs)(c.Typography.Text,{children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad start time: "}),We()(1e3*(null===n||void 0===n?void 0:n.startTime.toNumber())).format(T)]}),(0,d.jsxs)(c.Typography.Text,{children:[(0,d.jsx)("span",{style:{color:"#9CA1AF"},children:"Launchpad end time: "}),We()(1e3*(null===n||void 0===n?void 0:n.endTime.toNumber())).format(T)]})]})]})}),!!s&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:5,children:"Social media"}),(0,d.jsx)(c.Space,{style:{cursor:"pointer"},children:s.socials.map(((e,t)=>{if(!e)return null;const n=H(e);return(0,d.jsxs)(c.Space,{onClick:()=>(e=>{if(e&&V(e))return window.open(e,"_blank")})(e),children:[(0,d.jsx)(m.Z,{style:{fontSize:21},name:null===n||void 0===n?void 0:n.iconName}),(0,d.jsx)(c.Typography.Text,{children:null===n||void 0===n?void 0:n.websiteName}),t!==s.socials.length-1&&(0,d.jsx)(c.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]},t)}))})]})}),!!s&&!!s.vCs.length&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{direction:"vertical",children:[(0,d.jsx)(c.Typography.Title,{level:5,children:"Leading venture capital"}),(0,d.jsx)(c.Space,{style:{cursor:"pointer"},children:s.vCs.map(((e,t)=>{let{link:n,logo:o}=e;return n?(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(c.Avatar,{size:21,src:o}),(0,d.jsx)(c.Typography.Text,{children:n}),t!==s.vCs.length-1&&(0,d.jsx)(c.Divider,{style:{borderColor:"#D3D3D6",margin:2},type:"vertical"})]},t):null}))})]})})]})},Ao=e=>{let{launchpadAddress:t}=e;const{launchpadData:{authority:s}}=jn(t),n=(0,o.useWalletAddress)()===s.toBase58(),a=(0,r.useMemo)((()=>{const e=[{label:"Launchpad info",key:'launchpad-info"',children:(0,d.jsx)(yo,{launchpadAddress:t})},{label:"Project info",key:"project-info",children:(0,d.jsx)(Co,{launchpadAddress:t})}];return n?(e.push({label:"Manage",key:"manage",children:(0,d.jsx)(fo,{launchpadAddress:t})}),e):e}),[t,n]);return(0,d.jsx)(c.Card,{style:{marginBottom:24},children:(0,d.jsx)(c.Tabs,{items:a})})},vo=e=>{let{launchpadAddress:t}=e;const[s,n]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!0),u=Sn(t),p=Number(u.endTime)<Date.now()/1e3,{totalAsk:h}=bn(t,!0),x=(0,r.useCallback)((async()=>{const e=await window.launchpad.deriveMasterAddress(t),s=await i.utils.token.associatedAddress({mint:u.mint,owner:e}),n=await o.splt.getAccountData(s.toBase58());l(!Number(n.amount.toString()))}),[t,u.mint]);return(0,r.useEffect)((()=>{x()}),[x]),(0,d.jsxs)(c.Row,{align:"middle",children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsxs)(c.Space,{className:"align-middle-icon",children:[(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Your bought"}),(0,d.jsx)(c.Tooltip,{title:"The tokens you bought will be locked while the launchpad is active, you can claim your tokens after it ends.",children:(0,d.jsx)(m.Z,{style:{color:"#9CA1AF",fontSize:16},name:"information-circle-outline"})})]})}),(0,d.jsx)(c.Col,{children:p?(0,d.jsx)(c.Button,{type:"primary",size:"large",onClick:async()=>{n(!0);try{let{txId:e}=await window.launchpad.redeem({launchpad:new i.web3.PublicKey(t)});Y("Claim",e),l(!0)}catch(e){}finally{n(!1)}},loading:s,disabled:a,children:(0,d.jsxs)(c.Space,{size:4,children:[a?"Claimed ":"Claim ",(0,d.jsx)(Zt.Z,{mintAddress:u.mint,amount:h,formatter:"0,0.[000]"}),(0,d.jsx)(oe.Z,{mintAddress:null===u||void 0===u?void 0:u.mint.toBase58()})]})}):(0,d.jsx)(c.Typography.Title,{level:3,children:(0,d.jsxs)(c.Space,{children:[(0,d.jsx)(Zt.Z,{mintAddress:u.mint,amount:h,formatter:"0,0.[000]"}),(0,d.jsx)(oe.Z,{mintAddress:null===u||void 0===u?void 0:u.mint.toBase58()})]})})})]})},To=e=>{let{launchpadAddress:t}=e;const s=bn(t);return(0,d.jsx)(c.Card,{children:(0,d.jsxs)(c.Row,{gutter:[16,16],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(vo,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{children:[(0,d.jsx)(c.Col,{flex:"auto",children:(0,d.jsx)(c.Typography.Text,{type:"secondary",children:"Participants"})}),(0,d.jsx)(c.Col,{children:(0,d.jsx)(c.Typography.Text,{children:s.totalUsers})})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(fn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(Cn,{launchpadAddress:t})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(An,{isDetail:!0,launchpadAddress:t})})]})})},So=()=>{const{pushHistory:e,getQuery:t}=Vt(),s=t("launchpadAddress")||"",{launchpadData:n}=jn(s);if(!n||!s)return(0,d.jsx)(Ht,{label:"launchpad",redirect:"/launchpad"});const o=Number(n.endTime)<Date.now()/1e3;return(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{sm:24,xs:24,md:24,lg:18,children:(0,d.jsxs)(c.Row,{gutter:[0,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{onClick:()=>e("/launchpad"),type:"text",icon:(0,d.jsx)(m.Z,{name:"chevron-back-outline"}),children:"Back"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{xs:24,md:14,children:(0,d.jsx)(Ao,{launchpadAddress:s})}),(0,d.jsx)(c.Col,{xs:24,md:10,children:(0,d.jsxs)(c.Row,{gutter:[0,24],children:[!o&&(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(uo,{launchpadAddress:s})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(To,{launchpadAddress:s})})]})})]})}),(0,d.jsx)(c.Col,{span:24})]})})})},ko=()=>{const{pushHistory:e}=Vt(),t=(()=>{const e=(0,n.useSelector)((e=>e.cheques)),t=(0,n.useSelector)((e=>e.launchpads)),s=(0,o.useWalletAddress)(),a=(0,r.useMemo)((()=>{const t={};for(const n in e){const{launchpad:o,authority:r}=e[n];s===r.toBase58()&&(t[o.toBase58()]||(t[o.toBase58()]=n))}return Object.keys(t)}),[e,s]);return a.sort(((e,s)=>t[s].startTime.toNumber()-t[e].startTime.toNumber()))})();return(0,d.jsx)(c.Row,{justify:"center",children:(0,d.jsx)(c.Col,{xs:24,sm:24,md:20,lg:18,children:(0,d.jsxs)(c.Row,{gutter:[0,18],id:"all-launchpad",children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Button,{onClick:()=>e("/launchpad"),icon:(0,d.jsx)(m.Z,{name:"chevron-back-outline"}),type:"text",children:"Back"})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsxs)(c.Space,{size:16,align:"center",children:[(0,d.jsx)(c.Typography.Title,{level:2,children:"Your purchased"}),(0,d.jsx)(c.Typography.Text,{type:"success",className:"amount-launchpad",children:t.length})]})}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[12,12],children:t.map((e=>(0,d.jsx)(c.Col,{xs:24,md:12,children:(0,d.jsx)(Dn,{launchpadAddress:e})},e)))})}),(0,d.jsx)(c.Col,{span:24})]})})})};var No=s(33048),Bo=s.n(No);const Ro=()=>(0,d.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,d.jsxs)(c.Row,{gutter:[24,24],children:[(0,d.jsx)(c.Col,{span:24,style:{height:256}}),(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(c.Row,{gutter:[24,24],justify:"center",children:(0,d.jsx)(c.Col,{children:(0,d.jsxs)(c.Space,{direction:"vertical",align:"center",size:32,children:[(0,d.jsx)(c.Spin,{size:"large"}),(0,d.jsx)(c.Typography.Title,{level:5,style:{textAlign:"center"},children:"Welcome to Balansol. The application is loading..."})]})})})})]})}),zo={},Mo=(0,qn.r)({}),Io=e=>{const{program:t,name:s,filter:n,upset:o,init:a}=e,[i,l]=(0,r.useState)(0),[,c]=Mo(),{accountClient:u,connection:p}=(0,r.useMemo)((()=>{var e;const n=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[s];return{accountClient:n,connection:n.provider.connection}}),[s,null===t||void 0===t?void 0:t.account]),h=(0,r.useCallback)((async()=>{if(void 0===zo[s])try{zo[s]=!0,c({...zo,[s]:!0});const e=await u.all(n),t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;await a(t)}catch(e){K(e)}finally{zo[s]=!1,c({...zo,[s]:!1})}}),[u,n,a,s,c]),m=(0,r.useCallback)((async()=>{if(i)return;const e=p.onProgramAccountChange(u.programId,(async e=>{const n=e.accountId.toBase58(),r=e.accountInfo.data,a=t.coder.accounts.decode(s,r);o(n,a)}),"confirmed",[{memcmp:{offset:0,bytes:(0,lt.encodeIxData)((0,lt.accountDiscriminator)(s))}},...n]);l(e)}),[u.programId,p,n,s,t.coder.accounts,o,i]);return(0,r.useEffect)((()=>{h()}),[h]),(0,r.useEffect)((()=>(m(),()=>{(async()=>{i&&await p.removeProgramAccountChangeListener(i)})()})),[p,m,i]),(0,d.jsx)(r.Fragment,{})},Po=[],Do=e=>{const t=(0,n.useDispatch)(),[s,o]=(0,r.useState)(!0),a=(0,r.useCallback)(((e,s)=>t(Xs({address:e,data:s}))),[t]),i=(0,r.useCallback)((async()=>{try{await t(Js()).unwrap(),o(!1)}catch(e){return window.notify({type:"error",description:"Cannot fetch data of pools"})}}),[t]);return(0,r.useEffect)((()=>{i()}),[i]),s?(0,d.jsx)(Ro,{}):(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(Io,{program:window.balansol.program,name:"pool",filter:Po,init:()=>{},upset:a}),e.children]})},Lo="launchpads",Zo=(0,Xt.createAsyncThunk)("launchpads/initLaunchpads\n  ",(async e=>e)),Fo=(0,Xt.createAsyncThunk)("launchpads/upsetLaunchpad",(async e=>{let{address:t,data:s}=e;if(!B.account.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Eo=((0,Xt.createAsyncThunk)("launchpads/getLaunchpads",(async(e,t)=>{let{getState:s}=t;const{launchpads:n}=s();return n})),(0,Xt.createSlice)({name:Lo,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Zo.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Fo.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer),Oo=[],Wo=()=>{const e=(0,n.useDispatch)(),t=(0,r.useCallback)((async t=>{const s=await window.balansol.program.account.pool.all(),n={};for(const e in t){s.find((s=>s.publicKey.equals(t[e].pool)))&&(n[e]=t[e])}e(Zo(n))}),[e]),s=(0,r.useCallback)(((t,s)=>e(Fo({address:t,data:s}))),[e]);return(0,d.jsx)(Io,{program:window.launchpad.program,name:"launchpad",filter:Oo,init:t,upset:s})},Yo="cheques",Ko=(0,Xt.createAsyncThunk)("cheques/initCheques\n  ",(async e=>e)),Uo=((0,Xt.createAsyncThunk)("cheques/getLaunchpads",(async(e,t)=>{let{getState:s}=t;const{launchpads:n}=s();return n})),(0,Xt.createAsyncThunk)("cheques/upsetCheque",(async e=>{let{address:t,data:s}=e;if(!B.account.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}}))),Go=(0,Xt.createSlice)({name:Yo,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ko.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Uo.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,qo=[],Vo=()=>{const e=(0,n.useDispatch)(),t=(0,r.useCallback)((t=>e(Ko(t))),[e]),s=(0,r.useCallback)(((t,s)=>e(Uo({address:t,data:s}))),[e]);return(0,d.jsx)(Io,{program:window.launchpad.program,name:"cheque",filter:qo,init:t,upset:s})},{sol:{balancerAddress:Ho,launchpadAddress:Jo}}=W,$o=e=>{const[t,s]=(0,r.useState)(!0),[n]=Mo(),a=(0,o.useWalletAddress)(),i=(0,r.useCallback)((()=>{if(!o.util.isAddress(a))return;const e=(0,o.getAnchorProvider)();window.balansol=new(se())(e,Ho),window.launchpad=new(Bo())(e,Jo,Ho),s(!1)}),[a]);return(0,r.useEffect)((()=>{i()}),[i]),t||Object.values(n).includes(!0)?(0,d.jsx)(Ro,{}):(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(Wo,{}),(0,d.jsx)(Vo,{}),(0,d.jsx)(Do,{children:e.children})]})},Xo=s.p+"static/media/background-dark.622cd8aea937b87d31af.png",Qo=s.p+"static/media/background-light.d3a232854f7f1440ca6c.png",{sol:{connection:_o,balancerAddress:er}}=W,tr=()=>{const e=(0,o.useSetBackground)(),{extend:t}=(0,o.useAppRoute)(),s=(0,o.useWalletAddress)();return(0,r.useEffect)((()=>{e({light:Qo,dark:Xo})}),[e]),o.util.isAddress(er)?(0,d.jsx)(l.d2,{connection:_o,cluster:"mainnet-beta",userPublicKey:new i.web3.PublicKey(s),children:(0,d.jsx)($o,{children:(0,d.jsx)(ns,{children:(0,d.jsx)(fs,{children:(0,d.jsxs)(c.Row,{gutter:[0,24],children:[(0,d.jsx)(c.Col,{span:24,children:(0,d.jsx)(h,{})}),(0,d.jsx)(c.Col,{span:24,id:"balansol-body",children:(0,d.jsxs)(a.Switch,{children:[(0,d.jsx)(a.Route,{path:t("/details"),component:Jt}),(0,d.jsx)(a.Route,{path:t("/swap"),children:(0,d.jsx)(Ps,{})}),(0,d.jsx)(a.Route,{path:t("/pools"),children:(0,d.jsx)(mn,{})}),(0,d.jsx)(a.Route,{path:t("/launchpad"),children:(0,d.jsx)(Gn,{})}),(0,d.jsx)(a.Route,{path:t("/launchpad-create"),children:(0,d.jsx)(lo,{})}),(0,d.jsx)(a.Route,{path:t("/launchpad-all"),component:Fn}),(0,d.jsx)(a.Route,{path:t("/launchpad-details"),component:So}),(0,d.jsx)(a.Route,{path:t("/launchpad-your-purchased"),component:ko}),(0,d.jsx)(a.Route,{path:t("/farms"),children:(0,d.jsx)(a.Redirect,{to:"/app/sen_farming_v2?autoInstall=true"})}),(0,d.jsx)(a.Redirect,{from:"*",to:t("/swap",{absolutePath:!0})})]})})]})})})})}):(0,d.jsx)(c.Empty,{description:"Coming soon.",image:c.Empty.PRESENTED_IMAGE_SIMPLE})};s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const sr="main",nr=(0,Xt.createAsyncThunk)("main/increaseCounter",(async(e,t)=>{let{getState:s}=t;const{main:{counter:n}}=s();return{counter:n+1}})),or=(0,Xt.createSlice)({name:sr,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(nr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,rr=(0,Xt.configureStore)({middleware:e=>e({serializableCheck:!1}),devTools:!1,reducer:{main:or,pools:_s,swap:es,searchPools:pn,launchpads:Eo,cheques:Go}});var ar=s(45597);const{manifest:{appId:ir}}=W,lr=()=>(0,d.jsx)(o.AntdProvider,{appId:ir,prefixCls:ir,children:(0,d.jsx)(n.Provider,{store:rr,children:(0,d.jsx)(tr,{})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.a221197702aa27813243.md"},69363:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABhCAMAAADx2D+RAAABOFBMVEUAAABm37OA4L9237qE4MCD4L9237lu37Vx4Ll84L134Lt537ho37GB4L9/375p4LZ/4Lxp4LZ/4L2C4L9n4bZo4LVl4LNz4Llm4LSE4b9o4LSB4L5o4bZp37SD4MCB37+B371p37WD4L984LyA371p4LWA372C5L7///+A4L69795n4LW279uD4L9w4Lhz4Llt4Ld74Lx+4L1r4LZq4LV94L1l4LR34Lp44Ltp4LZx4Ll54Lu079pv4Ld14bps4LZ64Lt24Lu/795037mA375n37S48NyC4b9x37hq4baA4b+r7NWE4cB+4b6d6c6D379k4LTK8+Su7dft+/aL5cWX58tm4bVw4bml69J937yH48KB5MCh69GS6MmD5MF95L954ry37tqo69OO5sd24rts4bhy4rrd9+6PMOy2AAAAKHRSTlMAQP7+vr9AQL+/vxAg3yDvQJ+QcG/f38+/ro+Af2CfYFAw7+8wr58vOCnhoQAACntJREFUaN6UlG9r2lAYxRVhG+ugFPanlO3FXgwKkRhIqESSlE1SImWyOasytZbVdt//G+yc57k31xht3cm9T66b/Z3nnnvbxm69+dz8b30+ahymo7cn7y8uflz8UGFF4eU0Ycl17XmeWVx4x6dnzefxp2DiqYPJmNiV1nKRe1SOkb87efOUwcdjdq0GdVngRFqf4FEp3y33ezTfAzypwycYnvWgUJ0c2els95GcXeyR8oU82YXNt82i6N2ObRydbiI1cTBzL+cZcrW38diLB3nkxVEUke6x5G9r1/O94wNaJoL+9ylWC6BROFGjmD6c0ccdBiZrdkuXXdTcsnMv4lq6zvPIKKYBbWhS3cUH5uK5pnMpNTwDUQ+hDwCVPQA7IJketGENBy83byl+fMJwvKeVx2ISE4xKD67JHkg88UAsojCM4/DYHXcTt1sJHLvEMJg18sjJo4G2HFd7xxtmYRyGcHlVOrxT/L7GifMYiB6i1hI7kJ2EugpRSR+EInsUnwTj4merXAApuZPp+rWf5BkIUBrGB11Rl3ig4yOzhbzSsR4o5JmIpVmtZRzSLiYGUYBXdKn18qNuoTSI+eDFyB9XqwDbJ8yeKCPWs4zIZtqRIWar1bTiEAAPHYvDKZCCh8xdXi1GCTS7fyQWfKWyZY1c6cZAv93+c79mOAQHKix4Y9/o3nMvtok8LhKr6zGvekgidxDWFITZjHgoSUZjwjEwWR6C4ETOWbAK53i8Tja05OWW48SrknQgSa+vwYeD6sb2zoeDMX1RtATNuNXA6V7xFTimCWQ9It9pSTRlX5/xByOm3AUfJltaVdCQxIA+OYYWfWXe88uqw6dGA2B2jyfmb8o82daCZEZiWhe8afW2va2ZcFNMXZzhoCUejIFcbW6hjSnp6mvF0BWK4nLGekFodRvzwMqnw0mjOeDN5m3Rc0yckK8eNomchNqqORC5ZbJMyUZJ0yD101eNpnDLw7xrGzYHCzQMTPd2lFoZ7KaGZKeYvj/11SEKrRDyimRMlVostHOjh8BpXt9Ce0Y62+fj+3DgGQalx50wqzdwwUTq+MD3v7frmqFxoGmAAYeX4SVFOjnTdl03G92vl+tAI6ayav/6beIZkGyBDhKwHh812to2NAY6lX3M/56fn3/DkiZsclTvZ5zKf01pow7kb9zFZbumtRAx5r/OqZ8+9yBa1i/THcGFr+qJA6R4Lh56SXULejmkZRqoBXrUtLNkO6QhuBaPxzg4weXe/YRotDa3jwbWQlKm9NtOozti1aBwDoJWTYNgWLFIvqaULztwFshZZb/NcXWV3EnvoqJHFzi4C5hKrR7FaAU6hxo4izKJJcC0oMdoxX+CgEfp9IoeHBSu08cEbWyvSLLsmDicgbMwveLbV6Lk5iuzxwC/0xPRAVTbPLuVOb1dLmaz4TjTI60b0AI5A1ggDPvtXscnGbNjSwcONICLwjmm8vI3dUuDuoUPMZBSHVdU6sCLQqIDT+XT0wa0IFtiN0zSUYuCn4rCOmgQxFc0xSx8XrgpI9ptYdiKF2Bhu++7PZTdpuBZ9TDsmzvYa6FENk4LR+bCOiASVWHfssDup7wZYrDforNXWengWleqz6OrnsHzFn2tDiyfsn6mKVEC1lik6iE+Z0ALovrqkNnax8hggKd0ABClAFXR5gitwWFBkUu6wDMYw+I1HVwmgCtZdYABLfqajxI7YGcwwRomrQwObBxi++5qa6XBIRbScV8HCsTCSocXEo+oKPFFRwSDAy3EodvK+t0Wsa1Wq9vl/NrlHpSLoVeaRfXn/FD97iOPbpZ1uzpU1oFwS+1JnFbfDnb4V6kZtTgNRFE4pKsgssuy+yCLoKKiJBCkgdBCRFoNjaRtimsDbdmHbQX9///Ac+6d2Uk67VpPZm4mS/jOnZPZF90d4AiGxHFvLHhWPiKlT7/5e/nd/435D4fGNE0oBmYPdcwHOhxVc6rBTyEaPItYDYdwGR50+MLJsz050eGOQJlD40H2gE90cFi70kONcaLFlHkMmQ2o6BwXhALR4Vune9JZebZ7p1nsyCeaBZcMqxwO7J7nGVgKSznSX1BOspgCN+YYyHS6H+YPe5BE6GIPHW1wrrH6p8WOYGbSVZ5j5LoH5sFAKP4yAszy8MUet5ia3O/bbIHnKjqw4wGZvcE3AfdYKD3b8eMGVtpyG97HoMNA+h5jCLQn53k8Jn3Y+8cupqARbsmOzSsfjfIRHL70QDQXuWSCrJdoHB8zIF+ZvKvuMcHm7Pf7o2fBU8HJgBMGFvq7wjpUxYcNSHZctg4oxwgDogUcgLUNs5JLfrXZZFgft6ABkxB0uVzO+aCigbGhg9CBRM/smw7jzXQbQ7dNlevJHsS+gcBZ7Nt1SWrfaKRVHYaKh6RU09jqc4NnCTn2DLTXvGy/zWBaLpoSQ7FhSPjVZ7w8kQujzo1i34AeJd52qh3dOQBPrhUNOmrsCYzbBtIrNMPbXYtMyVmmlXtoC6QVd2AHtcz7I4kkdgYSMS128Z6Wtvl1JmbqkKuGnMt4X1NJg1dsDeSJ5Zf/dn8NstAzVDoI2YlNTfbawvfUvmJjoPK3QC3BbYkOkJoAgw/qq5azLbnUP/78sDkwg0NvC3huDFLjgB7vETauTexrJak7LG9aDr6dOaUp94C+MdglryVD8qJVSbLWYc2gl7Gv2yxbZ/MUcBbuAf0Tr0G4PfgOGbligxWrt4evuOBAi4z0uXEAWIPmKo193QGouTi+rirH5qDF17vUSRzea8bqAm19h4Ydy7S3tS1b5aqLqukYRM+CC+E61b7DjPm7r6chyMhqgjEwrTYCxsBEuQqCdx2LrJocOEr2/K0R73qu+JQqQe5qp2hU2BRRdI1/0RWwaRPLZs9gO7ONp2STns7n9kM2ewbbDeEgU1UVRZdBcEWscZG66hhMYACU6dvTfNUxiDfs3VhUHM+D4FLoEA0kjbq9g02HGzm0PhRp3d7BMlIVhbF5wf9MfJc5gQ81W3M6JnU5ZzTkOQm4KCRrUJqt3UA903BsCcPwOoCuNGeKaa+Zx696enu7akrXOj0YgEylR1by9q4hn1zdhKzKCzpcEp/KEQcFxSxAJUgtKuFDDi1fVFXZWgCLUtqwPgSiZySula4Zc3K4/HUacmUBHJV90qZL3njhXvIkmU2kh6QMkE1/nXZDXWsiodlMQiziT6KkLJIkeRUYXZFHlJ50+0SyItyCS5UG3VKCxyRMyqhMcKMWF9bh+TloOjALMQCsivZlEwmZduHCQDiEFzSQS/UyeNBH7dp9TZG3BYPXMAhOONkvKm90QOu4Zni4CVq6jqrCw3nt84Br2gXpRSRYTjbO0tZ5948FXh7ih5zWWuFFgVliKVSRW804FmZ1jo/QtVAQKygVu6aFVYJQAEccmKFhLqSUzknh1AIG+3pzrlRnZD4ifBQdRspUhKWV5mfOkvMGEXm6gAWhofauVVNm6SbiYll04dTs7XVwWK/PiS0wmQUv4HzZPlG6P5wZgzOXkLcN8SjY9H/JosXn7DJ4VG9evS15uH2KTreHblgU6tnLU/7G6P3rq5snR3V2TDevrt8cwP8FY5i8wVwIBsQAAAAASUVORK5CYII="},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.ae87573b389c1c96bd89.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.0b0454a9c94cb721d3bf.png"},83943:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel3.3ac409ec75ffde3a2872.png"},7420:()=>{},95856:()=>{},55555:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_background-dark_png-src_static_images_background-ligh-d83fef.273f2d9a.chunk.js.map